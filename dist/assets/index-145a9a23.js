(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function kb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rx={exports:{}},Cu={},Dx={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja=Symbol.for("react.element"),Cb=Symbol.for("react.portal"),Ab=Symbol.for("react.fragment"),Pb=Symbol.for("react.strict_mode"),Nb=Symbol.for("react.profiler"),Rb=Symbol.for("react.provider"),Db=Symbol.for("react.context"),Vb=Symbol.for("react.forward_ref"),Mb=Symbol.for("react.suspense"),jb=Symbol.for("react.memo"),Ob=Symbol.for("react.lazy"),Uy=Symbol.iterator;function Lb(t){return t===null||typeof t!="object"?null:(t=Uy&&t[Uy]||t["@@iterator"],typeof t=="function"?t:null)}var Vx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mx=Object.assign,jx={};function io(t,e,n){this.props=t,this.context=e,this.refs=jx,this.updater=n||Vx}io.prototype.isReactComponent={};io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ox(){}Ox.prototype=io.prototype;function km(t,e,n){this.props=t,this.context=e,this.refs=jx,this.updater=n||Vx}var Cm=km.prototype=new Ox;Cm.constructor=km;Mx(Cm,io.prototype);Cm.isPureReactComponent=!0;var By=Array.isArray,Lx=Object.prototype.hasOwnProperty,Am={current:null},Fx={key:!0,ref:!0,__self:!0,__source:!0};function Ux(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Lx.call(e,r)&&!Fx.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ja,type:t,key:s,ref:o,props:i,_owner:Am.current}}function Fb(t,e){return{$$typeof:Ja,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ja}function Ub(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $y=/\/+/g;function Gh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ub(""+t.key):e.toString(36)}function rc(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ja:case Cb:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gh(o,0):r,By(i)?(n="",t!=null&&(n=t.replace($y,"$&/")+"/"),rc(i,e,n,"",function(u){return u})):i!=null&&(Pm(i)&&(i=Fb(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace($y,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",By(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+Gh(s,a);o+=rc(s,e,n,c,i)}else if(c=Lb(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+Gh(s,a++),o+=rc(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pl(t,e,n){if(t==null)return t;var r=[],i=0;return rc(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Bb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},ic={transition:null},$b={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:ic,ReactCurrentOwner:Am};function Bx(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Pl,forEach:function(t,e,n){Pl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pl(t,function(){e++}),e},toArray:function(t){return Pl(t,function(e){return e})||[]},only:function(t){if(!Pm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=io;se.Fragment=Ab;se.Profiler=Nb;se.PureComponent=km;se.StrictMode=Pb;se.Suspense=Mb;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$b;se.act=Bx;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Mx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Am.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Lx.call(e,c)&&!Fx.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ja,type:t.type,key:i,ref:s,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:Db,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Rb,_context:t},t.Consumer=t};se.createElement=Ux;se.createFactory=function(t){var e=Ux.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:Vb,render:t}};se.isValidElement=Pm;se.lazy=function(t){return{$$typeof:Ob,_payload:{_status:-1,_result:t},_init:Bb}};se.memo=function(t,e){return{$$typeof:jb,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=ic.transition;ic.transition={};try{t()}finally{ic.transition=e}};se.unstable_act=Bx;se.useCallback=function(t,e){return St.current.useCallback(t,e)};se.useContext=function(t){return St.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return St.current.useDeferredValue(t)};se.useEffect=function(t,e){return St.current.useEffect(t,e)};se.useId=function(){return St.current.useId()};se.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return St.current.useMemo(t,e)};se.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};se.useRef=function(t){return St.current.useRef(t)};se.useState=function(t){return St.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return St.current.useTransition()};se.version="18.3.1";Dx.exports=se;var j=Dx.exports;const Nm=kb(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zb=j,Hb=Symbol.for("react.element"),Wb=Symbol.for("react.fragment"),qb=Object.prototype.hasOwnProperty,Gb=zb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kb={key:!0,ref:!0,__self:!0,__source:!0};function $x(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)qb.call(e,r)&&!Kb.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Hb,type:t,key:s,ref:o,props:i,_owner:Gb.current}}Cu.Fragment=Wb;Cu.jsx=$x;Cu.jsxs=$x;Rx.exports=Cu;var h=Rx.exports,qd={},zx={exports:{}},$t={},Hx={exports:{}},Wx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,$){var K=H.length;H.push($);e:for(;0<K;){var X=K-1>>>1,pe=H[X];if(0<i(pe,$))H[X]=$,H[K]=pe,K=X;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var $=H[0],K=H.pop();if(K!==$){H[0]=K;e:for(var X=0,pe=H.length,vn=pe>>>1;X<vn;){var vt=2*(X+1)-1,wn=H[vt],Ze=vt+1,tn=H[Ze];if(0>i(wn,K))Ze<pe&&0>i(tn,wn)?(H[X]=tn,H[Ze]=K,X=Ze):(H[X]=wn,H[vt]=K,X=vt);else if(Ze<pe&&0>i(tn,K))H[X]=tn,H[Ze]=K,X=Ze;else break e}}return $}function i(H,$){var K=H.sortIndex-$.sortIndex;return K!==0?K:H.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,f=null,p=3,x=!1,T=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(H){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=H)r(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(u)}}function k(H){if(A=!1,w(H),!T)if(n(c)!==null)T=!0,oe(V);else{var $=n(u);$!==null&&Me(k,$.startTime-H)}}function V(H,$){T=!1,A&&(A=!1,_(v),v=-1),x=!0;var K=p;try{for(w($),f=n(c);f!==null&&(!(f.expirationTime>$)||H&&!P());){var X=f.callback;if(typeof X=="function"){f.callback=null,p=f.priorityLevel;var pe=X(f.expirationTime<=$);$=t.unstable_now(),typeof pe=="function"?f.callback=pe:f===n(c)&&r(c),w($)}else r(c);f=n(c)}if(f!==null)var vn=!0;else{var vt=n(u);vt!==null&&Me(k,vt.startTime-$),vn=!1}return vn}finally{f=null,p=K,x=!1}}var O=!1,b=null,v=-1,S=5,I=-1;function P(){return!(t.unstable_now()-I<S)}function N(){if(b!==null){var H=t.unstable_now();I=H;var $=!0;try{$=b(!0,H)}finally{$?C():(O=!1,b=null)}}else O=!1}var C;if(typeof y=="function")C=function(){y(N)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ee=Y.port2;Y.port1.onmessage=N,C=function(){ee.postMessage(null)}}else C=function(){R(N,0)};function oe(H){b=H,O||(O=!0,C())}function Me(H,$){v=R(function(){H(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){T||x||(T=!0,oe(V))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var K=p;p=$;try{return H()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,$){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var K=p;p=H;try{return $()}finally{p=K}},t.unstable_scheduleCallback=function(H,$,K){var X=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?X+K:X):K=X,H){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=K+pe,H={id:d++,callback:$,priorityLevel:H,startTime:K,expirationTime:pe,sortIndex:-1},K>X?(H.sortIndex=K,e(u,H),n(c)===null&&H===n(u)&&(A?(_(v),v=-1):A=!0,Me(k,K-X))):(H.sortIndex=pe,e(c,H),T||x||(T=!0,oe(V))),H},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(H){var $=p;return function(){var K=p;p=$;try{return H.apply(this,arguments)}finally{p=K}}}})(Wx);Hx.exports=Wx;var Qb=Hx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yb=j,Ut=Qb;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var qx=new Set,Ta={};function Qi(t,e){Us(t,e),Us(t+"Capture",e)}function Us(t,e){for(Ta[t]=e,t=0;t<e.length;t++)qx.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gd=Object.prototype.hasOwnProperty,Xb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zy={},Hy={};function Jb(t){return Gd.call(Hy,t)?!0:Gd.call(zy,t)?!1:Xb.test(t)?Hy[t]=!0:(zy[t]=!0,!1)}function Zb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ek(t,e,n,r){if(e===null||typeof e>"u"||Zb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Rm=/[\-:]([a-z])/g;function Dm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Rm,Dm);st[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Rm,Dm);st[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Rm,Dm);st[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vm(t,e,n,r){var i=st.hasOwnProperty(e)?st[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ek(e,n,i,r)&&(n=null),r||i===null?Jb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cr=Yb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nl=Symbol.for("react.element"),ds=Symbol.for("react.portal"),fs=Symbol.for("react.fragment"),Mm=Symbol.for("react.strict_mode"),Kd=Symbol.for("react.profiler"),Gx=Symbol.for("react.provider"),Kx=Symbol.for("react.context"),jm=Symbol.for("react.forward_ref"),Qd=Symbol.for("react.suspense"),Yd=Symbol.for("react.suspense_list"),Om=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),Qx=Symbol.for("react.offscreen"),Wy=Symbol.iterator;function Oo(t){return t===null||typeof t!="object"?null:(t=Wy&&t[Wy]||t["@@iterator"],typeof t=="function"?t:null)}var Pe=Object.assign,Kh;function Go(t){if(Kh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kh=e&&e[1]||""}return`
`+Kh+t}var Qh=!1;function Yh(t,e){if(!t||Qh)return"";Qh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Qh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Go(t):""}function tk(t){switch(t.tag){case 5:return Go(t.type);case 16:return Go("Lazy");case 13:return Go("Suspense");case 19:return Go("SuspenseList");case 0:case 2:case 15:return t=Yh(t.type,!1),t;case 11:return t=Yh(t.type.render,!1),t;case 1:return t=Yh(t.type,!0),t;default:return""}}function Xd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fs:return"Fragment";case ds:return"Portal";case Kd:return"Profiler";case Mm:return"StrictMode";case Qd:return"Suspense";case Yd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kx:return(t.displayName||"Context")+".Consumer";case Gx:return(t._context.displayName||"Context")+".Provider";case jm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Om:return e=t.displayName||null,e!==null?e:Xd(t.type)||"Memo";case _r:e=t._payload,t=t._init;try{return Xd(t(e))}catch{}}return null}function nk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xd(e);case 8:return e===Mm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Yx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rk(t){var e=Yx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rl(t){t._valueTracker||(t._valueTracker=rk(t))}function Xx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Yx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jd(t,e){var n=e.checked;return Pe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Jx(t,e){e=e.checked,e!=null&&Vm(t,"checked",e,!1)}function Zd(t,e){Jx(t,e);var n=Yr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ef(t,e.type,n):e.hasOwnProperty("defaultValue")&&ef(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ef(t,e,n){(e!=="number"||Cc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ko=Array.isArray;function Cs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function tf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Pe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ky(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Ko(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function Zx(t,e){var n=Yr(e.value),r=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dl,t_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dl=Dl||document.createElement("div"),Dl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ik=["Webkit","ms","Moz","O"];Object.keys(ra).forEach(function(t){ik.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ra[e]=ra[t]})});function n_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ra.hasOwnProperty(t)&&ra[t]?(""+e).trim():e+"px"}function r_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=n_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var sk=Pe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rf(t,e){if(e){if(sk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function sf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var of=null;function Lm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var af=null,As=null,Ps=null;function Yy(t){if(t=tl(t)){if(typeof af!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Du(e),af(t.stateNode,t.type,e))}}function i_(t){As?Ps?Ps.push(t):Ps=[t]:As=t}function s_(){if(As){var t=As,e=Ps;if(Ps=As=null,Yy(t),e)for(t=0;t<e.length;t++)Yy(e[t])}}function o_(t,e){return t(e)}function a_(){}var Xh=!1;function l_(t,e,n){if(Xh)return t(e,n);Xh=!0;try{return o_(t,e,n)}finally{Xh=!1,(As!==null||Ps!==null)&&(a_(),s_())}}function Sa(t,e){var n=t.stateNode;if(n===null)return null;var r=Du(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var lf=!1;if(er)try{var Lo={};Object.defineProperty(Lo,"passive",{get:function(){lf=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{lf=!1}function ok(t,e,n,r,i,s,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var ia=!1,Ac=null,Pc=!1,cf=null,ak={onError:function(t){ia=!0,Ac=t}};function lk(t,e,n,r,i,s,o,a,c){ia=!1,Ac=null,ok.apply(ak,arguments)}function ck(t,e,n,r,i,s,o,a,c){if(lk.apply(this,arguments),ia){if(ia){var u=Ac;ia=!1,Ac=null}else throw Error(U(198));Pc||(Pc=!0,cf=u)}}function Yi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function c_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Xy(t){if(Yi(t)!==t)throw Error(U(188))}function uk(t){var e=t.alternate;if(!e){if(e=Yi(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Xy(i),t;if(s===r)return Xy(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function u_(t){return t=uk(t),t!==null?h_(t):null}function h_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=h_(t);if(e!==null)return e;t=t.sibling}return null}var d_=Ut.unstable_scheduleCallback,Jy=Ut.unstable_cancelCallback,hk=Ut.unstable_shouldYield,dk=Ut.unstable_requestPaint,Oe=Ut.unstable_now,fk=Ut.unstable_getCurrentPriorityLevel,Fm=Ut.unstable_ImmediatePriority,f_=Ut.unstable_UserBlockingPriority,Nc=Ut.unstable_NormalPriority,mk=Ut.unstable_LowPriority,m_=Ut.unstable_IdlePriority,Au=null,Pn=null;function pk(t){if(Pn&&typeof Pn.onCommitFiberRoot=="function")try{Pn.onCommitFiberRoot(Au,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:vk,gk=Math.log,yk=Math.LN2;function vk(t){return t>>>=0,t===0?32:31-(gk(t)/yk|0)|0}var Vl=64,Ml=4194304;function Qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Qo(a):(s&=o,s!==0&&(r=Qo(s)))}else o=n&~i,o!==0?r=Qo(o):s!==0&&(r=Qo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),i=1<<n,r|=t[n],e&=~i;return r}function wk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-cn(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=wk(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function uf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p_(){var t=Vl;return Vl<<=1,!(Vl&4194240)&&(Vl=64),t}function Jh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Za(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function _k(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-cn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Um(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var me=0;function g_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var y_,Bm,v_,w_,x_,hf=!1,jl=[],Vr=null,Mr=null,jr=null,Ia=new Map,ba=new Map,Sr=[],Tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zy(t,e){switch(t){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Mr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Ia.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ba.delete(e.pointerId)}}function Fo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=tl(e),e!==null&&Bm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Ek(t,e,n,r,i){switch(e){case"focusin":return Vr=Fo(Vr,t,e,n,r,i),!0;case"dragenter":return Mr=Fo(Mr,t,e,n,r,i),!0;case"mouseover":return jr=Fo(jr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ia.set(s,Fo(Ia.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ba.set(s,Fo(ba.get(s)||null,t,e,n,r,i)),!0}return!1}function __(t){var e=Ai(t.target);if(e!==null){var n=Yi(e);if(n!==null){if(e=n.tag,e===13){if(e=c_(n),e!==null){t.blockedOn=e,x_(t.priority,function(){v_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=df(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);of=r,n.target.dispatchEvent(r),of=null}else return e=tl(n),e!==null&&Bm(e),t.blockedOn=n,!1;e.shift()}return!0}function e0(t,e,n){sc(t)&&n.delete(e)}function Sk(){hf=!1,Vr!==null&&sc(Vr)&&(Vr=null),Mr!==null&&sc(Mr)&&(Mr=null),jr!==null&&sc(jr)&&(jr=null),Ia.forEach(e0),ba.forEach(e0)}function Uo(t,e){t.blockedOn===e&&(t.blockedOn=null,hf||(hf=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,Sk)))}function ka(t){function e(i){return Uo(i,t)}if(0<jl.length){Uo(jl[0],t);for(var n=1;n<jl.length;n++){var r=jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vr!==null&&Uo(Vr,t),Mr!==null&&Uo(Mr,t),jr!==null&&Uo(jr,t),Ia.forEach(e),ba.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)__(n),n.blockedOn===null&&Sr.shift()}var Ns=cr.ReactCurrentBatchConfig,Dc=!0;function Ik(t,e,n,r){var i=me,s=Ns.transition;Ns.transition=null;try{me=1,$m(t,e,n,r)}finally{me=i,Ns.transition=s}}function bk(t,e,n,r){var i=me,s=Ns.transition;Ns.transition=null;try{me=4,$m(t,e,n,r)}finally{me=i,Ns.transition=s}}function $m(t,e,n,r){if(Dc){var i=df(t,e,n,r);if(i===null)ld(t,e,r,Vc,n),Zy(t,r);else if(Ek(i,t,e,n,r))r.stopPropagation();else if(Zy(t,r),e&4&&-1<Tk.indexOf(t)){for(;i!==null;){var s=tl(i);if(s!==null&&y_(s),s=df(t,e,n,r),s===null&&ld(t,e,r,Vc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ld(t,e,r,null,n)}}var Vc=null;function df(t,e,n,r){if(Vc=null,t=Lm(r),t=Ai(t),t!==null)if(e=Yi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=c_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vc=t,null}function T_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fk()){case Fm:return 1;case f_:return 4;case Nc:case mk:return 16;case m_:return 536870912;default:return 16}default:return 16}}var Ar=null,zm=null,oc=null;function E_(){if(oc)return oc;var t,e=zm,n=e.length,r,i="value"in Ar?Ar.value:Ar.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return oc=i.slice(t,1<r?1-r:void 0)}function ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ol(){return!0}function t0(){return!1}function zt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ol:t0,this.isPropagationStopped=t0,this}return Pe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),e}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hm=zt(so),el=Pe({},so,{view:0,detail:0}),kk=zt(el),Zh,ed,Bo,Pu=Pe({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bo&&(Bo&&t.type==="mousemove"?(Zh=t.screenX-Bo.screenX,ed=t.screenY-Bo.screenY):ed=Zh=0,Bo=t),Zh)},movementY:function(t){return"movementY"in t?t.movementY:ed}}),n0=zt(Pu),Ck=Pe({},Pu,{dataTransfer:0}),Ak=zt(Ck),Pk=Pe({},el,{relatedTarget:0}),td=zt(Pk),Nk=Pe({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),Rk=zt(Nk),Dk=Pe({},so,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vk=zt(Dk),Mk=Pe({},so,{data:0}),r0=zt(Mk),jk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ok={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Lk[t])?!!e[t]:!1}function Wm(){return Fk}var Uk=Pe({},el,{key:function(t){if(t.key){var e=jk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ok[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(t){return t.type==="keypress"?ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Bk=zt(Uk),$k=Pe({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i0=zt($k),zk=Pe({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),Hk=zt(zk),Wk=Pe({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),qk=zt(Wk),Gk=Pe({},Pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Kk=zt(Gk),Qk=[9,13,27,32],qm=er&&"CompositionEvent"in window,sa=null;er&&"documentMode"in document&&(sa=document.documentMode);var Yk=er&&"TextEvent"in window&&!sa,S_=er&&(!qm||sa&&8<sa&&11>=sa),s0=String.fromCharCode(32),o0=!1;function I_(t,e){switch(t){case"keyup":return Qk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function b_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ms=!1;function Xk(t,e){switch(t){case"compositionend":return b_(e);case"keypress":return e.which!==32?null:(o0=!0,s0);case"textInput":return t=e.data,t===s0&&o0?null:t;default:return null}}function Jk(t,e){if(ms)return t==="compositionend"||!qm&&I_(t,e)?(t=E_(),oc=zm=Ar=null,ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return S_&&e.locale!=="ko"?null:e.data;default:return null}}var Zk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Zk[t.type]:e==="textarea"}function k_(t,e,n,r){i_(r),e=Mc(e,"onChange"),0<e.length&&(n=new Hm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oa=null,Ca=null;function eC(t){L_(t,0)}function Nu(t){var e=ys(t);if(Xx(e))return t}function tC(t,e){if(t==="change")return e}var C_=!1;if(er){var nd;if(er){var rd="oninput"in document;if(!rd){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),rd=typeof l0.oninput=="function"}nd=rd}else nd=!1;C_=nd&&(!document.documentMode||9<document.documentMode)}function c0(){oa&&(oa.detachEvent("onpropertychange",A_),Ca=oa=null)}function A_(t){if(t.propertyName==="value"&&Nu(Ca)){var e=[];k_(e,Ca,t,Lm(t)),l_(eC,e)}}function nC(t,e,n){t==="focusin"?(c0(),oa=e,Ca=n,oa.attachEvent("onpropertychange",A_)):t==="focusout"&&c0()}function rC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nu(Ca)}function iC(t,e){if(t==="click")return Nu(e)}function sC(t,e){if(t==="input"||t==="change")return Nu(e)}function oC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fn=typeof Object.is=="function"?Object.is:oC;function Aa(t,e){if(fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Gd.call(e,i)||!fn(t[i],e[i]))return!1}return!0}function u0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h0(t,e){var n=u0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=u0(n)}}function P_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?P_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N_(){for(var t=window,e=Cc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cc(t.document)}return e}function Gm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aC(t){var e=N_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&P_(n.ownerDocument.documentElement,n)){if(r!==null&&Gm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=h0(n,s);var o=h0(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lC=er&&"documentMode"in document&&11>=document.documentMode,ps=null,ff=null,aa=null,mf=!1;function d0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mf||ps==null||ps!==Cc(r)||(r=ps,"selectionStart"in r&&Gm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),aa&&Aa(aa,r)||(aa=r,r=Mc(ff,"onSelect"),0<r.length&&(e=new Hm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ps)))}function Ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gs={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},id={},R_={};er&&(R_=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function Ru(t){if(id[t])return id[t];if(!gs[t])return t;var e=gs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in R_)return id[t]=e[n];return t}var D_=Ru("animationend"),V_=Ru("animationiteration"),M_=Ru("animationstart"),j_=Ru("transitionend"),O_=new Map,f0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function li(t,e){O_.set(t,e),Qi(e,[t])}for(var sd=0;sd<f0.length;sd++){var od=f0[sd],cC=od.toLowerCase(),uC=od[0].toUpperCase()+od.slice(1);li(cC,"on"+uC)}li(D_,"onAnimationEnd");li(V_,"onAnimationIteration");li(M_,"onAnimationStart");li("dblclick","onDoubleClick");li("focusin","onFocus");li("focusout","onBlur");li(j_,"onTransitionEnd");Us("onMouseEnter",["mouseout","mouseover"]);Us("onMouseLeave",["mouseout","mouseover"]);Us("onPointerEnter",["pointerout","pointerover"]);Us("onPointerLeave",["pointerout","pointerover"]);Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function m0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ck(r,e,void 0,t),t.currentTarget=null}function L_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;m0(i,a,u),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;m0(i,a,u),s=c}}}if(Pc)throw t=cf,Pc=!1,cf=null,t}function Te(t,e){var n=e[wf];n===void 0&&(n=e[wf]=new Set);var r=t+"__bubble";n.has(r)||(F_(e,t,2,!1),n.add(r))}function ad(t,e,n){var r=0;e&&(r|=4),F_(n,t,r,e)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function Pa(t){if(!t[Fl]){t[Fl]=!0,qx.forEach(function(n){n!=="selectionchange"&&(hC.has(n)||ad(n,!1,t),ad(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fl]||(e[Fl]=!0,ad("selectionchange",!1,e))}}function F_(t,e,n,r){switch(T_(e)){case 1:var i=Ik;break;case 4:i=bk;break;default:i=$m}n=i.bind(null,e,n,t),i=void 0,!lf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ld(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ai(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}l_(function(){var u=s,d=Lm(n),f=[];e:{var p=O_.get(t);if(p!==void 0){var x=Hm,T=t;switch(t){case"keypress":if(ac(n)===0)break e;case"keydown":case"keyup":x=Bk;break;case"focusin":T="focus",x=td;break;case"focusout":T="blur",x=td;break;case"beforeblur":case"afterblur":x=td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=n0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Ak;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Hk;break;case D_:case V_:case M_:x=Rk;break;case j_:x=qk;break;case"scroll":x=kk;break;case"wheel":x=Kk;break;case"copy":case"cut":case"paste":x=Vk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=i0}var A=(e&4)!==0,R=!A&&t==="scroll",_=A?p!==null?p+"Capture":null:p;A=[];for(var y=u,w;y!==null;){w=y;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,_!==null&&(k=Sa(y,_),k!=null&&A.push(Na(y,k,w)))),R)break;y=y.return}0<A.length&&(p=new x(p,T,null,n,d),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",p&&n!==of&&(T=n.relatedTarget||n.fromElement)&&(Ai(T)||T[tr]))break e;if((x||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,x?(T=n.relatedTarget||n.toElement,x=u,T=T?Ai(T):null,T!==null&&(R=Yi(T),T!==R||T.tag!==5&&T.tag!==6)&&(T=null)):(x=null,T=u),x!==T)){if(A=n0,k="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(A=i0,k="onPointerLeave",_="onPointerEnter",y="pointer"),R=x==null?p:ys(x),w=T==null?p:ys(T),p=new A(k,y+"leave",x,n,d),p.target=R,p.relatedTarget=w,k=null,Ai(d)===u&&(A=new A(_,y+"enter",T,n,d),A.target=w,A.relatedTarget=R,k=A),R=k,x&&T)t:{for(A=x,_=T,y=0,w=A;w;w=os(w))y++;for(w=0,k=_;k;k=os(k))w++;for(;0<y-w;)A=os(A),y--;for(;0<w-y;)_=os(_),w--;for(;y--;){if(A===_||_!==null&&A===_.alternate)break t;A=os(A),_=os(_)}A=null}else A=null;x!==null&&p0(f,p,x,A,!1),T!==null&&R!==null&&p0(f,R,T,A,!0)}}e:{if(p=u?ys(u):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var V=tC;else if(a0(p))if(C_)V=sC;else{V=rC;var O=nC}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=iC);if(V&&(V=V(t,u))){k_(f,V,n,d);break e}O&&O(t,p,u),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&ef(p,"number",p.value)}switch(O=u?ys(u):window,t){case"focusin":(a0(O)||O.contentEditable==="true")&&(ps=O,ff=u,aa=null);break;case"focusout":aa=ff=ps=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,d0(f,n,d);break;case"selectionchange":if(lC)break;case"keydown":case"keyup":d0(f,n,d)}var b;if(qm)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ms?I_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(S_&&n.locale!=="ko"&&(ms||v!=="onCompositionStart"?v==="onCompositionEnd"&&ms&&(b=E_()):(Ar=d,zm="value"in Ar?Ar.value:Ar.textContent,ms=!0)),O=Mc(u,v),0<O.length&&(v=new r0(v,t,null,n,d),f.push({event:v,listeners:O}),b?v.data=b:(b=b_(n),b!==null&&(v.data=b)))),(b=Yk?Xk(t,n):Jk(t,n))&&(u=Mc(u,"onBeforeInput"),0<u.length&&(d=new r0("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=b))}L_(f,e)})}function Na(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sa(t,n),s!=null&&r.unshift(Na(t,s,i)),s=Sa(t,e),s!=null&&r.push(Na(t,s,i))),t=t.return}return r}function os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function p0(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,i?(c=Sa(n,s),c!=null&&o.unshift(Na(n,c,a))):i||(c=Sa(n,s),c!=null&&o.push(Na(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dC=/\r\n?/g,fC=/\u0000|\uFFFD/g;function g0(t){return(typeof t=="string"?t:""+t).replace(dC,`
`).replace(fC,"")}function Ul(t,e,n){if(e=g0(e),g0(t)!==e&&n)throw Error(U(425))}function jc(){}var pf=null,gf=null;function yf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vf=typeof setTimeout=="function"?setTimeout:void 0,mC=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,pC=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(t){return y0.resolve(null).then(t).catch(gC)}:vf;function gC(t){setTimeout(function(){throw t})}function cd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ka(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ka(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function v0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oo=Math.random().toString(36).slice(2),In="__reactFiber$"+oo,Ra="__reactProps$"+oo,tr="__reactContainer$"+oo,wf="__reactEvents$"+oo,yC="__reactListeners$"+oo,vC="__reactHandles$"+oo;function Ai(t){var e=t[In];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[In]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=v0(t);t!==null;){if(n=t[In])return n;t=v0(t)}return e}t=n,n=t.parentNode}return null}function tl(t){return t=t[In]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Du(t){return t[Ra]||null}var xf=[],vs=-1;function ci(t){return{current:t}}function Se(t){0>vs||(t.current=xf[vs],xf[vs]=null,vs--)}function we(t,e){vs++,xf[vs]=t.current,t.current=e}var Xr={},gt=ci(Xr),Pt=ci(!1),Fi=Xr;function Bs(t,e){var n=t.type.contextTypes;if(!n)return Xr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nt(t){return t=t.childContextTypes,t!=null}function Oc(){Se(Pt),Se(gt)}function w0(t,e,n){if(gt.current!==Xr)throw Error(U(168));we(gt,e),we(Pt,n)}function U_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,nk(t)||"Unknown",i));return Pe({},n,r)}function Lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,Fi=gt.current,we(gt,t),we(Pt,Pt.current),!0}function x0(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=U_(t,e,Fi),r.__reactInternalMemoizedMergedChildContext=t,Se(Pt),Se(gt),we(gt,t)):Se(Pt),we(Pt,n)}var zn=null,Vu=!1,ud=!1;function B_(t){zn===null?zn=[t]:zn.push(t)}function wC(t){Vu=!0,B_(t)}function ui(){if(!ud&&zn!==null){ud=!0;var t=0,e=me;try{var n=zn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,Vu=!1}catch(i){throw zn!==null&&(zn=zn.slice(t+1)),d_(Fm,ui),i}finally{me=e,ud=!1}}return null}var ws=[],xs=0,Fc=null,Uc=0,qt=[],Gt=0,Ui=null,Wn=1,qn="";function Ti(t,e){ws[xs++]=Uc,ws[xs++]=Fc,Fc=t,Uc=e}function $_(t,e,n){qt[Gt++]=Wn,qt[Gt++]=qn,qt[Gt++]=Ui,Ui=t;var r=Wn;t=qn;var i=32-cn(r)-1;r&=~(1<<i),n+=1;var s=32-cn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wn=1<<32-cn(e)+i|n<<i|r,qn=s+t}else Wn=1<<s|n<<i|r,qn=t}function Km(t){t.return!==null&&(Ti(t,1),$_(t,1,0))}function Qm(t){for(;t===Fc;)Fc=ws[--xs],ws[xs]=null,Uc=ws[--xs],ws[xs]=null;for(;t===Ui;)Ui=qt[--Gt],qt[Gt]=null,qn=qt[--Gt],qt[Gt]=null,Wn=qt[--Gt],qt[Gt]=null}var Lt=null,jt=null,be=!1,on=null;function z_(t,e){var n=Qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,jt=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ui!==null?{id:Wn,overflow:qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,jt=null,!0):!1;default:return!1}}function _f(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tf(t){if(be){var e=jt;if(e){var n=e;if(!_0(t,e)){if(_f(t))throw Error(U(418));e=Or(n.nextSibling);var r=Lt;e&&_0(t,e)?z_(r,n):(t.flags=t.flags&-4097|2,be=!1,Lt=t)}}else{if(_f(t))throw Error(U(418));t.flags=t.flags&-4097|2,be=!1,Lt=t}}}function T0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function Bl(t){if(t!==Lt)return!1;if(!be)return T0(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yf(t.type,t.memoizedProps)),e&&(e=jt)){if(_f(t))throw H_(),Error(U(418));for(;e;)z_(t,e),e=Or(e.nextSibling)}if(T0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Lt?Or(t.stateNode.nextSibling):null;return!0}function H_(){for(var t=jt;t;)t=Or(t.nextSibling)}function $s(){jt=Lt=null,be=!1}function Ym(t){on===null?on=[t]:on.push(t)}var xC=cr.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function $l(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function E0(t){var e=t._init;return e(t._payload)}function W_(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=Br(_,y),_.index=0,_.sibling=null,_}function s(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,y,w,k){return y===null||y.tag!==6?(y=yd(w,_.mode,k),y.return=_,y):(y=i(y,w),y.return=_,y)}function c(_,y,w,k){var V=w.type;return V===fs?d(_,y,w.props.children,k,w.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===_r&&E0(V)===y.type)?(k=i(y,w.props),k.ref=$o(_,y,w),k.return=_,k):(k=mc(w.type,w.key,w.props,null,_.mode,k),k.ref=$o(_,y,w),k.return=_,k)}function u(_,y,w,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=vd(w,_.mode,k),y.return=_,y):(y=i(y,w.children||[]),y.return=_,y)}function d(_,y,w,k,V){return y===null||y.tag!==7?(y=ji(w,_.mode,k,V),y.return=_,y):(y=i(y,w),y.return=_,y)}function f(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=yd(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Nl:return w=mc(y.type,y.key,y.props,null,_.mode,w),w.ref=$o(_,null,y),w.return=_,w;case ds:return y=vd(y,_.mode,w),y.return=_,y;case _r:var k=y._init;return f(_,k(y._payload),w)}if(Ko(y)||Oo(y))return y=ji(y,_.mode,w,null),y.return=_,y;$l(_,y)}return null}function p(_,y,w,k){var V=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:a(_,y,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nl:return w.key===V?c(_,y,w,k):null;case ds:return w.key===V?u(_,y,w,k):null;case _r:return V=w._init,p(_,y,V(w._payload),k)}if(Ko(w)||Oo(w))return V!==null?null:d(_,y,w,k,null);$l(_,w)}return null}function x(_,y,w,k,V){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(w)||null,a(y,_,""+k,V);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Nl:return _=_.get(k.key===null?w:k.key)||null,c(y,_,k,V);case ds:return _=_.get(k.key===null?w:k.key)||null,u(y,_,k,V);case _r:var O=k._init;return x(_,y,w,O(k._payload),V)}if(Ko(k)||Oo(k))return _=_.get(w)||null,d(y,_,k,V,null);$l(y,k)}return null}function T(_,y,w,k){for(var V=null,O=null,b=y,v=y=0,S=null;b!==null&&v<w.length;v++){b.index>v?(S=b,b=null):S=b.sibling;var I=p(_,b,w[v],k);if(I===null){b===null&&(b=S);break}t&&b&&I.alternate===null&&e(_,b),y=s(I,y,v),O===null?V=I:O.sibling=I,O=I,b=S}if(v===w.length)return n(_,b),be&&Ti(_,v),V;if(b===null){for(;v<w.length;v++)b=f(_,w[v],k),b!==null&&(y=s(b,y,v),O===null?V=b:O.sibling=b,O=b);return be&&Ti(_,v),V}for(b=r(_,b);v<w.length;v++)S=x(b,_,v,w[v],k),S!==null&&(t&&S.alternate!==null&&b.delete(S.key===null?v:S.key),y=s(S,y,v),O===null?V=S:O.sibling=S,O=S);return t&&b.forEach(function(P){return e(_,P)}),be&&Ti(_,v),V}function A(_,y,w,k){var V=Oo(w);if(typeof V!="function")throw Error(U(150));if(w=V.call(w),w==null)throw Error(U(151));for(var O=V=null,b=y,v=y=0,S=null,I=w.next();b!==null&&!I.done;v++,I=w.next()){b.index>v?(S=b,b=null):S=b.sibling;var P=p(_,b,I.value,k);if(P===null){b===null&&(b=S);break}t&&b&&P.alternate===null&&e(_,b),y=s(P,y,v),O===null?V=P:O.sibling=P,O=P,b=S}if(I.done)return n(_,b),be&&Ti(_,v),V;if(b===null){for(;!I.done;v++,I=w.next())I=f(_,I.value,k),I!==null&&(y=s(I,y,v),O===null?V=I:O.sibling=I,O=I);return be&&Ti(_,v),V}for(b=r(_,b);!I.done;v++,I=w.next())I=x(b,_,v,I.value,k),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?v:I.key),y=s(I,y,v),O===null?V=I:O.sibling=I,O=I);return t&&b.forEach(function(N){return e(_,N)}),be&&Ti(_,v),V}function R(_,y,w,k){if(typeof w=="object"&&w!==null&&w.type===fs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Nl:e:{for(var V=w.key,O=y;O!==null;){if(O.key===V){if(V=w.type,V===fs){if(O.tag===7){n(_,O.sibling),y=i(O,w.props.children),y.return=_,_=y;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===_r&&E0(V)===O.type){n(_,O.sibling),y=i(O,w.props),y.ref=$o(_,O,w),y.return=_,_=y;break e}n(_,O);break}else e(_,O);O=O.sibling}w.type===fs?(y=ji(w.props.children,_.mode,k,w.key),y.return=_,_=y):(k=mc(w.type,w.key,w.props,null,_.mode,k),k.ref=$o(_,y,w),k.return=_,_=k)}return o(_);case ds:e:{for(O=w.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=i(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=vd(w,_.mode,k),y.return=_,_=y}return o(_);case _r:return O=w._init,R(_,y,O(w._payload),k)}if(Ko(w))return T(_,y,w,k);if(Oo(w))return A(_,y,w,k);$l(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,w),y.return=_,_=y):(n(_,y),y=yd(w,_.mode,k),y.return=_,_=y),o(_)):n(_,y)}return R}var zs=W_(!0),q_=W_(!1),Bc=ci(null),$c=null,_s=null,Xm=null;function Jm(){Xm=_s=$c=null}function Zm(t){var e=Bc.current;Se(Bc),t._currentValue=e}function Ef(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){$c=t,Xm=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(Xm!==t)if(t={context:t,memoizedValue:e,next:null},_s===null){if($c===null)throw Error(U(308));_s=t,$c.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var Pi=null;function ep(t){Pi===null?Pi=[t]:Pi.push(t)}function G_(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ep(e)):(n.next=i.next,i.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function tp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,he&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,nr(t,n)}return i=r.interleaved,i===null?(e.next=e,ep(r)):(e.next=i.next,i.next=e),r.interleaved=e,nr(t,n)}function lc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Um(t,n)}}function S0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zc(t,e,n,r){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;o=0,d=u=c=null,a=s;do{var p=a.lane,x=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:x,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,A=a;switch(p=e,x=n,A.tag){case 1:if(T=A.payload,typeof T=="function"){f=T.call(x,f,p);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=A.payload,p=typeof T=="function"?T.call(x,f,p):T,p==null)break e;f=Pe({},f,p);break e;case 2:Tr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else x={eventTime:x,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=x,c=f):d=d.next=x,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$i|=o,t.lanes=o,t.memoizedState=f}}function I0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var nl={},Nn=ci(nl),Da=ci(nl),Va=ci(nl);function Ni(t){if(t===nl)throw Error(U(174));return t}function np(t,e){switch(we(Va,e),we(Da,t),we(Nn,nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=nf(e,t)}Se(Nn),we(Nn,e)}function Hs(){Se(Nn),Se(Da),Se(Va)}function Q_(t){Ni(Va.current);var e=Ni(Nn.current),n=nf(e,t.type);e!==n&&(we(Da,t),we(Nn,n))}function rp(t){Da.current===t&&(Se(Nn),Se(Da))}var ke=ci(0);function Hc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hd=[];function ip(){for(var t=0;t<hd.length;t++)hd[t]._workInProgressVersionPrimary=null;hd.length=0}var cc=cr.ReactCurrentDispatcher,dd=cr.ReactCurrentBatchConfig,Bi=0,Ae=null,We=null,Ye=null,Wc=!1,la=!1,Ma=0,_C=0;function lt(){throw Error(U(321))}function sp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!fn(t[n],e[n]))return!1;return!0}function op(t,e,n,r,i,s){if(Bi=s,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cc.current=t===null||t.memoizedState===null?IC:bC,t=n(r,i),la){s=0;do{if(la=!1,Ma=0,25<=s)throw Error(U(301));s+=1,Ye=We=null,e.updateQueue=null,cc.current=kC,t=n(r,i)}while(la)}if(cc.current=qc,e=We!==null&&We.next!==null,Bi=0,Ye=We=Ae=null,Wc=!1,e)throw Error(U(300));return t}function ap(){var t=Ma!==0;return Ma=0,t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?Ae.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function en(){if(We===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ye===null?Ae.memoizedState:Ye.next;if(e!==null)Ye=e,We=t;else{if(t===null)throw Error(U(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ye===null?Ae.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function ja(t,e){return typeof e=="function"?e(t):e}function fd(t){var e=en(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=We,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,u=s;do{var d=u.lane;if((Bi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=f,o=r):c=c.next=f,Ae.lanes|=d,$i|=d}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=a,fn(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ae.lanes|=s,$i|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function md(t){var e=en(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);fn(s,e.memoizedState)||(At=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Y_(){}function X_(t,e){var n=Ae,r=en(),i=e(),s=!fn(r.memoizedState,i);if(s&&(r.memoizedState=i,At=!0),r=r.queue,lp(e1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Oa(9,Z_.bind(null,n,r,i,e),void 0,null),Xe===null)throw Error(U(349));Bi&30||J_(n,e,i)}return i}function J_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Z_(t,e,n,r){e.value=n,e.getSnapshot=r,t1(e)&&n1(t)}function e1(t,e,n){return n(function(){t1(e)&&n1(t)})}function t1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!fn(t,n)}catch{return!0}}function n1(t){var e=nr(t,1);e!==null&&un(e,t,1,-1)}function b0(t){var e=En();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:t},e.queue=t,t=t.dispatch=SC.bind(null,Ae,t),[e.memoizedState,t]}function Oa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function r1(){return en().memoizedState}function uc(t,e,n,r){var i=En();Ae.flags|=t,i.memoizedState=Oa(1|e,n,void 0,r===void 0?null:r)}function Mu(t,e,n,r){var i=en();r=r===void 0?null:r;var s=void 0;if(We!==null){var o=We.memoizedState;if(s=o.destroy,r!==null&&sp(r,o.deps)){i.memoizedState=Oa(e,n,s,r);return}}Ae.flags|=t,i.memoizedState=Oa(1|e,n,s,r)}function k0(t,e){return uc(8390656,8,t,e)}function lp(t,e){return Mu(2048,8,t,e)}function i1(t,e){return Mu(4,2,t,e)}function s1(t,e){return Mu(4,4,t,e)}function o1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function a1(t,e,n){return n=n!=null?n.concat([t]):null,Mu(4,4,o1.bind(null,e,t),n)}function cp(){}function l1(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function c1(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function u1(t,e,n){return Bi&21?(fn(n,e)||(n=p_(),Ae.lanes|=n,$i|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function TC(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=dd.transition;dd.transition={};try{t(!1),e()}finally{me=n,dd.transition=r}}function h1(){return en().memoizedState}function EC(t,e,n){var r=Ur(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},d1(t))f1(e,n);else if(n=G_(t,e,n,r),n!==null){var i=Et();un(n,t,r,i),m1(n,e,r)}}function SC(t,e,n){var r=Ur(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(d1(t))f1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,fn(a,o)){var c=e.interleaved;c===null?(i.next=i,ep(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=G_(t,e,i,r),n!==null&&(i=Et(),un(n,t,r,i),m1(n,e,r))}}function d1(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function f1(t,e){la=Wc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function m1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Um(t,n)}}var qc={readContext:Zt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},IC={readContext:Zt,useCallback:function(t,e){return En().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:k0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,uc(4194308,4,o1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return uc(4194308,4,t,e)},useInsertionEffect:function(t,e){return uc(4,2,t,e)},useMemo:function(t,e){var n=En();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=En();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=EC.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=En();return t={current:t},e.memoizedState=t},useState:b0,useDebugValue:cp,useDeferredValue:function(t){return En().memoizedState=t},useTransition:function(){var t=b0(!1),e=t[0];return t=TC.bind(null,t[1]),En().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,i=En();if(be){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Xe===null)throw Error(U(349));Bi&30||J_(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,k0(e1.bind(null,r,s,t),[t]),r.flags|=2048,Oa(9,Z_.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=En(),e=Xe.identifierPrefix;if(be){var n=qn,r=Wn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_C++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bC={readContext:Zt,useCallback:l1,useContext:Zt,useEffect:lp,useImperativeHandle:a1,useInsertionEffect:i1,useLayoutEffect:s1,useMemo:c1,useReducer:fd,useRef:r1,useState:function(){return fd(ja)},useDebugValue:cp,useDeferredValue:function(t){var e=en();return u1(e,We.memoizedState,t)},useTransition:function(){var t=fd(ja)[0],e=en().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:X_,useId:h1,unstable_isNewReconciler:!1},kC={readContext:Zt,useCallback:l1,useContext:Zt,useEffect:lp,useImperativeHandle:a1,useInsertionEffect:i1,useLayoutEffect:s1,useMemo:c1,useReducer:md,useRef:r1,useState:function(){return md(ja)},useDebugValue:cp,useDeferredValue:function(t){var e=en();return We===null?e.memoizedState=t:u1(e,We.memoizedState,t)},useTransition:function(){var t=md(ja)[0],e=en().memoizedState;return[t,e]},useMutableSource:Y_,useSyncExternalStore:X_,useId:h1,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Pe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ju={isMounted:function(t){return(t=t._reactInternals)?Yi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Ur(t),s=Xn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(un(e,t,i,r),lc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),i=Ur(t),s=Xn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(un(e,t,i,r),lc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Ur(t),i=Xn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lr(t,i,r),e!==null&&(un(e,t,r,n),lc(e,t,r))}};function C0(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Aa(n,r)||!Aa(i,s):!0}function p1(t,e,n){var r=!1,i=Xr,s=e.contextType;return typeof s=="object"&&s!==null?s=Zt(s):(i=Nt(e)?Fi:gt.current,r=e.contextTypes,s=(r=r!=null)?Bs(t,i):Xr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ju,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function A0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ju.enqueueReplaceState(e,e.state,null)}function If(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},tp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Zt(s):(s=Nt(e)?Fi:gt.current,i.context=Bs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sf(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ju.enqueueReplaceState(i,i.state,null),zc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ws(t,e){try{var n="",r=e;do n+=tk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function pd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CC=typeof WeakMap=="function"?WeakMap:Map;function g1(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kc||(Kc=!0,jf=r),bf(t,e)},n}function y1(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){bf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){bf(t,e),typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function P0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$C.bind(null,t,e,n),e.then(t,t))}function N0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function R0(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var AC=cr.ReactCurrentOwner,At=!1;function Tt(t,e,n,r){e.child=t===null?q_(e,null,n,r):zs(e,t.child,n,r)}function D0(t,e,n,r,i){n=n.render;var s=e.ref;return Rs(e,i),r=op(t,e,n,r,s,i),n=ap(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(be&&n&&Km(e),e.flags|=1,Tt(t,e,r,i),e.child)}function V0(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!yp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,v1(t,e,s,r,i)):(t=mc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Aa,n(o,r)&&t.ref===e.ref)return rr(t,e,i)}return e.flags|=1,t=Br(s,r),t.ref=e.ref,t.return=e,e.child=t}function v1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Aa(s,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,rr(t,e,i)}return kf(t,e,n,r,i)}function w1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Es,Mt),Mt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(Es,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,we(Es,Mt),Mt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,we(Es,Mt),Mt|=r;return Tt(t,e,i,n),e.child}function x1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kf(t,e,n,r,i){var s=Nt(n)?Fi:gt.current;return s=Bs(e,s),Rs(e,i),n=op(t,e,n,r,s,i),r=ap(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rr(t,e,i)):(be&&r&&Km(e),e.flags|=1,Tt(t,e,n,i),e.child)}function M0(t,e,n,r,i){if(Nt(n)){var s=!0;Lc(e)}else s=!1;if(Rs(e,i),e.stateNode===null)hc(t,e),p1(e,n,r),If(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Zt(u):(u=Nt(n)?Fi:gt.current,u=Bs(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&A0(e,o,r,u),Tr=!1;var p=e.memoizedState;o.state=p,zc(e,r,o,i),c=e.memoizedState,a!==r||p!==c||Pt.current||Tr?(typeof d=="function"&&(Sf(e,n,d,r),c=e.memoizedState),(a=Tr||C0(e,n,a,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,K_(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:rn(e.type,a),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=Nt(n)?Fi:gt.current,c=Bs(e,c));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==c)&&A0(e,o,r,c),Tr=!1,p=e.memoizedState,o.state=p,zc(e,r,o,i);var T=e.memoizedState;a!==f||p!==T||Pt.current||Tr?(typeof x=="function"&&(Sf(e,n,x,r),T=e.memoizedState),(u=Tr||C0(e,n,u,r,p,T,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Cf(t,e,n,r,s,i)}function Cf(t,e,n,r,i,s){x1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&x0(e,n,!1),rr(t,e,s);r=e.stateNode,AC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=zs(e,t.child,null,s),e.child=zs(e,null,a,s)):Tt(t,e,a,s),e.memoizedState=r.state,i&&x0(e,n,!0),e.child}function _1(t){var e=t.stateNode;e.pendingContext?w0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w0(t,e.context,!1),np(t,e.containerInfo)}function j0(t,e,n,r,i){return $s(),Ym(i),e.flags|=256,Tt(t,e,n,r),e.child}var Af={dehydrated:null,treeContext:null,retryLane:0};function Pf(t){return{baseLanes:t,cachePool:null,transitions:null}}function T1(t,e,n){var r=e.pendingProps,i=ke.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),we(ke,i&1),t===null)return Tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Fu(o,r,0,null),t=ji(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Pf(n),e.memoizedState=Af,t):up(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return PC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Br(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Br(a,s):(s=ji(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Pf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Af,r}return s=t.child,t=s.sibling,r=Br(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function up(t,e){return e=Fu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zl(t,e,n,r){return r!==null&&Ym(r),zs(e,t.child,null,n),t=up(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=pd(Error(U(422))),zl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Fu({mode:"visible",children:r.children},i,0,null),s=ji(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&zs(e,t.child,null,o),e.child.memoizedState=Pf(o),e.memoizedState=Af,s);if(!(e.mode&1))return zl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=pd(s,r,void 0),zl(t,e,o,r)}if(a=(o&t.childLanes)!==0,At||a){if(r=Xe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nr(t,i),un(r,t,i,-1))}return gp(),r=pd(Error(U(421))),zl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=zC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,jt=Or(i.nextSibling),Lt=e,be=!0,on=null,t!==null&&(qt[Gt++]=Wn,qt[Gt++]=qn,qt[Gt++]=Ui,Wn=t.id,qn=t.overflow,Ui=e),e=up(e,r.children),e.flags|=4096,e)}function O0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ef(t.return,e,n)}function gd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function E1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Tt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&O0(t,n,e);else if(t.tag===19)O0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(we(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Hc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gd(e,!0,n,null,s);break;case"together":gd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$i|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NC(t,e,n){switch(e.tag){case 3:_1(e),$s();break;case 5:Q_(e);break;case 1:Nt(e.type)&&Lc(e);break;case 4:np(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;we(Bc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(we(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?T1(t,e,n):(we(ke,ke.current&1),t=rr(t,e,n),t!==null?t.sibling:null);we(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return E1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),we(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,w1(t,e,n)}return rr(t,e,n)}var S1,Nf,I1,b1;S1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nf=function(){};I1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ni(Nn.current);var s=null;switch(n){case"input":i=Jd(t,i),r=Jd(t,r),s=[];break;case"select":i=Pe({},i,{value:void 0}),r=Pe({},r,{value:void 0}),s=[];break;case"textarea":i=tf(t,i),r=tf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jc)}rf(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ta.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ta.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Te("scroll",t),s||a===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};b1=function(t,e,n,r){n!==r&&(e.flags|=4)};function zo(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RC(t,e,n){var r=e.pendingProps;switch(Qm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(e),null;case 1:return Nt(e.type)&&Oc(),ct(e),null;case 3:return r=e.stateNode,Hs(),Se(Pt),Se(gt),ip(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(Ff(on),on=null))),Nf(t,e),ct(e),null;case 5:rp(e);var i=Ni(Va.current);if(n=e.type,t!==null&&e.stateNode!=null)I1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ct(e),null}if(t=Ni(Nn.current),Bl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[In]=e,r[Ra]=s,t=(e.mode&1)!==0,n){case"dialog":Te("cancel",r),Te("close",r);break;case"iframe":case"object":case"embed":Te("load",r);break;case"video":case"audio":for(i=0;i<Yo.length;i++)Te(Yo[i],r);break;case"source":Te("error",r);break;case"img":case"image":case"link":Te("error",r),Te("load",r);break;case"details":Te("toggle",r);break;case"input":qy(r,s),Te("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Te("invalid",r);break;case"textarea":Ky(r,s),Te("invalid",r)}rf(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ul(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ul(r.textContent,a,t),i=["children",""+a]):Ta.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Te("scroll",r)}switch(n){case"input":Rl(r),Gy(r,s,!0);break;case"textarea":Rl(r),Qy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[In]=e,t[Ra]=r,S1(t,e,!1,!1),e.stateNode=t;e:{switch(o=sf(n,r),n){case"dialog":Te("cancel",t),Te("close",t),i=r;break;case"iframe":case"object":case"embed":Te("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yo.length;i++)Te(Yo[i],t);i=r;break;case"source":Te("error",t),i=r;break;case"img":case"image":case"link":Te("error",t),Te("load",t),i=r;break;case"details":Te("toggle",t),i=r;break;case"input":qy(t,r),i=Jd(t,r),Te("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pe({},r,{value:void 0}),Te("invalid",t);break;case"textarea":Ky(t,r),i=tf(t,r),Te("invalid",t);break;default:i=r}rf(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?r_(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&t_(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ea(t,c):typeof c=="number"&&Ea(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ta.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Te("scroll",t):c!=null&&Vm(t,s,c,o))}switch(n){case"input":Rl(t),Gy(t,r,!1);break;case"textarea":Rl(t),Qy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Yr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Cs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Cs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ct(e),null;case 6:if(t&&e.stateNode!=null)b1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Ni(Va.current),Ni(Nn.current),Bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[In]=e,(s=r.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:Ul(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ul(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[In]=e,e.stateNode=r}return ct(e),null;case 13:if(Se(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&jt!==null&&e.mode&1&&!(e.flags&128))H_(),$s(),e.flags|=98560,s=!1;else if(s=Bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[In]=e}else $s(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ct(e),s=!1}else on!==null&&(Ff(on),on=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?qe===0&&(qe=3):gp())),e.updateQueue!==null&&(e.flags|=4),ct(e),null);case 4:return Hs(),Nf(t,e),t===null&&Pa(e.stateNode.containerInfo),ct(e),null;case 10:return Zm(e.type._context),ct(e),null;case 17:return Nt(e.type)&&Oc(),ct(e),null;case 19:if(Se(ke),s=e.memoizedState,s===null)return ct(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)zo(s,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Hc(t),o!==null){for(e.flags|=128,zo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(ke,ke.current&1|2),e.child}t=t.sibling}s.tail!==null&&Oe()>qs&&(e.flags|=128,r=!0,zo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Hc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!be)return ct(e),null}else 2*Oe()-s.renderingStartTime>qs&&n!==1073741824&&(e.flags|=128,r=!0,zo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Oe(),e.sibling=null,n=ke.current,we(ke,r?n&1|2:n&1),e):(ct(e),null);case 22:case 23:return pp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(ct(e),e.subtreeFlags&6&&(e.flags|=8192)):ct(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function DC(t,e){switch(Qm(e),e.tag){case 1:return Nt(e.type)&&Oc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hs(),Se(Pt),Se(gt),ip(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rp(e),null;case 13:if(Se(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));$s()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(ke),null;case 4:return Hs(),null;case 10:return Zm(e.type._context),null;case 22:case 23:return pp(),null;case 24:return null;default:return null}}var Hl=!1,mt=!1,VC=typeof WeakSet=="function"?WeakSet:Set,G=null;function Ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Rf(t,e,n){try{n()}catch(r){De(t,e,r)}}var L0=!1;function MC(t,e){if(pf=Dc,t=N_(),Gm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,d=0,f=t,p=null;t:for(;;){for(var x;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(x=f.firstChild)!==null;)p=f,f=x;for(;;){if(f===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++d===r&&(c=o),(x=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=x}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gf={focusedElem:t,selectionRange:n},Dc=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var A=T.memoizedProps,R=T.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?A:rn(e.type,A),R);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(k){De(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return T=L0,L0=!1,T}function ca(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Rf(e,n,s)}i=i.next}while(i!==r)}}function Ou(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Df(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function k1(t){var e=t.alternate;e!==null&&(t.alternate=null,k1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[In],delete e[Ra],delete e[wf],delete e[yC],delete e[vC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function C1(t){return t.tag===5||t.tag===3||t.tag===4}function F0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||C1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jc));else if(r!==4&&(t=t.child,t!==null))for(Vf(t,e,n),t=t.sibling;t!==null;)Vf(t,e,n),t=t.sibling}function Mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Mf(t,e,n),t=t.sibling;t!==null;)Mf(t,e,n),t=t.sibling}var et=null,sn=!1;function yr(t,e,n){for(n=n.child;n!==null;)A1(t,e,n),n=n.sibling}function A1(t,e,n){if(Pn&&typeof Pn.onCommitFiberUnmount=="function")try{Pn.onCommitFiberUnmount(Au,n)}catch{}switch(n.tag){case 5:mt||Ts(n,e);case 6:var r=et,i=sn;et=null,yr(t,e,n),et=r,sn=i,et!==null&&(sn?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(sn?(t=et,n=n.stateNode,t.nodeType===8?cd(t.parentNode,n):t.nodeType===1&&cd(t,n),ka(t)):cd(et,n.stateNode));break;case 4:r=et,i=sn,et=n.stateNode.containerInfo,sn=!0,yr(t,e,n),et=r,sn=i;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Rf(n,e,o),i=i.next}while(i!==r)}yr(t,e,n);break;case 1:if(!mt&&(Ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,e,a)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,yr(t,e,n),mt=r):yr(t,e,n);break;default:yr(t,e,n)}}function U0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VC),e.forEach(function(r){var i=HC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:et=a.stateNode,sn=!1;break e;case 3:et=a.stateNode.containerInfo,sn=!0;break e;case 4:et=a.stateNode.containerInfo,sn=!0;break e}a=a.return}if(et===null)throw Error(U(160));A1(s,o,i),et=null,sn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){De(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P1(e,t),e=e.sibling}function P1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),Tn(t),r&4){try{ca(3,t,t.return),Ou(3,t)}catch(A){De(t,t.return,A)}try{ca(5,t,t.return)}catch(A){De(t,t.return,A)}}break;case 1:nn(e,t),Tn(t),r&512&&n!==null&&Ts(n,n.return);break;case 5:if(nn(e,t),Tn(t),r&512&&n!==null&&Ts(n,n.return),t.flags&32){var i=t.stateNode;try{Ea(i,"")}catch(A){De(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Jx(i,s),sf(a,o);var u=sf(a,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?r_(i,f):d==="dangerouslySetInnerHTML"?t_(i,f):d==="children"?Ea(i,f):Vm(i,d,f,u)}switch(a){case"input":Zd(i,s);break;case"textarea":Zx(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var x=s.value;x!=null?Cs(i,!!s.multiple,x,!1):p!==!!s.multiple&&(s.defaultValue!=null?Cs(i,!!s.multiple,s.defaultValue,!0):Cs(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ra]=s}catch(A){De(t,t.return,A)}}break;case 6:if(nn(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){De(t,t.return,A)}}break;case 3:if(nn(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ka(e.containerInfo)}catch(A){De(t,t.return,A)}break;case 4:nn(e,t),Tn(t);break;case 13:nn(e,t),Tn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fp=Oe())),r&4&&U0(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(u=mt)||d,nn(e,t),mt=u):nn(e,t),Tn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(G=t,d=t.child;d!==null;){for(f=G=d;G!==null;){switch(p=G,x=p.child,p.tag){case 0:case 11:case 14:case 15:ca(4,p,p.return);break;case 1:Ts(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(A){De(r,n,A)}}break;case 5:Ts(p,p.return);break;case 22:if(p.memoizedState!==null){$0(f);continue}}x!==null?(x.return=p,G=x):$0(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=n_("display",o))}catch(A){De(t,t.return,A)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(A){De(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:nn(e,t),Tn(t),r&4&&U0(t);break;case 21:break;default:nn(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(C1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ea(i,""),r.flags&=-33);var s=F0(t);Mf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=F0(t);Vf(t,a,o);break;default:throw Error(U(161))}}catch(c){De(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jC(t,e,n){G=t,N1(t)}function N1(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var i=G,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Hl;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||mt;a=Hl;var u=mt;if(Hl=o,(mt=c)&&!u)for(G=i;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?z0(i):c!==null?(c.return=o,G=c):z0(i);for(;s!==null;)G=s,N1(s),s=s.sibling;G=i,Hl=a,mt=u}B0(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,G=s):B0(t)}}function B0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||Ou(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&I0(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}I0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ka(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}mt||e.flags&512&&Df(e)}catch(p){De(e,e.return,p)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function $0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function z0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ou(4,e)}catch(c){De(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){De(e,i,c)}}var s=e.return;try{Df(e)}catch(c){De(e,s,c)}break;case 5:var o=e.return;try{Df(e)}catch(c){De(e,o,c)}}}catch(c){De(e,e.return,c)}if(e===t){G=null;break}var a=e.sibling;if(a!==null){a.return=e.return,G=a;break}G=e.return}}var OC=Math.ceil,Gc=cr.ReactCurrentDispatcher,hp=cr.ReactCurrentOwner,Jt=cr.ReactCurrentBatchConfig,he=0,Xe=null,Be=null,rt=0,Mt=0,Es=ci(0),qe=0,La=null,$i=0,Lu=0,dp=0,ua=null,kt=null,fp=0,qs=1/0,$n=null,Kc=!1,jf=null,Fr=null,Wl=!1,Pr=null,Qc=0,ha=0,Of=null,dc=-1,fc=0;function Et(){return he&6?Oe():dc!==-1?dc:dc=Oe()}function Ur(t){return t.mode&1?he&2&&rt!==0?rt&-rt:xC.transition!==null?(fc===0&&(fc=p_()),fc):(t=me,t!==0||(t=window.event,t=t===void 0?16:T_(t.type)),t):1}function un(t,e,n,r){if(50<ha)throw ha=0,Of=null,Error(U(185));Za(t,n,r),(!(he&2)||t!==Xe)&&(t===Xe&&(!(he&2)&&(Lu|=n),qe===4&&Ir(t,rt)),Rt(t,r),n===1&&he===0&&!(e.mode&1)&&(qs=Oe()+500,Vu&&ui()))}function Rt(t,e){var n=t.callbackNode;xk(t,e);var r=Rc(t,t===Xe?rt:0);if(r===0)n!==null&&Jy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jy(n),e===1)t.tag===0?wC(H0.bind(null,t)):B_(H0.bind(null,t)),pC(function(){!(he&6)&&ui()}),n=null;else{switch(g_(r)){case 1:n=Fm;break;case 4:n=f_;break;case 16:n=Nc;break;case 536870912:n=m_;break;default:n=Nc}n=F1(n,R1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function R1(t,e){if(dc=-1,fc=0,he&6)throw Error(U(327));var n=t.callbackNode;if(Ds()&&t.callbackNode!==n)return null;var r=Rc(t,t===Xe?rt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yc(t,r);else{e=r;var i=he;he|=2;var s=V1();(Xe!==t||rt!==e)&&($n=null,qs=Oe()+500,Mi(t,e));do try{UC();break}catch(a){D1(t,a)}while(1);Jm(),Gc.current=s,he=i,Be!==null?e=0:(Xe=null,rt=0,e=qe)}if(e!==0){if(e===2&&(i=uf(t),i!==0&&(r=i,e=Lf(t,i))),e===1)throw n=La,Mi(t,0),Ir(t,r),Rt(t,Oe()),n;if(e===6)Ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!LC(i)&&(e=Yc(t,r),e===2&&(s=uf(t),s!==0&&(r=s,e=Lf(t,s))),e===1))throw n=La,Mi(t,0),Ir(t,r),Rt(t,Oe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Ei(t,kt,$n);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=fp+500-Oe(),10<e)){if(Rc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vf(Ei.bind(null,t,kt,$n),e);break}Ei(t,kt,$n);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-cn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OC(r/1960))-r,10<r){t.timeoutHandle=vf(Ei.bind(null,t,kt,$n),r);break}Ei(t,kt,$n);break;case 5:Ei(t,kt,$n);break;default:throw Error(U(329))}}}return Rt(t,Oe()),t.callbackNode===n?R1.bind(null,t):null}function Lf(t,e){var n=ua;return t.current.memoizedState.isDehydrated&&(Mi(t,e).flags|=256),t=Yc(t,e),t!==2&&(e=kt,kt=n,e!==null&&Ff(e)),t}function Ff(t){kt===null?kt=t:kt.push.apply(kt,t)}function LC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!fn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~dp,e&=~Lu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function H0(t){if(he&6)throw Error(U(327));Ds();var e=Rc(t,0);if(!(e&1))return Rt(t,Oe()),null;var n=Yc(t,e);if(t.tag!==0&&n===2){var r=uf(t);r!==0&&(e=r,n=Lf(t,r))}if(n===1)throw n=La,Mi(t,0),Ir(t,e),Rt(t,Oe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ei(t,kt,$n),Rt(t,Oe()),null}function mp(t,e){var n=he;he|=1;try{return t(e)}finally{he=n,he===0&&(qs=Oe()+500,Vu&&ui())}}function zi(t){Pr!==null&&Pr.tag===0&&!(he&6)&&Ds();var e=he;he|=1;var n=Jt.transition,r=me;try{if(Jt.transition=null,me=1,t)return t()}finally{me=r,Jt.transition=n,he=e,!(he&6)&&ui()}}function pp(){Mt=Es.current,Se(Es)}function Mi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mC(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Qm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Oc();break;case 3:Hs(),Se(Pt),Se(gt),ip();break;case 5:rp(r);break;case 4:Hs();break;case 13:Se(ke);break;case 19:Se(ke);break;case 10:Zm(r.type._context);break;case 22:case 23:pp()}n=n.return}if(Xe=t,Be=t=Br(t.current,null),rt=Mt=e,qe=0,La=null,dp=Lu=$i=0,kt=ua=null,Pi!==null){for(e=0;e<Pi.length;e++)if(n=Pi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Pi=null}return t}function D1(t,e){do{var n=Be;try{if(Jm(),cc.current=qc,Wc){for(var r=Ae.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wc=!1}if(Bi=0,Ye=We=Ae=null,la=!1,Ma=0,hp.current=null,n===null||n.return===null){qe=1,La=e,Be=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=rt,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=N0(o);if(x!==null){x.flags&=-257,R0(x,o,a,s,e),x.mode&1&&P0(s,u,e),e=x,c=u;var T=e.updateQueue;if(T===null){var A=new Set;A.add(c),e.updateQueue=A}else T.add(c);break e}else{if(!(e&1)){P0(s,u,e),gp();break e}c=Error(U(426))}}else if(be&&a.mode&1){var R=N0(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),R0(R,o,a,s,e),Ym(Ws(c,a));break e}}s=c=Ws(c,a),qe!==4&&(qe=2),ua===null?ua=[s]:ua.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=g1(s,c,e);S0(s,_);break e;case 1:a=c;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Fr===null||!Fr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=y1(s,a,e);S0(s,k);break e}}s=s.return}while(s!==null)}j1(n)}catch(V){e=V,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(1)}function V1(){var t=Gc.current;return Gc.current=qc,t===null?qc:t}function gp(){(qe===0||qe===3||qe===2)&&(qe=4),Xe===null||!($i&268435455)&&!(Lu&268435455)||Ir(Xe,rt)}function Yc(t,e){var n=he;he|=2;var r=V1();(Xe!==t||rt!==e)&&($n=null,Mi(t,e));do try{FC();break}catch(i){D1(t,i)}while(1);if(Jm(),he=n,Gc.current=r,Be!==null)throw Error(U(261));return Xe=null,rt=0,qe}function FC(){for(;Be!==null;)M1(Be)}function UC(){for(;Be!==null&&!hk();)M1(Be)}function M1(t){var e=L1(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?j1(t):Be=e,hp.current=null}function j1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DC(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Be=null;return}}else if(n=RC(n,e,Mt),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);qe===0&&(qe=5)}function Ei(t,e,n){var r=me,i=Jt.transition;try{Jt.transition=null,me=1,BC(t,e,n,r)}finally{Jt.transition=i,me=r}return null}function BC(t,e,n,r){do Ds();while(Pr!==null);if(he&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(_k(t,s),t===Xe&&(Be=Xe=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wl||(Wl=!0,F1(Nc,function(){return Ds(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Jt.transition,Jt.transition=null;var o=me;me=1;var a=he;he|=4,hp.current=null,MC(t,n),P1(n,t),aC(gf),Dc=!!pf,gf=pf=null,t.current=n,jC(n),dk(),he=a,me=o,Jt.transition=s}else t.current=n;if(Wl&&(Wl=!1,Pr=t,Qc=i),s=t.pendingLanes,s===0&&(Fr=null),pk(n.stateNode),Rt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kc)throw Kc=!1,t=jf,jf=null,t;return Qc&1&&t.tag!==0&&Ds(),s=t.pendingLanes,s&1?t===Of?ha++:(ha=0,Of=t):ha=0,ui(),null}function Ds(){if(Pr!==null){var t=g_(Qc),e=Jt.transition,n=me;try{if(Jt.transition=null,me=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,Qc=0,he&6)throw Error(U(331));var i=he;for(he|=4,G=t.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(G=u;G!==null;){var d=G;switch(d.tag){case 0:case 11:case 15:ca(8,d,s)}var f=d.child;if(f!==null)f.return=d,G=f;else for(;G!==null;){d=G;var p=d.sibling,x=d.return;if(k1(d),d===u){G=null;break}if(p!==null){p.return=x,G=p;break}G=x}}}var T=s.alternate;if(T!==null){var A=T.child;if(A!==null){T.child=null;do{var R=A.sibling;A.sibling=null,A=R}while(A!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else e:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ca(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,G=_;break e}G=s.return}}var y=t.current;for(G=y;G!==null;){o=G;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,G=w;else e:for(o=y;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ou(9,a)}}catch(V){De(a,a.return,V)}if(a===o){G=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,G=k;break e}G=a.return}}if(he=i,ui(),Pn&&typeof Pn.onPostCommitFiberRoot=="function")try{Pn.onPostCommitFiberRoot(Au,t)}catch{}r=!0}return r}finally{me=n,Jt.transition=e}}return!1}function W0(t,e,n){e=Ws(n,e),e=g1(t,e,1),t=Lr(t,e,1),e=Et(),t!==null&&(Za(t,1,e),Rt(t,e))}function De(t,e,n){if(t.tag===3)W0(t,t,n);else for(;e!==null;){if(e.tag===3){W0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){t=Ws(n,t),t=y1(e,t,1),e=Lr(e,t,1),t=Et(),e!==null&&(Za(e,1,t),Rt(e,t));break}}e=e.return}}function $C(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(rt&n)===n&&(qe===4||qe===3&&(rt&130023424)===rt&&500>Oe()-fp?Mi(t,0):dp|=n),Rt(t,e)}function O1(t,e){e===0&&(t.mode&1?(e=Ml,Ml<<=1,!(Ml&130023424)&&(Ml=4194304)):e=1);var n=Et();t=nr(t,e),t!==null&&(Za(t,e,n),Rt(t,n))}function zC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),O1(t,n)}function HC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),O1(t,n)}var L1;L1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Pt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,NC(t,e,n);At=!!(t.flags&131072)}else At=!1,be&&e.flags&1048576&&$_(e,Uc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hc(t,e),t=e.pendingProps;var i=Bs(e,gt.current);Rs(e,n),i=op(null,e,r,t,i,n);var s=ap();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nt(r)?(s=!0,Lc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tp(e),i.updater=ju,e.stateNode=i,i._reactInternals=e,If(e,r,t,n),e=Cf(null,e,r,!0,s,n)):(e.tag=0,be&&s&&Km(e),Tt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qC(r),t=rn(r,t),i){case 0:e=kf(null,e,r,t,n);break e;case 1:e=M0(null,e,r,t,n);break e;case 11:e=D0(null,e,r,t,n);break e;case 14:e=V0(null,e,r,rn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),kf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),M0(t,e,r,i,n);case 3:e:{if(_1(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,K_(t,e),zc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ws(Error(U(423)),e),e=j0(t,e,r,n,i);break e}else if(r!==i){i=Ws(Error(U(424)),e),e=j0(t,e,r,n,i);break e}else for(jt=Or(e.stateNode.containerInfo.firstChild),Lt=e,be=!0,on=null,n=q_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($s(),r===i){e=rr(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return Q_(e),t===null&&Tf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,yf(r,i)?o=null:s!==null&&yf(r,s)&&(e.flags|=32),x1(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Tf(e),null;case 13:return T1(t,e,n);case 4:return np(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zs(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),D0(t,e,r,i,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,we(Bc,r._currentValue),r._currentValue=o,s!==null)if(fn(s.value,o)){if(s.children===i.children&&!Pt.current){e=rr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Xn(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Ef(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ef(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Tt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Rs(e,n),i=Zt(i),r=r(i),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,i=rn(r,e.pendingProps),i=rn(r.type,i),V0(t,e,r,i,n);case 15:return v1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:rn(r,i),hc(t,e),e.tag=1,Nt(r)?(t=!0,Lc(e)):t=!1,Rs(e,n),p1(e,r,i),If(e,r,i,n),Cf(null,e,r,!0,t,n);case 19:return E1(t,e,n);case 22:return w1(t,e,n)}throw Error(U(156,e.tag))};function F1(t,e){return d_(t,e)}function WC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(t,e,n,r){return new WC(t,e,n,r)}function yp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qC(t){if(typeof t=="function")return yp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jm)return 11;if(t===Om)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=Qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mc(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")yp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fs:return ji(n.children,i,s,e);case Mm:o=8,i|=8;break;case Kd:return t=Qt(12,n,e,i|2),t.elementType=Kd,t.lanes=s,t;case Qd:return t=Qt(13,n,e,i),t.elementType=Qd,t.lanes=s,t;case Yd:return t=Qt(19,n,e,i),t.elementType=Yd,t.lanes=s,t;case Qx:return Fu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gx:o=10;break e;case Kx:o=9;break e;case jm:o=11;break e;case Om:o=14;break e;case _r:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Qt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ji(t,e,n,r){return t=Qt(7,t,r,e),t.lanes=n,t}function Fu(t,e,n,r){return t=Qt(22,t,r,e),t.elementType=Qx,t.lanes=n,t.stateNode={isHidden:!1},t}function yd(t,e,n){return t=Qt(6,t,null,e),t.lanes=n,t}function vd(t,e,n){return e=Qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jh(0),this.expirationTimes=Jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function vp(t,e,n,r,i,s,o,a,c){return t=new GC(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Qt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tp(s),t}function KC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ds,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function U1(t){if(!t)return Xr;t=t._reactInternals;e:{if(Yi(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Nt(n))return U_(t,n,e)}return e}function B1(t,e,n,r,i,s,o,a,c){return t=vp(n,r,!0,t,i,s,o,a,c),t.context=U1(null),n=t.current,r=Et(),i=Ur(n),s=Xn(r,i),s.callback=e??null,Lr(n,s,i),t.current.lanes=i,Za(t,i,r),Rt(t,r),t}function Uu(t,e,n,r){var i=e.current,s=Et(),o=Ur(i);return n=U1(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(i,e,o),t!==null&&(un(t,i,o,s),lc(t,i,o)),o}function Xc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function q0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function wp(t,e){q0(t,e),(t=t.alternate)&&q0(t,e)}function QC(){return null}var $1=typeof reportError=="function"?reportError:function(t){console.error(t)};function xp(t){this._internalRoot=t}Bu.prototype.render=xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Uu(t,e,null,null)};Bu.prototype.unmount=xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zi(function(){Uu(null,t,null,null)}),e[tr]=null}};function Bu(t){this._internalRoot=t}Bu.prototype.unstable_scheduleHydration=function(t){if(t){var e=w_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&__(t)}};function _p(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G0(){}function YC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Xc(o);s.call(u)}}var o=B1(e,r,t,0,null,!1,!1,"",G0);return t._reactRootContainer=o,t[tr]=o.current,Pa(t.nodeType===8?t.parentNode:t),zi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Xc(c);a.call(u)}}var c=vp(t,0,!1,null,null,!1,!1,"",G0);return t._reactRootContainer=c,t[tr]=c.current,Pa(t.nodeType===8?t.parentNode:t),zi(function(){Uu(e,c,n,r)}),c}function zu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Xc(o);a.call(c)}}Uu(e,o,t,i)}else o=YC(n,e,t,i,r);return Xc(o)}y_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qo(e.pendingLanes);n!==0&&(Um(e,n|1),Rt(e,Oe()),!(he&6)&&(qs=Oe()+500,ui()))}break;case 13:zi(function(){var r=nr(t,1);if(r!==null){var i=Et();un(r,t,1,i)}}),wp(t,1)}};Bm=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=Et();un(e,t,134217728,n)}wp(t,134217728)}};v_=function(t){if(t.tag===13){var e=Ur(t),n=nr(t,e);if(n!==null){var r=Et();un(n,t,e,r)}wp(t,e)}};w_=function(){return me};x_=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};af=function(t,e,n){switch(e){case"input":if(Zd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Du(r);if(!i)throw Error(U(90));Xx(r),Zd(r,i)}}}break;case"textarea":Zx(t,n);break;case"select":e=n.value,e!=null&&Cs(t,!!n.multiple,e,!1)}};o_=mp;a_=zi;var XC={usingClientEntryPoint:!1,Events:[tl,ys,Du,i_,s_,mp]},Ho={findFiberByHostInstance:Ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JC={bundleType:Ho.bundleType,version:Ho.version,rendererPackageName:Ho.rendererPackageName,rendererConfig:Ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ho.findFiberByHostInstance||QC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{Au=ql.inject(JC),Pn=ql}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XC;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_p(e))throw Error(U(200));return KC(t,e,null,n)};$t.createRoot=function(t,e){if(!_p(t))throw Error(U(299));var n=!1,r="",i=$1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=vp(t,1,!1,null,null,n,!1,r,i),t[tr]=e.current,Pa(t.nodeType===8?t.parentNode:t),new xp(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=u_(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return zi(t)};$t.hydrate=function(t,e,n){if(!$u(e))throw Error(U(200));return zu(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!_p(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=$1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=B1(e,null,t,1,n??null,i,!1,s,o),t[tr]=e.current,Pa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Bu(e)};$t.render=function(t,e,n){if(!$u(e))throw Error(U(200));return zu(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!$u(t))throw Error(U(40));return t._reactRootContainer?(zi(function(){zu(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};$t.unstable_batchedUpdates=mp;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$u(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return zu(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function z1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(z1)}catch(t){console.error(t)}}z1(),zx.exports=$t;var ZC=zx.exports,K0=ZC;qd.createRoot=K0.createRoot,qd.hydrateRoot=K0.hydrateRoot;const H1=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Hu=j.createContext({}),Wu=j.createContext(null),qu=typeof document<"u",Tp=qu?j.useLayoutEffect:j.useEffect,W1=j.createContext({strict:!1}),Ep=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eA="framerAppearId",q1="data-"+Ep(eA);function tA(t,e,n,r){const{visualElement:i}=j.useContext(Hu),s=j.useContext(W1),o=j.useContext(Wu),a=j.useContext(H1).reducedMotion,c=j.useRef();r=r||s.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;j.useInsertionEffect(()=>{u&&u.update(n,o)});const d=j.useRef(!!(n[q1]&&!window.HandoffComplete));return Tp(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),j.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Ss(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nA(t,e,n){return j.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ss(n)&&(n.current=r))},[e])}function Fa(t){return typeof t=="string"||Array.isArray(t)}function Gu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Sp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ip=["initial",...Sp];function Ku(t){return Gu(t.animate)||Ip.some(e=>Fa(t[e]))}function G1(t){return!!(Ku(t)||t.variants)}function rA(t,e){if(Ku(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Fa(n)?n:void 0,animate:Fa(r)?r:void 0}}return t.inherit!==!1?e:{}}function iA(t){const{initial:e,animate:n}=rA(t,j.useContext(Hu));return j.useMemo(()=>({initial:e,animate:n}),[Q0(e),Q0(n)])}function Q0(t){return Array.isArray(t)?t.join(" "):t}const Y0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ua={};for(const t in Y0)Ua[t]={isEnabled:e=>Y0[t].some(n=>!!e[n])};function sA(t){for(const e in t)Ua[e]={...Ua[e],...t[e]}}const bp=j.createContext({}),K1=j.createContext({}),oA=Symbol.for("motionComponentSymbol");function aA({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&sA(t);function s(a,c){let u;const d={...j.useContext(H1),...a,layoutId:lA(a)},{isStatic:f}=d,p=iA(a),x=r(a,f);if(!f&&qu){p.visualElement=tA(i,x,d,e);const T=j.useContext(K1),A=j.useContext(W1).strict;p.visualElement&&(u=p.visualElement.loadFeatures(d,A,t,T))}return j.createElement(Hu.Provider,{value:p},u&&p.visualElement?j.createElement(u,{visualElement:p.visualElement,...d}):null,n(i,a,nA(x,p.visualElement,c),x,f,p.visualElement))}const o=j.forwardRef(s);return o[oA]=i,o}function lA({layoutId:t}){const e=j.useContext(bp).id;return e&&t!==void 0?e+"-"+t:t}function cA(t){function e(r,i={}){return aA(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const uA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kp(t){return typeof t!="string"||t.includes("-")?!1:!!(uA.indexOf(t)>-1||/[A-Z]/.test(t))}const Jc={};function hA(t){Object.assign(Jc,t)}const rl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xi=new Set(rl);function Q1(t,{layout:e,layoutId:n}){return Xi.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Jc[t]||t==="opacity")}const Dt=t=>!!(t&&t.getVelocity),dA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fA=rl.length;function mA(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let s="";for(let o=0;o<fA;o++){const a=rl[o];if(t[a]!==void 0){const c=dA[a]||a;s+=`${c}(${t[a]}) `}}return e&&!t.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(t,r?"":s):n&&r&&(s="none"),s}const Y1=t=>e=>typeof e=="string"&&e.startsWith(t),X1=Y1("--"),Uf=Y1("var(--"),pA=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,gA=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Jr=(t,e,n)=>Math.min(Math.max(n,t),e),Ji={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},da={...Ji,transform:t=>Jr(0,1,t)},Gl={...Ji,default:1},fa=t=>Math.round(t*1e5)/1e5,Qu=/(-)?([\d]*\.?[\d])+/g,J1=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,yA=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function il(t){return typeof t=="string"}const sl=t=>({test:e=>il(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xr=sl("deg"),Rn=sl("%"),J=sl("px"),vA=sl("vh"),wA=sl("vw"),X0={...Rn,parse:t=>Rn.parse(t)/100,transform:t=>Rn.transform(t*100)},J0={...Ji,transform:Math.round},Z1={borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,size:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,rotate:xr,rotateX:xr,rotateY:xr,rotateZ:xr,scale:Gl,scaleX:Gl,scaleY:Gl,scaleZ:Gl,skew:xr,skewX:xr,skewY:xr,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,transformPerspective:J,opacity:da,originX:X0,originY:X0,originZ:J,zIndex:J0,fillOpacity:da,strokeOpacity:da,numOctaves:J0};function Cp(t,e,n,r){const{style:i,vars:s,transform:o,transformOrigin:a}=t;let c=!1,u=!1,d=!0;for(const f in e){const p=e[f];if(X1(f)){s[f]=p;continue}const x=Z1[f],T=gA(p,x);if(Xi.has(f)){if(c=!0,o[f]=T,!d)continue;p!==(x.default||0)&&(d=!1)}else f.startsWith("origin")?(u=!0,a[f]=T):i[f]=T}if(e.transform||(c||r?i.transform=mA(t.transform,n,d,r):i.transform&&(i.transform="none")),u){const{originX:f="50%",originY:p="50%",originZ:x=0}=a;i.transformOrigin=`${f} ${p} ${x}`}}const Ap=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eT(t,e,n){for(const r in e)!Dt(e[r])&&!Q1(r,n)&&(t[r]=e[r])}function xA({transformTemplate:t},e,n){return j.useMemo(()=>{const r=Ap();return Cp(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function _A(t,e,n){const r=t.style||{},i={};return eT(i,r,t),Object.assign(i,xA(t,e,n)),t.transformValues?t.transformValues(i):i}function TA(t,e,n){const r={},i=_A(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const EA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||EA.has(t)}let tT=t=>!Zc(t);function SA(t){t&&(tT=e=>e.startsWith("on")?!Zc(e):t(e))}try{SA(require("@emotion/is-prop-valid").default)}catch{}function IA(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(tT(i)||n===!0&&Zc(i)||!e&&!Zc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Z0(t,e,n){return typeof t=="string"?t:J.transform(e+n*t)}function bA(t,e,n){const r=Z0(e,t.x,t.width),i=Z0(n,t.y,t.height);return`${r} ${i}`}const kA={offset:"stroke-dashoffset",array:"stroke-dasharray"},CA={offset:"strokeDashoffset",array:"strokeDasharray"};function AA(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?kA:CA;t[s.offset]=J.transform(-r);const o=J.transform(e),a=J.transform(n);t[s.array]=`${o} ${a}`}function Pp(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},d,f,p){if(Cp(t,u,d,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:T,dimensions:A}=t;x.transform&&(A&&(T.transform=x.transform),delete x.transform),A&&(i!==void 0||s!==void 0||T.transform)&&(T.transformOrigin=bA(A,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),r!==void 0&&(x.scale=r),o!==void 0&&AA(x,o,a,c,!1)}const nT=()=>({...Ap(),attrs:{}}),Np=t=>typeof t=="string"&&t.toLowerCase()==="svg";function PA(t,e,n,r){const i=j.useMemo(()=>{const s=nT();return Pp(s,e,{enableHardwareAcceleration:!1},Np(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};eT(s,t.style,t),i.style={...s,...i.style}}return i}function NA(t=!1){return(n,r,i,{latestValues:s},o)=>{const c=(kp(n)?PA:TA)(r,s,o,n),d={...IA(r,typeof n=="string",t),...c,ref:i},{children:f}=r,p=j.useMemo(()=>Dt(f)?f.get():f,[f]);return j.createElement(n,{...d,children:p})}}function rT(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const iT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sT(t,e,n,r){rT(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(iT.has(i)?i:Ep(i),e.attrs[i])}function Rp(t,e){const{style:n}=t,r={};for(const i in n)(Dt(n[i])||e.style&&Dt(e.style[i])||Q1(i,t))&&(r[i]=n[i]);return r}function oT(t,e){const n=Rp(t,e);for(const r in t)if(Dt(t[r])||Dt(e[r])){const i=rl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function Dp(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function aT(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const eu=t=>Array.isArray(t),RA=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),DA=t=>eu(t)?t[t.length-1]||0:t;function pc(t){const e=Dt(t)?t.get():t;return RA(e)?e.toValue():e}function VA({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,s){const o={latestValues:MA(r,i,s,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const lT=t=>(e,n)=>{const r=j.useContext(Hu),i=j.useContext(Wu),s=()=>VA(t,e,r,i);return n?s():aT(s)};function MA(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=pc(s[p]);let{initial:o,animate:a}=t;const c=Ku(t),u=G1(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const f=d?a:o;return f&&typeof f!="boolean"&&!Gu(f)&&(Array.isArray(f)?f:[f]).forEach(x=>{const T=Dp(t,x);if(!T)return;const{transitionEnd:A,transition:R,..._}=T;for(const y in _){let w=_[y];if(Array.isArray(w)){const k=d?w.length-1:0;w=w[k]}w!==null&&(i[y]=w)}for(const y in A)i[y]=A[y]}),i}const Ve=t=>t;class ev{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function jA(t){let e=new ev,n=new ev,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(c,u=!1,d=!1)=>{const f=d&&i,p=f?e:n;return u&&o.add(c),p.add(c)&&f&&i&&(r=e.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(i){s=!0;return}if(i=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const d=e.order[u];d(c),o.has(d)&&(a.schedule(d),t())}i=!1,s&&(s=!1,a.process(c))}};return a}const Kl=["prepare","read","update","preRender","render","postRender"],OA=40;function LA(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Kl.reduce((f,p)=>(f[p]=jA(()=>n=!0),f),{}),o=f=>s[f].process(i),a=()=>{const f=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(f-i.timestamp,OA),1),i.timestamp=f,i.isProcessing=!0,Kl.forEach(o),i.isProcessing=!1,n&&e&&(r=!1,t(a))},c=()=>{n=!0,r=!0,i.isProcessing||t(a)};return{schedule:Kl.reduce((f,p)=>{const x=s[p];return f[p]=(T,A=!1,R=!1)=>(n||c(),x.schedule(T,A,R)),f},{}),cancel:f=>Kl.forEach(p=>s[p].cancel(f)),state:i,steps:s}}const{schedule:xe,cancel:ir,state:ht,steps:wd}=LA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ve,!0),FA={useVisualState:lT({scrapeMotionValuesFromProps:oT,createRenderState:nT,onMount:(t,e,{renderState:n,latestValues:r})=>{xe.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),xe.render(()=>{Pp(n,r,{enableHardwareAcceleration:!1},Np(e.tagName),t.transformTemplate),sT(e,n)})}})},UA={useVisualState:lT({scrapeMotionValuesFromProps:Rp,createRenderState:Ap})};function BA(t,{forwardMotionProps:e=!1},n,r){return{...kp(t)?FA:UA,preloadedFeatures:n,useRender:NA(e),createVisualElement:r,Component:t}}function Gn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const cT=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Yu(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const $A=t=>e=>cT(e)&&t(e,Yu(e));function Jn(t,e,n,r){return Gn(t,e,$A(n),r)}const zA=(t,e)=>n=>e(t(n)),$r=(...t)=>t.reduce(zA);function uT(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const tv=uT("dragHorizontal"),nv=uT("dragVertical");function hT(t){let e=!1;if(t==="y")e=nv();else if(t==="x")e=tv();else{const n=tv(),r=nv();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function dT(){const t=hT(!0);return t?(t(),!1):!0}class hi{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rv(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||dT())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&xe.update(()=>a[r](s,o))};return Jn(t.current,n,i,{passive:!t.getProps()[r]})}class HA extends hi{mount(){this.unmount=$r(rv(this.node,!0),rv(this.node,!1))}unmount(){}}class WA extends hi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$r(Gn(this.node.current,"focus",()=>this.onFocus()),Gn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const fT=(t,e)=>e?t===e?!0:fT(t,e.parentElement):!1;function xd(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Yu(n))}class qA extends hi{constructor(){super(...arguments),this.removeStartListeners=Ve,this.removeEndListeners=Ve,this.removeAccessibleListeners=Ve,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Jn(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps();xe.update(()=>{!f&&!fT(this.node.current,a.target)?d&&d(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Jn(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=$r(s,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||xd("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&xe.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Gn(this.node.current,"keyup",o),xd("down",(a,c)=>{this.startPress(a,c)})},n=Gn(this.node.current,"keydown",e),r=()=>{this.isPressing&&xd("cancel",(s,o)=>this.cancelPress(s,o))},i=Gn(this.node.current,"blur",r);this.removeAccessibleListeners=$r(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&xe.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!dT()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&xe.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Jn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Gn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=$r(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Bf=new WeakMap,_d=new WeakMap,GA=t=>{const e=Bf.get(t.target);e&&e(t)},KA=t=>{t.forEach(GA)};function QA({root:t,...e}){const n=t||document;_d.has(n)||_d.set(n,{});const r=_d.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(KA,{root:t,...e})),r[i]}function YA(t,e,n){const r=QA(e);return Bf.set(t,n),r.observe(t),()=>{Bf.delete(t),r.unobserve(t)}}const XA={some:0,all:1};class JA extends hi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:XA[i]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=u?d:f;p&&p(c)};return YA(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(ZA(e,n))&&this.startObserver()}unmount(){}}function ZA({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const eP={inView:{Feature:JA},tap:{Feature:qA},focus:{Feature:WA},hover:{Feature:HA}};function mT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function tP(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function nP(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Xu(t,e,n){const r=t.getProps();return Dp(r,e,n!==void 0?n:r.custom,tP(t),nP(t))}let rP=Ve,Vp=Ve;const zr=t=>t*1e3,Zn=t=>t/1e3,iP={current:!1},pT=t=>Array.isArray(t)&&typeof t[0]=="number";function gT(t){return!!(!t||typeof t=="string"&&yT[t]||pT(t)||Array.isArray(t)&&t.every(gT))}const Xo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,yT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xo([0,.65,.55,1]),circOut:Xo([.55,0,1,.45]),backIn:Xo([.31,.01,.66,-.59]),backOut:Xo([.33,1.53,.69,.99])};function vT(t){if(t)return pT(t)?Xo(t):Array.isArray(t)?t.map(vT):yT[t]}function sP(t,e,n,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:c}={}){const u={[e]:n};c&&(u.offset=c);const d=vT(a);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function oP(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const wT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,aP=1e-7,lP=12;function cP(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=wT(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>aP&&++a<lP);return o}function ol(t,e,n,r){if(t===e&&n===r)return Ve;const i=s=>cP(s,0,1,t,n);return s=>s===0||s===1?s:wT(i(s),e,r)}const uP=ol(.42,0,1,1),hP=ol(0,0,.58,1),xT=ol(.42,0,.58,1),dP=t=>Array.isArray(t)&&typeof t[0]!="number",_T=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,TT=t=>e=>1-t(1-e),Mp=t=>1-Math.sin(Math.acos(t)),ET=TT(Mp),fP=_T(Mp),ST=ol(.33,1.53,.69,.99),jp=TT(ST),mP=_T(jp),pP=t=>(t*=2)<1?.5*jp(t):.5*(2-Math.pow(2,-10*(t-1))),gP={linear:Ve,easeIn:uP,easeInOut:xT,easeOut:hP,circIn:Mp,circInOut:fP,circOut:ET,backIn:jp,backInOut:mP,backOut:ST,anticipate:pP},iv=t=>{if(Array.isArray(t)){Vp(t.length===4);const[e,n,r,i]=t;return ol(e,n,r,i)}else if(typeof t=="string")return gP[t];return t},Op=(t,e)=>n=>!!(il(n)&&yA.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),IT=(t,e,n)=>r=>{if(!il(r))return r;const[i,s,o,a]=r.match(Qu);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},yP=t=>Jr(0,255,t),Td={...Ji,transform:t=>Math.round(yP(t))},Ri={test:Op("rgb","red"),parse:IT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Td.transform(t)+", "+Td.transform(e)+", "+Td.transform(n)+", "+fa(da.transform(r))+")"};function vP(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const $f={test:Op("#"),parse:vP,transform:Ri.transform},Is={test:Op("hsl","hue"),parse:IT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Rn.transform(fa(e))+", "+Rn.transform(fa(n))+", "+fa(da.transform(r))+")"},_t={test:t=>Ri.test(t)||$f.test(t)||Is.test(t),parse:t=>Ri.test(t)?Ri.parse(t):Is.test(t)?Is.parse(t):$f.parse(t),transform:t=>il(t)?t:t.hasOwnProperty("red")?Ri.transform(t):Is.transform(t)},Ce=(t,e,n)=>-n*t+n*e+t;function Ed(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function wP({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;i=Ed(c,a,t+1/3),s=Ed(c,a,t),o=Ed(c,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const Sd=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},xP=[$f,Ri,Is],_P=t=>xP.find(e=>e.test(t));function sv(t){const e=_P(t);let n=e.parse(t);return e===Is&&(n=wP(n)),n}const bT=(t,e)=>{const n=sv(t),r=sv(e),i={...n};return s=>(i.red=Sd(n.red,r.red,s),i.green=Sd(n.green,r.green,s),i.blue=Sd(n.blue,r.blue,s),i.alpha=Ce(n.alpha,r.alpha,s),Ri.transform(i))};function TP(t){var e,n;return isNaN(t)&&il(t)&&(((e=t.match(Qu))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(J1))===null||n===void 0?void 0:n.length)||0)>0}const kT={regex:pA,countKey:"Vars",token:"${v}",parse:Ve},CT={regex:J1,countKey:"Colors",token:"${c}",parse:_t.parse},AT={regex:Qu,countKey:"Numbers",token:"${n}",parse:Ji.parse};function Id(t,{regex:e,countKey:n,token:r,parse:i}){const s=t.tokenised.match(e);s&&(t["num"+n]=s.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...s.map(i)))}function tu(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Id(n,kT),Id(n,CT),Id(n,AT),n}function PT(t){return tu(t).values}function NT(t){const{values:e,numColors:n,numVars:r,tokenised:i}=tu(t),s=e.length;return o=>{let a=i;for(let c=0;c<s;c++)c<r?a=a.replace(kT.token,o[c]):c<r+n?a=a.replace(CT.token,_t.transform(o[c])):a=a.replace(AT.token,fa(o[c]));return a}}const EP=t=>typeof t=="number"?0:t;function SP(t){const e=PT(t);return NT(t)(e.map(EP))}const Zr={test:TP,parse:PT,createTransformer:NT,getAnimatableNone:SP},RT=(t,e)=>n=>`${n>0?e:t}`;function DT(t,e){return typeof t=="number"?n=>Ce(t,e,n):_t.test(t)?bT(t,e):t.startsWith("var(")?RT(t,e):MT(t,e)}const VT=(t,e)=>{const n=[...t],r=n.length,i=t.map((s,o)=>DT(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}},IP=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=DT(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}},MT=(t,e)=>{const n=Zr.createTransformer(e),r=tu(t),i=tu(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?$r(VT(r.values,i.values),n):RT(t,e)},Ba=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ov=(t,e)=>n=>Ce(t,e,n);function bP(t){return typeof t=="number"?ov:typeof t=="string"?_t.test(t)?bT:MT:Array.isArray(t)?VT:typeof t=="object"?IP:ov}function kP(t,e,n){const r=[],i=n||bP(t[0]),s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Ve:e;a=$r(c,a)}r.push(a)}return r}function jT(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Vp(s===e.length),s===1)return()=>e[0];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=kP(e,r,i),a=o.length,c=u=>{let d=0;if(a>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const f=Ba(t[d],t[d+1],u);return o[d](f)};return n?u=>c(Jr(t[0],t[s-1],u)):c}function CP(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ba(0,e,r);t.push(Ce(n,1,i))}}function AP(t){const e=[0];return CP(e,t.length-1),e}function PP(t,e){return t.map(n=>n*e)}function NP(t,e){return t.map(()=>e||xT).splice(0,t.length-1)}function nu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=dP(r)?r.map(iv):iv(r),s={done:!1,value:e[0]},o=PP(n&&n.length===e.length?n:AP(e),t),a=jT(o,e,{ease:Array.isArray(i)?i:NP(e,i)});return{calculatedDuration:t,next:c=>(s.value=a(c),s.done=c>=t,s)}}function OT(t,e){return e?t*(1e3/e):0}const RP=5;function LT(t,e,n){const r=Math.max(e-RP,0);return OT(n-t(r),e-r)}const bd=.001,DP=.01,av=10,VP=.05,MP=1;function jP({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,s;rP(t<=zr(av));let o=1-e;o=Jr(VP,MP,o),t=Jr(DP,av,Zn(t)),o<1?(i=u=>{const d=u*o,f=d*t,p=d-n,x=zf(u,o),T=Math.exp(-f);return bd-p/x*T},s=u=>{const f=u*o*t,p=f*n+n,x=Math.pow(o,2)*Math.pow(u,2)*t,T=Math.exp(-f),A=zf(Math.pow(u,2),o);return(-i(u)+bd>0?-1:1)*((p-x)*T)/A}):(i=u=>{const d=Math.exp(-u*t),f=(u-n)*t+1;return-bd+d*f},s=u=>{const d=Math.exp(-u*t),f=(n-u)*(t*t);return d*f});const a=5/t,c=LP(i,s,a);if(t=zr(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const OP=12;function LP(t,e,n){let r=n;for(let i=1;i<OP;i++)r=r-t(r)/e(r);return r}function zf(t,e){return t*Math.sqrt(1-e*e)}const FP=["duration","bounce"],UP=["stiffness","damping","mass"];function lv(t,e){return e.some(n=>t[n]!==void 0)}function BP(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!lv(t,UP)&&lv(t,FP)){const n=jP(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function FT({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],s=t[t.length-1],o={done:!1,value:i},{stiffness:a,damping:c,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=BP({...r,velocity:-Zn(r.velocity||0)}),x=f||0,T=c/(2*Math.sqrt(a*u)),A=s-i,R=Zn(Math.sqrt(a/u)),_=Math.abs(A)<5;n||(n=_?.01:2),e||(e=_?.005:.5);let y;if(T<1){const w=zf(R,T);y=k=>{const V=Math.exp(-T*R*k);return s-V*((x+T*R*A)/w*Math.sin(w*k)+A*Math.cos(w*k))}}else if(T===1)y=w=>s-Math.exp(-R*w)*(A+(x+R*A)*w);else{const w=R*Math.sqrt(T*T-1);y=k=>{const V=Math.exp(-T*R*k),O=Math.min(w*k,300);return s-V*((x+T*R*A)*Math.sinh(O)+w*A*Math.cosh(O))/w}}return{calculatedDuration:p&&d||null,next:w=>{const k=y(w);if(p)o.done=w>=d;else{let V=x;w!==0&&(T<1?V=LT(y,w,k):V=0);const O=Math.abs(V)<=n,b=Math.abs(s-k)<=e;o.done=O&&b}return o.value=o.done?s:k,o}}}function cv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:d}){const f=t[0],p={done:!1,value:f},x=v=>a!==void 0&&v<a||c!==void 0&&v>c,T=v=>a===void 0?c:c===void 0||Math.abs(a-v)<Math.abs(c-v)?a:c;let A=n*e;const R=f+A,_=o===void 0?R:o(R);_!==R&&(A=_-f);const y=v=>-A*Math.exp(-v/r),w=v=>_+y(v),k=v=>{const S=y(v),I=w(v);p.done=Math.abs(S)<=u,p.value=p.done?_:I};let V,O;const b=v=>{x(p.value)&&(V=v,O=FT({keyframes:[p.value,T(p.value)],velocity:LT(w,v,p.value),damping:i,stiffness:s,restDelta:u,restSpeed:d}))};return b(0),{calculatedDuration:null,next:v=>{let S=!1;return!O&&V===void 0&&(S=!0,k(v),b(v)),V!==void 0&&v>V?O.next(v-V):(!S&&k(v),p)}}}const $P=t=>{const e=({timestamp:n})=>t(n);return{start:()=>xe.update(e,!0),stop:()=>ir(e),now:()=>ht.isProcessing?ht.timestamp:performance.now()}},uv=2e4;function hv(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<uv;)e+=n,r=t.next(e);return e>=uv?1/0:e}const zP={decay:cv,inertia:cv,tween:nu,keyframes:nu,spring:FT};function ru({autoplay:t=!0,delay:e=0,driver:n=$P,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:f,...p}){let x=1,T=!1,A,R;const _=()=>{R=new Promise(X=>{A=X})};_();let y;const w=zP[i]||nu;let k;w!==nu&&typeof r[0]!="number"&&(k=jT([0,100],r,{clamp:!1}),r=[0,100]);const V=w({...p,keyframes:r});let O;a==="mirror"&&(O=w({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let b="idle",v=null,S=null,I=null;V.calculatedDuration===null&&s&&(V.calculatedDuration=hv(V));const{calculatedDuration:P}=V;let N=1/0,C=1/0;P!==null&&(N=P+o,C=N*(s+1)-o);let Y=0;const ee=X=>{if(S===null)return;x>0&&(S=Math.min(S,X)),x<0&&(S=Math.min(X-C/x,S)),v!==null?Y=v:Y=Math.round(X-S)*x;const pe=Y-e*(x>=0?1:-1),vn=x>=0?pe<0:pe>C;Y=Math.max(pe,0),b==="finished"&&v===null&&(Y=C);let vt=Y,wn=V;if(s){const ns=Math.min(Y,C)/N;let pi=Math.floor(ns),Bn=ns%1;!Bn&&ns>=1&&(Bn=1),Bn===1&&pi--,pi=Math.min(pi,s+1),!!(pi%2)&&(a==="reverse"?(Bn=1-Bn,o&&(Bn-=o/N)):a==="mirror"&&(wn=O)),vt=Jr(0,1,Bn)*N}const Ze=vn?{done:!1,value:r[0]}:wn.next(vt);k&&(Ze.value=k(Ze.value));let{done:tn}=Ze;!vn&&P!==null&&(tn=x>=0?Y>=C:Y<=0);const xo=v===null&&(b==="finished"||b==="running"&&tn);return f&&f(Ze.value),xo&&H(),Ze},oe=()=>{y&&y.stop(),y=void 0},Me=()=>{b="idle",oe(),A(),_(),S=I=null},H=()=>{b="finished",d&&d(),oe(),A()},$=()=>{if(T)return;y||(y=n(ee));const X=y.now();c&&c(),v!==null?S=X-v:(!S||b==="finished")&&(S=X),b==="finished"&&_(),I=S,v=null,b="running",y.start()};t&&$();const K={then(X,pe){return R.then(X,pe)},get time(){return Zn(Y)},set time(X){X=zr(X),Y=X,v!==null||!y||x===0?v=X:S=y.now()-X/x},get duration(){const X=V.calculatedDuration===null?hv(V):V.calculatedDuration;return Zn(X)},get speed(){return x},set speed(X){X===x||!y||(x=X,K.time=Zn(Y))},get state(){return b},play:$,pause:()=>{b="paused",v=Y},stop:()=>{T=!0,b!=="idle"&&(b="idle",u&&u(),Me())},cancel:()=>{I!==null&&ee(I),Me()},complete:()=>{b="finished"},sample:X=>(S=0,ee(X))};return K}function HP(t){let e;return()=>(e===void 0&&(e=t()),e)}const WP=HP(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),qP=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Ql=10,GP=2e4,KP=(t,e)=>e.type==="spring"||t==="backgroundColor"||!gT(e.ease);function QP(t,e,{onUpdate:n,onComplete:r,...i}){if(!(WP()&&qP.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const d=()=>{c=new Promise(w=>{a=w})};d();let{keyframes:f,duration:p=300,ease:x,times:T}=i;if(KP(e,i)){const w=ru({...i,repeat:0,delay:0});let k={done:!1,value:f[0]};const V=[];let O=0;for(;!k.done&&O<GP;)k=w.sample(O),V.push(k.value),O+=Ql;T=void 0,f=V,p=O-Ql,x="linear"}const A=sP(t.owner.current,e,f,{...i,duration:p,ease:x,times:T}),R=()=>{u=!1,A.cancel()},_=()=>{u=!0,xe.update(R),a(),d()};return A.onfinish=()=>{u||(t.set(oP(f,i)),r&&r(),_())},{then(w,k){return c.then(w,k)},attachTimeline(w){return A.timeline=w,A.onfinish=null,Ve},get time(){return Zn(A.currentTime||0)},set time(w){A.currentTime=zr(w)},get speed(){return A.playbackRate},set speed(w){A.playbackRate=w},get duration(){return Zn(p)},play:()=>{o||(A.play(),ir(R))},pause:()=>A.pause(),stop:()=>{if(o=!0,A.playState==="idle")return;const{currentTime:w}=A;if(w){const k=ru({...i,autoplay:!1});t.setWithVelocity(k.sample(w-Ql).value,k.sample(w).value,Ql)}_()},complete:()=>{u||A.finish()},cancel:_}}function YP({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ve,pause:Ve,stop:Ve,then:s=>(s(),Promise.resolve()),cancel:Ve,complete:Ve});return e?ru({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const XP={type:"spring",stiffness:500,damping:25,restSpeed:10},JP=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ZP={type:"keyframes",duration:.8},e2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},t2=(t,{keyframes:e})=>e.length>2?ZP:Xi.has(t)?t.startsWith("scale")?JP(e[1]):XP:e2,Hf=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Zr.test(e)||e==="0")&&!e.startsWith("url(")),n2=new Set(["brightness","contrast","saturate","opacity"]);function r2(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Qu)||[];if(!r)return t;const i=n.replace(r,"");let s=n2.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const i2=/([a-z-]*)\(.*?\)/g,Wf={...Zr,getAnimatableNone:t=>{const e=t.match(i2);return e?e.map(r2).join(" "):t}},s2={...Z1,color:_t,backgroundColor:_t,outlineColor:_t,fill:_t,stroke:_t,borderColor:_t,borderTopColor:_t,borderRightColor:_t,borderBottomColor:_t,borderLeftColor:_t,filter:Wf,WebkitFilter:Wf},Lp=t=>s2[t];function UT(t,e){let n=Lp(t);return n!==Wf&&(n=Zr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const BT=t=>/^0[^.\s]+$/.test(t);function o2(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||BT(t)}function a2(t,e,n,r){const i=Hf(e,n);let s;Array.isArray(n)?s=[...n]:s=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const c=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),o2(s[u])&&c.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(i&&c.length&&a)for(let u=0;u<c.length;u++){const d=c[u];s[d]=UT(e,a)}return s}function l2({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function Fp(t,e){return t[e]||t.default||t}const c2={skipAnimations:!1},Up=(t,e,n,r={})=>i=>{const s=Fp(r,t)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-zr(o);const c=a2(e,t,n,s),u=c[0],d=c[c.length-1],f=Hf(t,u),p=Hf(t,d);let x={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:T=>{e.set(T),s.onUpdate&&s.onUpdate(T)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(l2(s)||(x={...x,...t2(t,x)}),x.duration&&(x.duration=zr(x.duration)),x.repeatDelay&&(x.repeatDelay=zr(x.repeatDelay)),!f||!p||iP.current||s.type===!1||c2.skipAnimations)return YP(x);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const T=QP(e,t,x);if(T)return T}return ru(x)};function iu(t){return!!(Dt(t)&&t.add)}const $T=t=>/^\-?\d*\.?\d+$/.test(t);function Bp(t,e){t.indexOf(e)===-1&&t.push(e)}function $p(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class zp{constructor(){this.subscriptions=[]}add(e){return Bp(this.subscriptions,e),()=>$p(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const u2=t=>!isNaN(parseFloat(t));class h2{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=ht;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,xe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>xe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=u2(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new zp);const r=this.events[e].add(n);return e==="change"?()=>{r(),xe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?OT(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gs(t,e){return new h2(t,e)}const zT=t=>e=>e.test(t),d2={test:t=>t==="auto",parse:t=>t},HT=[Ji,J,Rn,xr,wA,vA,d2],Wo=t=>HT.find(zT(t)),f2=[...HT,_t,Zr],m2=t=>f2.find(zT(t));function p2(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Gs(n))}function g2(t,e){const n=Xu(t,e);let{transitionEnd:r={},transition:i={},...s}=n?t.makeTargetAnimatable(n,!1):{};s={...s,...r};for(const o in s){const a=DA(s[o]);p2(t,o,a)}}function y2(t,e,n){var r,i;const s=Object.keys(e).filter(a=>!t.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const c=s[a],u=e[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(i=(r=n[c])!==null&&r!==void 0?r:t.readValue(c))!==null&&i!==void 0?i:e[c]),d!=null&&(typeof d=="string"&&($T(d)||BT(d))?d=parseFloat(d):!m2(d)&&Zr.test(u)&&(d=UT(c,u)),t.addValue(c,Gs(d,{owner:t})),n[c]===void 0&&(n[c]=d),d!==null&&t.setBaseTarget(c,d))}}function v2(t,e){return e?(e[t]||e.default||e).from:void 0}function w2(t,e,n){const r={};for(const i in t){const s=v2(i,e);if(s!==void 0)r[i]=s;else{const o=n.getValue(i);o&&(r[i]=o.get())}}return r}function x2({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function _2(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function WT(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const f in a){const p=t.getValue(f),x=a[f];if(!p||x===void 0||d&&x2(d,f))continue;const T={delay:n,elapsed:0,...Fp(s||{},f)};if(window.HandoffAppearAnimations){const _=t.getProps()[q1];if(_){const y=window.HandoffAppearAnimations(_,f,p,xe);y!==null&&(T.elapsed=y,T.isHandoff=!0)}}let A=!T.isHandoff&&!_2(p,x);if(T.type==="spring"&&(p.getVelocity()||T.velocity)&&(A=!1),p.animation&&(A=!1),A)continue;p.start(Up(f,p,x,t.shouldReduceMotion&&Xi.has(f)?{type:!1}:T));const R=p.animation;iu(c)&&(c.add(f),R.then(()=>c.remove(f))),u.push(R)}return o&&Promise.all(u).then(()=>{o&&g2(t,o)}),u}function qf(t,e,n={}){const r=Xu(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(WT(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=i;return T2(t,e,u+c,d,f,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function T2(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,c=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(E2).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(qf(u,e,{...s,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function E2(t,e){return t.sortNodePosition(e)}function S2(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>qf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=qf(t,e,n);else{const i=typeof e=="function"?Xu(t,e,n.custom):e;r=Promise.all(WT(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const I2=[...Sp].reverse(),b2=Sp.length;function k2(t){return e=>Promise.all(e.map(({animation:n,options:r})=>S2(t,n,r)))}function C2(t){let e=k2(t);const n=P2();let r=!0;const i=(c,u)=>{const d=Xu(t,u);if(d){const{transition:f,transitionEnd:p,...x}=d;c={...c,...x,...p}}return c};function s(c){e=c(t)}function o(c,u){const d=t.getProps(),f=t.getVariantContext(!0)||{},p=[],x=new Set;let T={},A=1/0;for(let _=0;_<b2;_++){const y=I2[_],w=n[y],k=d[y]!==void 0?d[y]:f[y],V=Fa(k),O=y===u?w.isActive:null;O===!1&&(A=_);let b=k===f[y]&&k!==d[y]&&V;if(b&&r&&t.manuallyAnimateOnMount&&(b=!1),w.protectedKeys={...T},!w.isActive&&O===null||!k&&!w.prevProp||Gu(k)||typeof k=="boolean")continue;let S=A2(w.prevProp,k)||y===u&&w.isActive&&!b&&V||_>A&&V,I=!1;const P=Array.isArray(k)?k:[k];let N=P.reduce(i,{});O===!1&&(N={});const{prevResolvedValues:C={}}=w,Y={...C,...N},ee=oe=>{S=!0,x.has(oe)&&(I=!0,x.delete(oe)),w.needsAnimating[oe]=!0};for(const oe in Y){const Me=N[oe],H=C[oe];if(T.hasOwnProperty(oe))continue;let $=!1;eu(Me)&&eu(H)?$=!mT(Me,H):$=Me!==H,$?Me!==void 0?ee(oe):x.add(oe):Me!==void 0&&x.has(oe)?ee(oe):w.protectedKeys[oe]=!0}w.prevProp=k,w.prevResolvedValues=N,w.isActive&&(T={...T,...N}),r&&t.blockInitialAnimation&&(S=!1),S&&(!b||I)&&p.push(...P.map(oe=>({animation:oe,options:{type:y,...c}})))}if(x.size){const _={};x.forEach(y=>{const w=t.getBaseTarget(y);w!==void 0&&(_[y]=w)}),p.push({animation:_})}let R=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(R=!1),r=!1,R?e(p):Promise.resolve()}function a(c,u,d){var f;if(n[c].isActive===u)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(x=>{var T;return(T=x.animationState)===null||T===void 0?void 0:T.setActive(c,u)}),n[c].isActive=u;const p=o(d,c);for(const x in n)n[x].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n}}function A2(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!mT(e,t):!1}function _i(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function P2(){return{animate:_i(!0),whileInView:_i(),whileHover:_i(),whileTap:_i(),whileDrag:_i(),whileFocus:_i(),exit:_i()}}class N2 extends hi{constructor(e){super(e),e.animationState||(e.animationState=C2(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Gu(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let R2=0;class D2 extends hi{constructor(){super(...arguments),this.id=R2++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const V2={animation:{Feature:N2},exit:{Feature:D2}},dv=(t,e)=>Math.abs(t-e);function M2(t,e){const n=dv(t.x,e.x),r=dv(t.y,e.y);return Math.sqrt(n**2+r**2)}class qT{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Cd(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=M2(f.offset,{x:0,y:0})>=3;if(!p&&!x)return;const{point:T}=f,{timestamp:A}=ht;this.history.push({...T,timestamp:A});const{onStart:R,onMove:_}=this.handlers;p||(R&&R(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=kd(p,this.transformPagePoint),xe.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:x,onSessionEnd:T,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Cd(f.type==="pointercancel"?this.lastMoveEventInfo:kd(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(f,R),T&&T(f,R)},!cT(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Yu(e),a=kd(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=ht;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,Cd(a,this.history)),this.removeListeners=$r(Jn(this.contextWindow,"pointermove",this.handlePointerMove),Jn(this.contextWindow,"pointerup",this.handlePointerUp),Jn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ir(this.updatePoint)}}function kd(t,e){return e?{point:e(t.point)}:t}function fv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Cd({point:t},e){return{point:t,delta:fv(t,GT(e)),offset:fv(t,j2(e)),velocity:O2(e,.1)}}function j2(t){return t[0]}function GT(t){return t[t.length-1]}function O2(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=GT(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>zr(e)));)n--;if(!r)return{x:0,y:0};const s=Zn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Bt(t){return t.max-t.min}function Gf(t,e=0,n=.01){return Math.abs(t-e)<=n}function mv(t,e,n,r=.5){t.origin=r,t.originPoint=Ce(e.min,e.max,t.origin),t.scale=Bt(n)/Bt(e),(Gf(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ce(n.min,n.max,t.origin)-t.originPoint,(Gf(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ma(t,e,n,r){mv(t.x,e.x,n.x,r?r.originX:void 0),mv(t.y,e.y,n.y,r?r.originY:void 0)}function pv(t,e,n){t.min=n.min+e.min,t.max=t.min+Bt(e)}function L2(t,e,n){pv(t.x,e.x,n.x),pv(t.y,e.y,n.y)}function gv(t,e,n){t.min=e.min-n.min,t.max=t.min+Bt(e)}function pa(t,e,n){gv(t.x,e.x,n.x),gv(t.y,e.y,n.y)}function F2(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ce(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ce(n,t,r.max):Math.min(t,n)),t}function yv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function U2(t,{top:e,left:n,bottom:r,right:i}){return{x:yv(t.x,n,i),y:yv(t.y,e,r)}}function vv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function B2(t,e){return{x:vv(t.x,e.x),y:vv(t.y,e.y)}}function $2(t,e){let n=.5;const r=Bt(t),i=Bt(e);return i>r?n=Ba(e.min,e.max-r,t.min):r>i&&(n=Ba(t.min,t.max-i,e.min)),Jr(0,1,n)}function z2(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Kf=.35;function H2(t=Kf){return t===!1?t=0:t===!0&&(t=Kf),{x:wv(t,"left","right"),y:wv(t,"top","bottom")}}function wv(t,e,n){return{min:xv(t,e),max:xv(t,n)}}function xv(t,e){return typeof t=="number"?t:t[e]||0}const _v=()=>({translate:0,scale:1,origin:0,originPoint:0}),bs=()=>({x:_v(),y:_v()}),Tv=()=>({min:0,max:0}),Ue=()=>({x:Tv(),y:Tv()});function Wt(t){return[t("x"),t("y")]}function KT({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function W2({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function q2(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ad(t){return t===void 0||t===1}function Qf({scale:t,scaleX:e,scaleY:n}){return!Ad(t)||!Ad(e)||!Ad(n)}function Si(t){return Qf(t)||QT(t)||t.z||t.rotate||t.rotateX||t.rotateY}function QT(t){return Ev(t.x)||Ev(t.y)}function Ev(t){return t&&t!=="0%"}function su(t,e,n){const r=t-n,i=e*r;return n+i}function Sv(t,e,n,r,i){return i!==void 0&&(t=su(t,i,r)),su(t,n,r)+e}function Yf(t,e=0,n=1,r,i){t.min=Sv(t.min,e,n,r,i),t.max=Sv(t.max,e,n,r,i)}function YT(t,{x:e,y:n}){Yf(t.x,e.translate,e.scale,e.originPoint),Yf(t.y,n.translate,n.scale,n.originPoint)}function G2(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const c=s.instance;c&&c.style&&c.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ks(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,YT(t,o)),r&&Si(s.latestValues)&&ks(t,s.latestValues))}e.x=Iv(e.x),e.y=Iv(e.y)}function Iv(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Er(t,e){t.min=t.min+e,t.max=t.max+e}function bv(t,e,[n,r,i]){const s=e[i]!==void 0?e[i]:.5,o=Ce(t.min,t.max,s);Yf(t,e[n],e[r],o,e.scale)}const K2=["x","scaleX","originX"],Q2=["y","scaleY","originY"];function ks(t,e){bv(t.x,e,K2),bv(t.y,e,Q2)}function XT(t,e){return KT(q2(t.getBoundingClientRect(),e))}function Y2(t,e,n){const r=XT(t,n),{scroll:i}=e;return i&&(Er(r.x,i.offset.x),Er(r.y,i.offset.y)),r}const JT=({current:t})=>t?t.ownerDocument.defaultView:null,X2=new WeakMap;class J2{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ue(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Yu(d,"page").point)},s=(d,f)=>{const{drag:p,dragPropagation:x,onDragStart:T}=this.getProps();if(p&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=hT(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wt(R=>{let _=this.getAxisMotionValue(R).get()||0;if(Rn.test(_)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[R];w&&(_=Bt(w)*(parseFloat(_)/100))}}this.originPoint[R]=_}),T&&xe.update(()=>T(d,f),!1,!0);const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:T,onDrag:A}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:R}=f;if(x&&this.currentDirection===null){this.currentDirection=Z2(R),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",f.point,R),this.updateAxis("y",f.point,R),this.visualElement.render(),A&&A(d,f)},a=(d,f)=>this.stop(d,f),c=()=>Wt(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new qT(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:JT(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&xe.update(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Yl(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=F2(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ss(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=U2(i.layoutBox,n):this.constraints=!1,this.elastic=H2(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Wt(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=z2(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ss(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Y2(r,i.root,this.visualElement.getTransformPagePoint());let o=B2(i.layout.layoutBox,s);if(n){const a=n(W2(o));this.hasMutatedConstraints=!!a,a&&(o=KT(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=Wt(d=>{if(!Yl(d,n,this.currentDirection))return;let f=c&&c[d]||{};o&&(f={min:0,max:0});const p=i?200:1e6,x=i?40:1e7,T={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,T)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Up(e,r,0,n))}stopAnimation(){Wt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Wt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Wt(n=>{const{drag:r}=this.getProps();if(!Yl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ce(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ss(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Wt(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();i[o]=$2({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Wt(o=>{if(!Yl(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(Ce(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;X2.set(this.visualElement,this);const e=this.visualElement.current,n=Jn(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ss(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Gn(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Wt(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Kf,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Yl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Z2(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class eN extends hi{constructor(e){super(e),this.removeGroupControls=Ve,this.removeListeners=Ve,this.controls=new J2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ve}unmount(){this.removeGroupControls(),this.removeListeners()}}const kv=t=>(e,n)=>{t&&xe.update(()=>t(e,n))};class tN extends hi{constructor(){super(...arguments),this.removePointerDownListener=Ve}onPointerDown(e){this.session=new qT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:JT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:kv(e),onStart:kv(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&xe.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Jn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function nN(){const t=j.useContext(Wu);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=j.useId();return j.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const gc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Cv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const qo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(J.test(t))t=parseFloat(t);else return t;const n=Cv(t,e.target.x),r=Cv(t,e.target.y);return`${n}% ${r}%`}},rN={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Zr.parse(t);if(i.length>5)return r;const s=Zr.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=c;const u=Ce(a,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class iN extends Nm.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;hA(sN),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),gc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||xe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ZT(t){const[e,n]=nN(),r=j.useContext(bp);return Nm.createElement(iN,{...t,layoutGroup:r,switchLayoutGroup:j.useContext(K1),isPresent:e,safeToRemove:n})}const sN={borderRadius:{...qo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qo,borderTopRightRadius:qo,borderBottomLeftRadius:qo,borderBottomRightRadius:qo,boxShadow:rN},eE=["TopLeft","TopRight","BottomLeft","BottomRight"],oN=eE.length,Av=t=>typeof t=="string"?parseFloat(t):t,Pv=t=>typeof t=="number"||J.test(t);function aN(t,e,n,r,i,s){i?(t.opacity=Ce(0,n.opacity!==void 0?n.opacity:1,lN(r)),t.opacityExit=Ce(e.opacity!==void 0?e.opacity:1,0,cN(r))):s&&(t.opacity=Ce(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<oN;o++){const a=`border${eE[o]}Radius`;let c=Nv(e,a),u=Nv(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Pv(c)===Pv(u)?(t[a]=Math.max(Ce(Av(c),Av(u),r),0),(Rn.test(u)||Rn.test(c))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Ce(e.rotate||0,n.rotate||0,r))}function Nv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const lN=tE(0,.5,ET),cN=tE(.5,.95,Ve);function tE(t,e,n){return r=>r<t?0:r>e?1:n(Ba(t,e,r))}function Rv(t,e){t.min=e.min,t.max=e.max}function Ht(t,e){Rv(t.x,e.x),Rv(t.y,e.y)}function Dv(t,e,n,r,i){return t-=e,t=su(t,1/n,r),i!==void 0&&(t=su(t,1/i,r)),t}function uN(t,e=0,n=1,r=.5,i,s=t,o=t){if(Rn.test(e)&&(e=parseFloat(e),e=Ce(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ce(s.min,s.max,r);t===s&&(a-=e),t.min=Dv(t.min,e,n,a,i),t.max=Dv(t.max,e,n,a,i)}function Vv(t,e,[n,r,i],s,o){uN(t,e[n],e[r],e[i],e.scale,s,o)}const hN=["x","scaleX","originX"],dN=["y","scaleY","originY"];function Mv(t,e,n,r){Vv(t.x,e,hN,n?n.x:void 0,r?r.x:void 0),Vv(t.y,e,dN,n?n.y:void 0,r?r.y:void 0)}function jv(t){return t.translate===0&&t.scale===1}function nE(t){return jv(t.x)&&jv(t.y)}function fN(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function rE(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Ov(t){return Bt(t.x)/Bt(t.y)}class mN{constructor(){this.members=[]}add(e){Bp(this.members,e),e.scheduleRender()}remove(e){if($p(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Lv(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:c,rotateX:u,rotateY:d}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const pN=(t,e)=>t.depth-e.depth;class gN{constructor(){this.children=[],this.isDirty=!1}add(e){Bp(this.children,e),this.isDirty=!0}remove(e){$p(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pN),this.isDirty=!1,this.children.forEach(e)}}function yN(t,e){const n=performance.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ir(r),t(s-e))};return xe.read(r,!0),()=>ir(r)}function vN(t){window.MotionDebug&&window.MotionDebug.record(t)}function wN(t){return t instanceof SVGElement&&t.tagName!=="svg"}function xN(t,e,n){const r=Dt(t)?t:Gs(t);return r.start(Up("",r,e,n)),r.animation}const Fv=["","X","Y","Z"],_N={visibility:"hidden"},Uv=1e3;let TN=0;const Ii={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function iE({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=TN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ii.totalNodes=Ii.resolvedTargetDeltas=Ii.recalculatedProjection=0,this.nodes.forEach(IN),this.nodes.forEach(PN),this.nodes.forEach(NN),this.nodes.forEach(bN),vN(Ii)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new gN)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new zp),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wN(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=yN(p,250),gc.hasAnimatedSinceResize&&(gc.hasAnimatedSinceResize=!1,this.nodes.forEach($v))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:x,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||d.getDefaultTransition()||jN,{onLayoutAnimationStart:R,onLayoutAnimationComplete:_}=d.getProps(),y=!this.targetLayout||!rE(this.targetLayout,T)||x,w=!p&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const k={...Fp(A,"layout"),onPlay:R,onComplete:_};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else p||$v(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ir(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RN),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Bv);return}this.isUpdating||this.nodes.forEach(CN),this.isUpdating=!1,this.nodes.forEach(AN),this.nodes.forEach(EN),this.nodes.forEach(SN),this.clearAllSnapshots();const a=performance.now();ht.delta=Jr(0,1e3/60,a-ht.timestamp),ht.timestamp=a,ht.isProcessing=!0,wd.update.process(ht),wd.preRender.process(ht),wd.render.process(ht),ht.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(kN),this.sharedNodes.forEach(DN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,xe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){xe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!nE(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||Si(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),ON(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ue();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Er(a.x,c.offset.x),Er(a.y,c.offset.y)),a}removeElementScroll(o){const a=Ue();Ht(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;if(u!==this.root&&d&&f.layoutScroll){if(d.isRoot){Ht(a,o);const{scroll:p}=this.root;p&&(Er(a.x,-p.offset.x),Er(a.y,-p.offset.y))}Er(a.x,d.offset.x),Er(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const c=Ue();Ht(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ks(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Si(d.latestValues)&&ks(c,d.latestValues)}return Si(this.latestValues)&&ks(c,this.latestValues),c}removeTransform(o){const a=Ue();Ht(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Si(u.latestValues))continue;Qf(u.latestValues)&&u.updateSnapshot();const d=Ue(),f=u.measurePageBox();Ht(d,f),Mv(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Si(this.latestValues)&&Mv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ht.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=ht.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),pa(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Ht(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ue(),this.targetWithTransforms=Ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),L2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ht(this.target,this.layout.layoutBox),YT(this.target,this.targetDelta)):Ht(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),pa(this.relativeTargetOrigin,this.target,x.target),Ht(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ii.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Qf(this.parent.latestValues)||QT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ht.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Ht(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,x=this.treeScale.y;G2(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:T}=a;if(!T){this.projectionTransform&&(this.projectionDelta=bs(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=bs(),this.projectionDeltaWithTransform=bs());const A=this.projectionTransform;ma(this.projectionDelta,this.layoutCorrected,T,this.latestValues),this.projectionTransform=Lv(this.projectionDelta,this.treeScale),(this.projectionTransform!==A||this.treeScale.x!==p||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),Ii.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=bs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Ue(),x=c?c.source:void 0,T=this.layout?this.layout.source:void 0,A=x!==T,R=this.getStack(),_=!R||R.members.length<=1,y=!!(A&&!_&&this.options.crossfade===!0&&!this.path.some(MN));this.animationProgress=0;let w;this.mixTargetDelta=k=>{const V=k/1e3;zv(f.x,o.x,V),zv(f.y,o.y,V),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pa(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VN(this.relativeTarget,this.relativeTargetOrigin,p,V),w&&fN(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Ue()),Ht(w,this.relativeTarget)),A&&(this.animationValues=d,aN(d,u,this.latestValues,V,y,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ir(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xe.update(()=>{gc.hasAnimatedSinceResize=!0,this.currentAnimation=xN(0,Uv,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Uv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:d}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&sE(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ue();const f=Bt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const p=Bt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+p}Ht(a,c),ks(a,d),ma(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mN),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<Fv.length;d++){const f="rotate"+Fv[d];c[f]&&(u[f]=c[f],o.setStaticValue(f,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return _N;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=pc(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const A={};return this.options.layoutId&&(A.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,A.pointerEvents=pc(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Si(this.latestValues)&&(A.transform=d?d({},""):"none",this.hasProjected=!1),A}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=Lv(this.projectionDeltaWithTransform,this.treeScale,p),d&&(u.transform=d(p,u.transform));const{x,y:T}=this.projectionDelta;u.transformOrigin=`${x.origin*100}% ${T.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in Jc){if(p[A]===void 0)continue;const{correct:R,applyTo:_}=Jc[A],y=u.transform==="none"?p[A]:R(p[A],f);if(_){const w=_.length;for(let k=0;k<w;k++)u[_[k]]=y}else u[A]=y}return this.options.layoutId&&(u.pointerEvents=f===this?pc(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Bv),this.root.sharedNodes.clear()}}}function EN(t){t.updateLayout()}function SN(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?Wt(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],x=Bt(p);p.min=r[f].min,p.max=p.min+x}):sE(s,n.layoutBox,r)&&Wt(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],x=Bt(r[f]);p.max=p.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+x)});const a=bs();ma(a,r,n.layoutBox);const c=bs();o?ma(c,t.applyTransform(i,!0),n.measuredBox):ma(c,r,n.layoutBox);const u=!nE(a);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:x}=f;if(p&&x){const T=Ue();pa(T,n.layoutBox,p.layoutBox);const A=Ue();pa(A,r,x.layoutBox),rE(T,A)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=T,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function IN(t){Ii.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function bN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kN(t){t.clearSnapshot()}function Bv(t){t.clearMeasurements()}function CN(t){t.isLayoutDirty=!1}function AN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $v(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function PN(t){t.resolveTargetDelta()}function NN(t){t.calcProjection()}function RN(t){t.resetRotation()}function DN(t){t.removeLeadSnapshot()}function zv(t,e,n){t.translate=Ce(e.translate,0,n),t.scale=Ce(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Hv(t,e,n,r){t.min=Ce(e.min,n.min,r),t.max=Ce(e.max,n.max,r)}function VN(t,e,n,r){Hv(t.x,e.x,n.x,r),Hv(t.y,e.y,n.y,r)}function MN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const jN={duration:.45,ease:[.4,0,.1,1]},Wv=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),qv=Wv("applewebkit/")&&!Wv("chrome/")?Math.round:Ve;function Gv(t){t.min=qv(t.min),t.max=qv(t.max)}function ON(t){Gv(t.x),Gv(t.y)}function sE(t,e,n){return t==="position"||t==="preserve-aspect"&&!Gf(Ov(e),Ov(n),.2)}const LN=iE({attachResizeListener:(t,e)=>Gn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pd={current:void 0},oE=iE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Pd.current){const t=new LN({});t.mount(window),t.setOptions({layoutScroll:!0}),Pd.current=t}return Pd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),FN={pan:{Feature:tN},drag:{Feature:eN,ProjectionNode:oE,MeasureLayout:ZT}},UN=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function BN(t){const e=UN.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Xf(t,e,n=1){const[r,i]=BN(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return $T(o)?parseFloat(o):o}else return Uf(i)?Xf(i,e,n+1):i}function $N(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const s=i.get();if(!Uf(s))return;const o=Xf(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!Uf(s))continue;const o=Xf(s,r);o&&(e[i]=o,n||(n={}),n[i]===void 0&&(n[i]=s))}return{target:e,transitionEnd:n}}const zN=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),aE=t=>zN.has(t),HN=t=>Object.keys(t).some(aE),Kv=t=>t===Ji||t===J,Qv=(t,e)=>parseFloat(t.split(", ")[e]),Yv=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Qv(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?Qv(s[1],t):0}},WN=new Set(["x","y","z"]),qN=rl.filter(t=>!WN.has(t));function GN(t){const e=[];return qN.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ks={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Yv(4,13),y:Yv(5,14)};Ks.translateX=Ks.x;Ks.translateY=Ks.y;const KN=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=Ks[u](r,s)}),e.render();const c=e.measureViewportBox();return n.forEach(u=>{const d=e.getValue(u);d&&d.jump(a[u]),t[u]=Ks[u](c,s)}),t},QN=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(aE);let s=[],o=!1;const a=[];if(i.forEach(c=>{const u=t.getValue(c);if(!t.hasValue(c))return;let d=n[c],f=Wo(d);const p=e[c];let x;if(eu(p)){const T=p.length,A=p[0]===null?1:0;d=p[A],f=Wo(d);for(let R=A;R<T&&p[R]!==null;R++)x?Vp(Wo(p[R])===x):x=Wo(p[R])}else x=Wo(p);if(f!==x)if(Kv(f)&&Kv(x)){const T=u.get();typeof T=="string"&&u.set(parseFloat(T)),typeof p=="string"?e[c]=parseFloat(p):Array.isArray(p)&&x===J&&(e[c]=p.map(parseFloat))}else f!=null&&f.transform&&(x!=null&&x.transform)&&(d===0||p===0)?d===0?u.set(x.transform(d)):e[c]=f.transform(p):(o||(s=GN(t),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:e[c],u.jump(p))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=KN(e,t,a);return s.length&&s.forEach(([d,f])=>{t.getValue(d).set(f)}),t.render(),qu&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function YN(t,e,n,r){return HN(e)?QN(t,e,n,r):{target:e,transitionEnd:r}}const XN=(t,e,n,r)=>{const i=$N(t,e,r);return e=i.target,r=i.transitionEnd,YN(t,e,n,r)},Jf={current:null},lE={current:!1};function JN(){if(lE.current=!0,!!qu)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Jf.current=t.matches;t.addListener(e),e()}else Jf.current=!1}function ZN(t,e,n){const{willChange:r}=e;for(const i in e){const s=e[i],o=n[i];if(Dt(s))t.addValue(i,s),iu(r)&&r.add(i);else if(Dt(o))t.addValue(i,Gs(s,{owner:t})),iu(r)&&r.remove(i);else if(o!==s)if(t.hasValue(i)){const a=t.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=t.getStaticValue(i);t.addValue(i,Gs(a!==void 0?a:s,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const Xv=new WeakMap,cE=Object.keys(Ua),eR=cE.length,Jv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],tR=Ip.length;class nR{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>xe.render(this.render,!1,!0);const{latestValues:a,renderState:c}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=Ku(n),this.isVariantNode=G1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(n,{});for(const f in d){const p=d[f];a[f]!==void 0&&Dt(p)&&(p.set(a[f],!1),iu(u)&&u.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,Xv.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),lE.current||JN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Jf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Xv.delete(this.current),this.projection&&this.projection.unmount(),ir(this.notifyUpdate),ir(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Xi.has(e),i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&xe.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,s){let o,a;for(let c=0;c<eR;c++){const u=cE[c],{isEnabled:d,Feature:f,ProjectionNode:p,MeasureLayout:x}=Ua[u];p&&(o=p),d(n)&&(!this.features[u]&&f&&(this.features[u]=new f(this)),x&&(a=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:f,layoutScroll:p,layoutRoot:x}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||f&&Ss(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:x})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ue()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Jv.length;r++){const i=Jv[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=ZN(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<tR;r++){const i=Ip[r],s=this.props[i];(Fa(s)||s===!1)&&(n[i]=s)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Gs(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=Dp(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Dt(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new zp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class uE extends nR{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},s){let o=w2(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),o&&(o=i(o))),s){y2(this,r,o);const a=XN(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function rR(t){return window.getComputedStyle(t)}class iR extends uE{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Xi.has(n)){const r=Lp(n);return r&&r.default||0}else{const r=rR(e),i=(X1(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return XT(e,n)}build(e,n,r,i){Cp(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Rp(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Dt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){rT(e,n,r,i)}}class sR extends uE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Xi.has(n)){const r=Lp(n);return r&&r.default||0}return n=iT.has(n)?n:Ep(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ue()}scrapeMotionValuesFromProps(e,n){return oT(e,n)}build(e,n,r,i){Pp(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){sT(e,n,r,i)}mount(e){this.isSVGTag=Np(e.tagName),super.mount(e)}}const oR=(t,e)=>kp(t)?new sR(e,{enableHardwareAcceleration:!1}):new iR(e,{enableHardwareAcceleration:!0}),aR={layout:{ProjectionNode:oE,MeasureLayout:ZT}},lR={...V2,...eP,...FN,...aR},B=cA((t,e)=>BA(t,e,lR,oR));function hE(){const t=j.useRef(!1);return Tp(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function cR(){const t=hE(),[e,n]=j.useState(0),r=j.useCallback(()=>{t.current&&n(e+1)},[e]);return[j.useCallback(()=>xe.postRender(r),[r]),e]}class uR extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function hR({children:t,isPresent:e}){const n=j.useId(),r=j.useRef(null),i=j.useRef({width:0,height:0,top:0,left:0});return j.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:c}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),j.createElement(uR,{isPresent:e,childRef:r,sizeRef:i},j.cloneElement(t,{ref:r}))}const Nd=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=aT(dR),c=j.useId(),u=j.useMemo(()=>({id:c,initial:e,isPresent:n,custom:i,onExitComplete:d=>{a.set(d,!0);for(const f of a.values())if(!f)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),s?void 0:[n]);return j.useMemo(()=>{a.forEach((d,f)=>a.set(f,!1))},[n]),j.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=j.createElement(hR,{isPresent:n},t)),j.createElement(Wu.Provider,{value:u},t)};function dR(){return new Map}function fR(t){return j.useEffect(()=>()=>t(),[])}const bi=t=>t.key||"";function mR(t,e){t.forEach(n=>{const r=bi(n);e.set(r,n)})}function pR(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const Ju=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=j.useContext(bp).forceRender||cR()[0],c=hE(),u=pR(t);let d=u;const f=j.useRef(new Map).current,p=j.useRef(d),x=j.useRef(new Map).current,T=j.useRef(!0);if(Tp(()=>{T.current=!1,mR(u,x),p.current=d}),fR(()=>{T.current=!0,x.clear(),f.clear()}),T.current)return j.createElement(j.Fragment,null,d.map(y=>j.createElement(Nd,{key:bi(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:s,mode:o},y)));d=[...d];const A=p.current.map(bi),R=u.map(bi),_=A.length;for(let y=0;y<_;y++){const w=A[y];R.indexOf(w)===-1&&!f.has(w)&&f.set(w,void 0)}return o==="wait"&&f.size&&(d=[]),f.forEach((y,w)=>{if(R.indexOf(w)!==-1)return;const k=x.get(w);if(!k)return;const V=A.indexOf(w);let O=y;if(!O){const b=()=>{f.delete(w);const v=Array.from(x.keys()).filter(S=>!R.includes(S));if(v.forEach(S=>x.delete(S)),p.current=u.filter(S=>{const I=bi(S);return I===w||v.includes(I)}),!f.size){if(c.current===!1)return;a(),r&&r()}};O=j.createElement(Nd,{key:bi(k),isPresent:!1,onExitComplete:b,custom:e,presenceAffectsLayout:s,mode:o},k),f.set(w,O)}d.splice(V,0,O)}),d=d.map(y=>{const w=y.key;return f.has(w)?y:j.createElement(Nd,{key:bi(y),isPresent:!0,presenceAffectsLayout:s,mode:o},y)}),j.createElement(j.Fragment,null,f.size?d:d.map(y=>j.cloneElement(y)))};var gR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const yR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vR=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...c},u)=>j.createElement("svg",{ref:u,...gR,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${yR(t)}`,...c},[...e.map(([d,f])=>j.createElement(d,f)),...(Array.isArray(a)?a:[a])||[]]));return n.displayName=`${t}`,n};var ye=vR;const dE=ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),fE=ye("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Zv=ye("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Kn=ye("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),$a=ye("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Yt=ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ou=ye("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),wR=ye("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Rd=ye("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ao=ye("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),xR=ye("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),_R=ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),TR=ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ei=ye("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ER=ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Zu=ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),mE=ye("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Hp=ye("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),pE=ye("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),SR=ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Wp=ye("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),gE=ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),IR=ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),bR=ye("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Xt=ye("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Zf=ye("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),qp=ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kR=()=>{const[t,e]=j.useState(()=>{const r=localStorage.getItem("darkMode");return r!==null?JSON.parse(r):window.matchMedia("(prefers-color-scheme: dark)").matches});return j.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(t)),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]),[t,()=>{e(!t)}]},CR=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},AR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},vE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|u>>6,x=u&63;c||(x=64,o||(p=64)),r.push(n[d],n[f],n[p],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||f==null)throw new PR;const p=s<<2|a>>4;if(r.push(p),u!==64){const x=a<<4&240|u>>2;if(r.push(x),f!==64){const T=u<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NR=function(t){const e=yE(t);return vE.encodeByteArray(e,!0)},au=function(t){return NR(t).replace(/\./g,"")},wE=function(t){try{return vE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=()=>RR().__FIREBASE_DEFAULTS__,VR=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wE(t[1]);return e&&JSON.parse(e)},eh=()=>{try{return CR()||DR()||VR()||MR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xE=t=>{var e,n;return(n=(e=eh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},jR=t=>{const e=xE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_E=()=>{var t;return(t=eh())==null?void 0:t.config},TE=t=>{var e;return(e=eh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function EE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},a="";return[au(JSON.stringify(n)),au(JSON.stringify(o)),a].join(".")}const ga={};function FR(){const t={prod:[],emulator:[]};for(const e of Object.keys(ga))ga[e]?t.emulator.push(e):t.prod.push(e);return t}function UR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ew=!1;function SE(t,e){if(typeof window>"u"||typeof document>"u"||!lo(window.location.host)||ga[t]===e||ga[t]||ew)return;ga[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=FR().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,x){p.setAttribute("width","24"),p.setAttribute("id",x),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{ew=!0,o()},p}function d(p,x){p.setAttribute("id",x),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=UR(r),x=n("text"),T=document.getElementById(x)||document.createElement("span"),A=n("learnmore"),R=document.getElementById(A)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const w=p.element;a(w),d(R,A);const k=u();c(y,_),w.append(y,T,R,k),document.body.appendChild(w)}s?(T.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function $R(){var e;const t=(e=eh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function WR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qR(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function GR(){return!$R()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function KR(){try{return typeof indexedDB=="object"}catch{return!1}}function QR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="FirebaseError";class ur extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=YR,Object.setPrototypeOf(this,ur.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?XR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ur(i,a,r)}}function XR(t,e){return t.replace(JR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const JR=/\{\$([^}]+)}/g;function ZR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ti(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(tw(s)&&tw(o)){if(!ti(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function eD(t,e){const n=new tD(t,e);return n.subscribe.bind(n)}class tD{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");nD(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dd),i.error===void 0&&(i.error=Dd),i.complete===void 0&&(i.complete=Dd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nD(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(t){return t&&t._delegate?t._delegate:t}class Hi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sD(e))try{this.getOrInitializeService({instanceIdentifier:ki})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ki){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ki){return this.instances.has(e)}getOptions(e=ki){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:iD(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ki){return this.component?this.component.multipleInstances?e:ki:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iD(t){return t===ki?void 0:t}function sD(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rD(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const aD={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},lD=ae.INFO,cD={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},uD=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=cD[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gp{constructor(e){this.name=e,this._logLevel=lD,this._logHandler=uD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const hD=(t,e)=>e.some(n=>t instanceof n);let nw,rw;function dD(){return nw||(nw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fD(){return rw||(rw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IE=new WeakMap,em=new WeakMap,bE=new WeakMap,Vd=new WeakMap,Kp=new WeakMap;function mD(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Hr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IE.set(n,t)}).catch(()=>{}),Kp.set(e,t),e}function pD(t){if(em.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});em.set(t,e)}let tm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return em.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gD(t){tm=t(tm)}function yD(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Md(this),e,...n);return bE.set(r,e.sort?e.sort():[e]),Hr(r)}:fD().includes(t)?function(...e){return t.apply(Md(this),e),Hr(IE.get(this))}:function(...e){return Hr(t.apply(Md(this),e))}}function vD(t){return typeof t=="function"?yD(t):(t instanceof IDBTransaction&&pD(t),hD(t,dD())?new Proxy(t,tm):t)}function Hr(t){if(t instanceof IDBRequest)return mD(t);if(Vd.has(t))return Vd.get(t);const e=vD(t);return e!==t&&(Vd.set(t,e),Kp.set(e,t)),e}const Md=t=>Kp.get(t);function wD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Hr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Hr(o.result),c.oldVersion,c.newVersion,Hr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const xD=["get","getKey","getAll","getAllKeys","count"],_D=["put","add","delete","clear"],jd=new Map;function iw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=_D.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xD.includes(n)))return;const s=async function(o,...a){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&c.done]))[0]};return jd.set(e,s),s}gD(t=>({...t,get:(e,n,r)=>iw(e,n)||t.get(e,n,r),has:(e,n)=>!!iw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ED(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ED(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const nm="@firebase/app",sw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new Gp("@firebase/app"),SD="@firebase/app-compat",ID="@firebase/analytics-compat",bD="@firebase/analytics",kD="@firebase/app-check-compat",CD="@firebase/app-check",AD="@firebase/auth",PD="@firebase/auth-compat",ND="@firebase/database",RD="@firebase/data-connect",DD="@firebase/database-compat",VD="@firebase/functions",MD="@firebase/functions-compat",jD="@firebase/installations",OD="@firebase/installations-compat",LD="@firebase/messaging",FD="@firebase/messaging-compat",UD="@firebase/performance",BD="@firebase/performance-compat",$D="@firebase/remote-config",zD="@firebase/remote-config-compat",HD="@firebase/storage",WD="@firebase/storage-compat",qD="@firebase/firestore",GD="@firebase/ai",KD="@firebase/firestore-compat",QD="firebase",YD="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="[DEFAULT]",XD={[nm]:"fire-core",[SD]:"fire-core-compat",[bD]:"fire-analytics",[ID]:"fire-analytics-compat",[CD]:"fire-app-check",[kD]:"fire-app-check-compat",[AD]:"fire-auth",[PD]:"fire-auth-compat",[ND]:"fire-rtdb",[RD]:"fire-data-connect",[DD]:"fire-rtdb-compat",[VD]:"fire-fn",[MD]:"fire-fn-compat",[jD]:"fire-iid",[OD]:"fire-iid-compat",[LD]:"fire-fcm",[FD]:"fire-fcm-compat",[UD]:"fire-perf",[BD]:"fire-perf-compat",[$D]:"fire-rc",[zD]:"fire-rc-compat",[HD]:"fire-gcs",[WD]:"fire-gcs-compat",[qD]:"fire-fst",[KD]:"fire-fst-compat",[GD]:"fire-vertex","fire-js":"fire-js",[QD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Map,JD=new Map,im=new Map;function ow(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qs(t){const e=t.name;if(im.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;im.set(e,t);for(const n of lu.values())ow(n,t);for(const n of JD.values())ow(n,t);return!0}function Qp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wr=new al("app","Firebase",ZD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=YD;function kE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:rm,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Wr.create("bad-app-name",{appName:String(i)});if(n||(n=_E()),!n)throw Wr.create("no-options");const s=lu.get(i);if(s){if(ti(n,s.options)&&ti(r,s.config))return s;throw Wr.create("duplicate-app",{appName:i})}const o=new oD(i);for(const c of im.values())o.addComponent(c);const a=new eV(n,r,o);return lu.set(i,a),a}function CE(t=rm){const e=lu.get(t);if(!e&&t===rm&&_E())return kE();if(!e)throw Wr.create("no-app",{appName:t});return e}function qr(t,e,n){let r=XD[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(o.join(" "));return}Qs(new Hi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="firebase-heartbeat-database",nV=1,za="firebase-heartbeat-store";let Od=null;function AE(){return Od||(Od=wD(tV,nV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(za)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wr.create("idb-open",{originalErrorMessage:t.message})})),Od}async function rV(t){try{const n=(await AE()).transaction(za),r=await n.objectStore(za).get(PE(t));return await n.done,r}catch(e){if(e instanceof ur)sr.warn(e.message);else{const n=Wr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function aw(t,e){try{const r=(await AE()).transaction(za,"readwrite");await r.objectStore(za).put(e,PE(t)),await r.done}catch(n){if(n instanceof ur)sr.warn(n.message);else{const r=Wr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(r.message)}}}function PE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV=1024,sV=30;class oV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>sV){const o=cV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lw(),{heartbeatsToSend:r,unsentEntries:i}=aV(this._heartbeatsCache.heartbeats),s=au(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return sr.warn(n),""}}}function lw(){return new Date().toISOString().substring(0,10)}function aV(t,e=iV){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class lV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return KR()?QR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function cw(t){return au(JSON.stringify({version:2,heartbeats:t})).length}function cV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t){Qs(new Hi("platform-logger",e=>new TD(e),"PRIVATE")),Qs(new Hi("heartbeat",e=>new oV(e),"PRIVATE")),qr(nm,sw,t),qr(nm,sw,"esm2020"),qr("fire-js","")}uV("");function NE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const hV=NE,RE=new al("auth","Firebase",NE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Gp("@firebase/auth");function dV(t,...e){cu.logLevel<=ae.WARN&&cu.warn(`Auth (${co}): ${t}`,...e)}function yc(t,...e){cu.logLevel<=ae.ERROR&&cu.error(`Auth (${co}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw Xp(t,...e)}function hn(t,...e){return Xp(t,...e)}function Yp(t,e,n){const r={...hV(),[e]:n};return new al("auth","Firebase",r).create(e,{appName:t.name})}function Oi(t){return Yp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fn(t,"argument-error"),Yp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return RE.create(t,...e)}function te(t,e,...n){if(!t)throw Xp(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw yc(e),new Error(e)}function or(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function mV(){return uw()==="http:"||uw()==="https:"}function uw(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mV()||HR()||"connection"in navigator)?navigator.onLine:!0}function gV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=BR()||WR()}get(){return pV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e){or(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wV=new cl(3e4,6e4);function Zp(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function uo(t,e,n,r,i={}){return VE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ll({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...s};return zR()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&lo(t.emulatorConfig.host)&&(u.credentials="include"),DE.fetch()(await ME(t,t.config.apiHost,n,a),u)})}async function VE(t,e,n){t._canInitEmulator=!1;const r={...yV,...e};try{const i=new _V(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Xl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Xl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Xl(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Yp(t,d,u);Fn(t,d)}}catch(i){if(i instanceof ur)throw i;Fn(t,"network-request-failed",{message:String(i)})}}async function xV(t,e,n,r,i={}){const s=await uo(t,e,n,r,i);return"mfaPendingCredential"in s&&Fn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function ME(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Jp(t.config,i):`${t.config.apiScheme}://${i}`;return vV.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class _V{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),wV.get())})}}function Xl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=hn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TV(t,e){return uo(t,"POST","/v1/accounts:delete",e)}async function uu(t,e){return uo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function EV(t,e=!1){const n=Je(t),r=await n.getIdToken(e),i=eg(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ya(Ld(i.auth_time)),issuedAtTime:ya(Ld(i.iat)),expirationTime:ya(Ld(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ld(t){return Number(t)*1e3}function eg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return yc("JWT malformed, contained fewer than 3 sections"),null;try{const i=wE(n);return i?JSON.parse(i):(yc("Failed to decode base64 JWT payload"),null)}catch(i){return yc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function hw(t){const e=eg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ur&&SV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function SV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ya(this.lastLoginAt),this.creationTime=ya(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hu(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Ha(t,uu(e,{idToken:n}));te(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?jE(i.providerUserInfo):[],o=kV(t.providerData,s),a=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=a?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new om(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function bV(t){const e=Je(t);await hu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kV(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(t,e){const n=await VE(t,{},async()=>{const r=ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await ME(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&lo(t.emulatorConfig.host)&&(c.credentials="include"),DE.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function AV(t,e){return uo(t,"POST","/v2/accounts:revokeToken",Zp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=hw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await CV(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Vs;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vs,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ln{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new IV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new om(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ha(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return EV(this,e)}reload(){return bV(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ln({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await Ha(this,TV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:x,providerData:T,stsTokenManager:A}=n;te(f&&A,e,"internal-error");const R=Vs.fromJSON(this.name,A);te(typeof f=="string",e,"internal-error"),vr(r,e.name),vr(i,e.name),te(typeof p=="boolean",e,"internal-error"),te(typeof x=="boolean",e,"internal-error"),vr(s,e.name),vr(o,e.name),vr(a,e.name),vr(c,e.name),vr(u,e.name),vr(d,e.name);const _=new ln({uid:f,auth:e,email:i,emailVerified:p,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:R,createdAt:u,lastLoginAt:d});return T&&Array.isArray(T)&&(_.providerData=T.map(y=>({...y}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new Vs;i.updateFromServerResponse(n);const s=new ln({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hu(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?jE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vs;a.updateFromIdToken(r);const c=new ln({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new om(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=new Map;function Yn(t){or(t instanceof Function,"Expected a class definition");let e=dw.get(t);return e?(or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,dw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OE.type="NONE";const fw=OE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ms{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=vc(this.userKey,i.apiKey,s),this.fullPersistenceKey=vc("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await uu(this.auth,{idToken:e}).catch(()=>{});return n?ln._fromGetAccountInfoResponse(this.auth,n,e):null}return ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ms(Yn(fw),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Yn(fw);const o=vc(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const p=await uu(e,{idToken:d}).catch(()=>{});if(!p)break;f=await ln._fromGetAccountInfoResponse(e,p,d)}else f=ln._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ms(s,e,r):(s=c[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Ms(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zE(e))return"Blackberry";if(HE(e))return"Webos";if(FE(e))return"Safari";if((e.includes("chrome/")||UE(e))&&!e.includes("edge/"))return"Chrome";if($E(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LE(t=yt()){return/firefox\//i.test(t)}function FE(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UE(t=yt()){return/crios\//i.test(t)}function BE(t=yt()){return/iemobile/i.test(t)}function $E(t=yt()){return/android/i.test(t)}function zE(t=yt()){return/blackberry/i.test(t)}function HE(t=yt()){return/webos/i.test(t)}function tg(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PV(t=yt()){var e;return tg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function NV(){return qR()&&document.documentMode===10}function WE(t=yt()){return tg(t)||$E(t)||HE(t)||zE(t)||/windows phone/i.test(t)||BE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t,e=[]){let n;switch(t){case"Browser":n=mw(yt());break;case"Worker":n=`${mw(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${co}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DV(t,e={}){return uo(t,"GET","/v2/passwordPolicy",Zp(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=6;class MV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??VV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pw(this),this.idTokenSubscription=new pw(this),this.beforeStateQueue=new RV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Ms.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await uu(this,{idToken:e}),r=await ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(an(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(Oi(this));const n=e?Je(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DV(this),n=new MV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new al("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await AV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yn(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Ms.create(this,[Yn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(an(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&dV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function th(t){return Je(t)}class pw{constructor(e){this.auth=e,this.observer=null,this.addObserver=eD(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ng={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OV(t){ng=t}function LV(t){return ng.loadJS(t)}function FV(){return ng.gapiScript}function UV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t,e){const n=Qp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ti(s,e??{}))return i;Fn(i,"already-initialized")}return n.initialize({options:e})}function $V(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zV(t,e,n){const r=th(t);te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=GE(e),{host:o,port:a}=HV(e),c=a===null?"":`:${a}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){te(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),te(ti(u,r.config.emulator)&&ti(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,lo(o)?(EE(`${s}//${o}${c}`),SE("Auth",!0)):i||WV()}function GE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function HV(t){const e=GE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:gw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:gw(o)}}}function gw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function WV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function js(t,e){return xV(t,"POST","/v1/accounts:signInWithIdp",Zp(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV="http://localhost";class Wi extends KE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Wi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return js(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,js(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,js(e,n)}buildRequest(){const e={requestUri:qV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ll(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends rg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends ul{constructor(){super("facebook.com")}static credential(e){return Wi._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends ul{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wi._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hn.credential(n,r)}catch{return null}}}Hn.GOOGLE_SIGN_IN_METHOD="google.com";Hn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends ul{constructor(){super("github.com")}static credential(e){return Wi._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends ul{constructor(){super("twitter.com")}static credential(e,n){return Wi._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cr.credential(n,r)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await ln._fromIdTokenResponse(e,r,i),o=yw(r);return new Ys({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=yw(r);return new Ys({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function yw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends ur{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,du.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new du(e,n,r,i)}}function QE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?du._fromErrorAndOperation(t,s,e,r):s})}async function GV(t,e,n=!1){const r=await Ha(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ys._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KV(t,e,n=!1){const{auth:r}=t;if(an(r.app))return Promise.reject(Oi(r));const i="reauthenticate";try{const s=await Ha(t,QE(r,i,e,t),n);te(s.idToken,r,"internal-error");const o=eg(s.idToken);te(o,r,"internal-error");const{sub:a}=o;return te(t.uid===a,r,"user-mismatch"),Ys._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Fn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QV(t,e,n=!1){if(an(t.app))return Promise.reject(Oi(t));const r="signIn",i=await QE(t,r,e),s=await Ys._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function YV(t,e,n,r){return Je(t).onIdTokenChanged(e,n,r)}function XV(t,e,n){return Je(t).beforeAuthStateChanged(e,n)}function JV(t,e,n,r){return Je(t).onAuthStateChanged(e,n,r)}function ZV(t){return Je(t).signOut()}const fu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fu,"1"),this.storage.removeItem(fu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4=1e3,t4=10;class XE extends YE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);NV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,t4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},e4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XE.type="LOCAL";const n4=XE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends YE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}JE.type="SESSION";const ZE=JE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new nh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),c=await r4(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=ig("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(){return window}function s4(t){Dn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(){return typeof Dn().WorkerGlobalScope<"u"&&typeof Dn().importScripts=="function"}async function o4(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function a4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function l4(){return eS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="firebaseLocalStorageDb",c4=1,mu="firebaseLocalStorage",nS="fbase_key";class hl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rh(t,e){return t.transaction([mu],e?"readwrite":"readonly").objectStore(mu)}function u4(){const t=indexedDB.deleteDatabase(tS);return new hl(t).toPromise()}function am(){const t=indexedDB.open(tS,c4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mu,{keyPath:nS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mu)?e(r):(r.close(),await u4(),e(await am()))})})}async function vw(t,e,n){const r=rh(t,!0).put({[nS]:e,value:n});return new hl(r).toPromise()}async function h4(t,e){const n=rh(t,!1).get(e),r=await new hl(n).toPromise();return r===void 0?null:r.value}function ww(t,e){const n=rh(t,!0).delete(e);return new hl(n).toPromise()}const d4=800,f4=3;class rS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>f4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(l4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await o4(),!this.activeServiceWorker)return;this.sender=new i4(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||a4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await vw(e,fu,"1"),await ww(e,fu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>h4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ww(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=rh(i,!1).getAll();return new hl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rS.type="LOCAL";const m4=rS;new cl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t,e){return e?Yn(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends KE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return js(e,this._buildIdpRequest())}_linkToIdToken(e,n){return js(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return js(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p4(t){return QV(t.auth,new sg(t),t.bypassAuthState)}function g4(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),KV(n,new sg(t),t.bypassAuthState)}async function y4(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),GV(n,new sg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p4;case"linkViaPopup":case"linkViaRedirect":return y4;case"reauthViaPopup":case"reauthViaRedirect":return g4;default:Fn(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v4=new cl(2e3,1e4);async function w4(t,e,n){if(an(t.app))return Promise.reject(hn(t,"operation-not-supported-in-this-environment"));const r=th(t);fV(t,e,rg);const i=iS(r,n);return new Di(r,"signInViaPopup",e,i).executeNotNull()}class Di extends sS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Di.currentPopupAction&&Di.currentPopupAction.cancel(),Di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=ig();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v4.get())};e()}}Di.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="pendingRedirect",wc=new Map;class _4 extends sS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wc.get(this.auth._key());if(!e){try{const r=await T4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wc.set(this.auth._key(),e)}return this.bypassAuthState||wc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T4(t,e){const n=I4(e),r=S4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function E4(t,e){wc.set(t._key(),e)}function S4(t){return Yn(t._redirectPersistence)}function I4(t){return vc(x4,t.config.apiKey,t.name)}async function b4(t,e,n=!1){if(an(t.app))return Promise.reject(Oi(t));const r=th(t),i=iS(r,e),o=await new _4(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4=10*60*1e3;class C4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!oS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=k4&&this.cachedEventUids.clear(),this.cachedEventUids.has(xw(e))}saveEventToCache(e){this.cachedEventUids.add(xw(e)),this.lastProcessedEventTime=Date.now()}}function xw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function A4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P4(t,e={}){return uo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R4=/^https?/;async function D4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await P4(t);for(const n of e)try{if(V4(n))return}catch{}Fn(t,"unauthorized-domain")}function V4(t){const e=sm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!R4.test(n))return!1;if(N4.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=new cl(3e4,6e4);function _w(){const t=Dn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function j4(t){return new Promise((e,n)=>{var i,s,o;function r(){_w(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_w(),n(hn(t,"network-request-failed"))},timeout:M4.get()})}if((s=(i=Dn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Dn().gapi)!=null&&o.load)r();else{const a=UV("iframefcb");return Dn()[a]=()=>{gapi.load?r():n(hn(t,"network-request-failed"))},LV(`${FV()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw xc=null,e})}let xc=null;function O4(t){return xc=xc||j4(t),xc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=new cl(5e3,15e3),F4="__/auth/iframe",U4="emulator/auth/iframe",B4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z4(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Jp(e,U4):`https://${t.config.authDomain}/${F4}`,r={apiKey:e.apiKey,appName:t.name,v:co},i=$4.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ll(r).slice(1)}`}async function H4(t){const e=await O4(t),n=Dn().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:z4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B4,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),a=Dn().setTimeout(()=>{s(o)},L4.get());function c(){Dn().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q4=500,G4=600,K4="_blank",Q4="http://localhost";class Tw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y4(t,e,n,r=q4,i=G4){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c={...W4,width:r.toString(),height:i.toString(),top:s,left:o},u=yt().toLowerCase();n&&(a=UE(u)?K4:n),LE(u)&&(e=e||Q4,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[x,T])=>`${p}${x}=${T},`,"");if(PV(u)&&a!=="_self")return X4(e||"",a),new Tw(null);const f=window.open(e||"",a,d);te(f,t,"popup-blocked");try{f.focus()}catch{}return new Tw(f)}function X4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="__/auth/handler",Z4="emulator/auth/handler",eM=encodeURIComponent("fac");async function Ew(t,e,n,r,i,s){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:co,eventId:i};if(e instanceof rg){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof ul){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const c=await t._getAppCheckToken(),u=c?`#${eM}=${encodeURIComponent(c)}`:"";return`${tM(t)}?${ll(a).slice(1)}${u}`}function tM({config:t}){return t.emulator?Jp(t,Z4):`https://${t.authDomain}/${J4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="webStorageSupport";class nM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZE,this._completeRedirectFn=b4,this._overrideRedirectResult=E4}async _openPopup(e,n,r,i){var o;or((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Ew(e,n,r,sm(),i);return Y4(e,s,ig())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ew(e,n,r,sm(),i);return s4(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(or(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H4(e),r=new C4(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fd,{type:Fd},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Fd];s!==void 0&&n(!!s),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WE()||FE()||tg()}}const rM=nM;var Sw="@firebase/auth",Iw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oM(t){Qs(new Hi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qE(t)},u=new jV(r,i,s,c);return $V(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qs(new Hi("auth-internal",e=>{const n=th(e.getProvider("auth").getImmediate());return(r=>new iM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qr(Sw,Iw,sM(t)),qr(Sw,Iw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=5*60,lM=TE("authIdTokenMaxAge")||aM;let bw=null;const cM=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lM)return;const i=n==null?void 0:n.token;bw!==i&&(bw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uM(t=CE()){const e=Qp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=BV(t,{popupRedirectResolver:rM,persistence:[m4,n4,ZE]}),r=TE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=cM(s.toString());XV(n,o,()=>o(n.currentUser)),YV(n,a=>o(a))}}const i=xE("auth");return i&&zV(n,`http://${i}`),n}function hM(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}OV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=hn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",hM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oM("Browser");var dM="firebase",fM="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(dM,fM,"app");var kw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gr,aS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,v){function S(){}S.prototype=v.prototype,b.F=v.prototype,b.prototype=new S,b.prototype.constructor=b,b.D=function(I,P,N){for(var C=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)C[Y-2]=arguments[Y];return v.prototype[P].apply(I,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,v,S){S||(S=0);const I=Array(16);if(typeof v=="string")for(var P=0;P<16;++P)I[P]=v.charCodeAt(S++)|v.charCodeAt(S++)<<8|v.charCodeAt(S++)<<16|v.charCodeAt(S++)<<24;else for(P=0;P<16;++P)I[P]=v[S++]|v[S++]<<8|v[S++]<<16|v[S++]<<24;v=b.g[0],S=b.g[1],P=b.g[2];let N=b.g[3],C;C=v+(N^S&(P^N))+I[0]+3614090360&4294967295,v=S+(C<<7&4294967295|C>>>25),C=N+(P^v&(S^P))+I[1]+3905402710&4294967295,N=v+(C<<12&4294967295|C>>>20),C=P+(S^N&(v^S))+I[2]+606105819&4294967295,P=N+(C<<17&4294967295|C>>>15),C=S+(v^P&(N^v))+I[3]+3250441966&4294967295,S=P+(C<<22&4294967295|C>>>10),C=v+(N^S&(P^N))+I[4]+4118548399&4294967295,v=S+(C<<7&4294967295|C>>>25),C=N+(P^v&(S^P))+I[5]+1200080426&4294967295,N=v+(C<<12&4294967295|C>>>20),C=P+(S^N&(v^S))+I[6]+2821735955&4294967295,P=N+(C<<17&4294967295|C>>>15),C=S+(v^P&(N^v))+I[7]+4249261313&4294967295,S=P+(C<<22&4294967295|C>>>10),C=v+(N^S&(P^N))+I[8]+1770035416&4294967295,v=S+(C<<7&4294967295|C>>>25),C=N+(P^v&(S^P))+I[9]+2336552879&4294967295,N=v+(C<<12&4294967295|C>>>20),C=P+(S^N&(v^S))+I[10]+4294925233&4294967295,P=N+(C<<17&4294967295|C>>>15),C=S+(v^P&(N^v))+I[11]+2304563134&4294967295,S=P+(C<<22&4294967295|C>>>10),C=v+(N^S&(P^N))+I[12]+1804603682&4294967295,v=S+(C<<7&4294967295|C>>>25),C=N+(P^v&(S^P))+I[13]+4254626195&4294967295,N=v+(C<<12&4294967295|C>>>20),C=P+(S^N&(v^S))+I[14]+2792965006&4294967295,P=N+(C<<17&4294967295|C>>>15),C=S+(v^P&(N^v))+I[15]+1236535329&4294967295,S=P+(C<<22&4294967295|C>>>10),C=v+(P^N&(S^P))+I[1]+4129170786&4294967295,v=S+(C<<5&4294967295|C>>>27),C=N+(S^P&(v^S))+I[6]+3225465664&4294967295,N=v+(C<<9&4294967295|C>>>23),C=P+(v^S&(N^v))+I[11]+643717713&4294967295,P=N+(C<<14&4294967295|C>>>18),C=S+(N^v&(P^N))+I[0]+3921069994&4294967295,S=P+(C<<20&4294967295|C>>>12),C=v+(P^N&(S^P))+I[5]+3593408605&4294967295,v=S+(C<<5&4294967295|C>>>27),C=N+(S^P&(v^S))+I[10]+38016083&4294967295,N=v+(C<<9&4294967295|C>>>23),C=P+(v^S&(N^v))+I[15]+3634488961&4294967295,P=N+(C<<14&4294967295|C>>>18),C=S+(N^v&(P^N))+I[4]+3889429448&4294967295,S=P+(C<<20&4294967295|C>>>12),C=v+(P^N&(S^P))+I[9]+568446438&4294967295,v=S+(C<<5&4294967295|C>>>27),C=N+(S^P&(v^S))+I[14]+3275163606&4294967295,N=v+(C<<9&4294967295|C>>>23),C=P+(v^S&(N^v))+I[3]+4107603335&4294967295,P=N+(C<<14&4294967295|C>>>18),C=S+(N^v&(P^N))+I[8]+1163531501&4294967295,S=P+(C<<20&4294967295|C>>>12),C=v+(P^N&(S^P))+I[13]+2850285829&4294967295,v=S+(C<<5&4294967295|C>>>27),C=N+(S^P&(v^S))+I[2]+4243563512&4294967295,N=v+(C<<9&4294967295|C>>>23),C=P+(v^S&(N^v))+I[7]+1735328473&4294967295,P=N+(C<<14&4294967295|C>>>18),C=S+(N^v&(P^N))+I[12]+2368359562&4294967295,S=P+(C<<20&4294967295|C>>>12),C=v+(S^P^N)+I[5]+4294588738&4294967295,v=S+(C<<4&4294967295|C>>>28),C=N+(v^S^P)+I[8]+2272392833&4294967295,N=v+(C<<11&4294967295|C>>>21),C=P+(N^v^S)+I[11]+1839030562&4294967295,P=N+(C<<16&4294967295|C>>>16),C=S+(P^N^v)+I[14]+4259657740&4294967295,S=P+(C<<23&4294967295|C>>>9),C=v+(S^P^N)+I[1]+2763975236&4294967295,v=S+(C<<4&4294967295|C>>>28),C=N+(v^S^P)+I[4]+1272893353&4294967295,N=v+(C<<11&4294967295|C>>>21),C=P+(N^v^S)+I[7]+4139469664&4294967295,P=N+(C<<16&4294967295|C>>>16),C=S+(P^N^v)+I[10]+3200236656&4294967295,S=P+(C<<23&4294967295|C>>>9),C=v+(S^P^N)+I[13]+681279174&4294967295,v=S+(C<<4&4294967295|C>>>28),C=N+(v^S^P)+I[0]+3936430074&4294967295,N=v+(C<<11&4294967295|C>>>21),C=P+(N^v^S)+I[3]+3572445317&4294967295,P=N+(C<<16&4294967295|C>>>16),C=S+(P^N^v)+I[6]+76029189&4294967295,S=P+(C<<23&4294967295|C>>>9),C=v+(S^P^N)+I[9]+3654602809&4294967295,v=S+(C<<4&4294967295|C>>>28),C=N+(v^S^P)+I[12]+3873151461&4294967295,N=v+(C<<11&4294967295|C>>>21),C=P+(N^v^S)+I[15]+530742520&4294967295,P=N+(C<<16&4294967295|C>>>16),C=S+(P^N^v)+I[2]+3299628645&4294967295,S=P+(C<<23&4294967295|C>>>9),C=v+(P^(S|~N))+I[0]+4096336452&4294967295,v=S+(C<<6&4294967295|C>>>26),C=N+(S^(v|~P))+I[7]+1126891415&4294967295,N=v+(C<<10&4294967295|C>>>22),C=P+(v^(N|~S))+I[14]+2878612391&4294967295,P=N+(C<<15&4294967295|C>>>17),C=S+(N^(P|~v))+I[5]+4237533241&4294967295,S=P+(C<<21&4294967295|C>>>11),C=v+(P^(S|~N))+I[12]+1700485571&4294967295,v=S+(C<<6&4294967295|C>>>26),C=N+(S^(v|~P))+I[3]+2399980690&4294967295,N=v+(C<<10&4294967295|C>>>22),C=P+(v^(N|~S))+I[10]+4293915773&4294967295,P=N+(C<<15&4294967295|C>>>17),C=S+(N^(P|~v))+I[1]+2240044497&4294967295,S=P+(C<<21&4294967295|C>>>11),C=v+(P^(S|~N))+I[8]+1873313359&4294967295,v=S+(C<<6&4294967295|C>>>26),C=N+(S^(v|~P))+I[15]+4264355552&4294967295,N=v+(C<<10&4294967295|C>>>22),C=P+(v^(N|~S))+I[6]+2734768916&4294967295,P=N+(C<<15&4294967295|C>>>17),C=S+(N^(P|~v))+I[13]+1309151649&4294967295,S=P+(C<<21&4294967295|C>>>11),C=v+(P^(S|~N))+I[4]+4149444226&4294967295,v=S+(C<<6&4294967295|C>>>26),C=N+(S^(v|~P))+I[11]+3174756917&4294967295,N=v+(C<<10&4294967295|C>>>22),C=P+(v^(N|~S))+I[2]+718787259&4294967295,P=N+(C<<15&4294967295|C>>>17),C=S+(N^(P|~v))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.v=function(b,v){v===void 0&&(v=b.length);const S=v-this.blockSize,I=this.C;let P=this.h,N=0;for(;N<v;){if(P==0)for(;N<=S;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<v;)if(I[P++]=b.charCodeAt(N++),P==this.blockSize){i(this,I),P=0;break}}else for(;N<v;)if(I[P++]=b[N++],P==this.blockSize){i(this,I),P=0;break}}this.h=P,this.o+=v},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;v=this.o*8;for(var S=b.length-8;S<b.length;++S)b[S]=v&255,v/=256;for(this.v(b),b=Array(16),v=0,S=0;S<4;++S)for(let I=0;I<32;I+=8)b[v++]=this.g[S]>>>I&255;return b};function s(b,v){var S=a;return Object.prototype.hasOwnProperty.call(S,b)?S[b]:S[b]=v(b)}function o(b,v){this.h=v;const S=[];let I=!0;for(let P=b.length-1;P>=0;P--){const N=b[P]|0;I&&N==v||(S[P]=N,I=!1)}this.g=S}var a={};function c(b){return-128<=b&&b<128?s(b,function(v){return new o([v|0],v<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(b<0)return R(u(-b));const v=[];let S=1;for(let I=0;b>=S;I++)v[I]=b/S|0,S*=4294967296;return new o(v,0)}function d(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return R(d(b.substring(1),v));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const S=u(Math.pow(v,8));let I=f;for(let N=0;N<b.length;N+=8){var P=Math.min(8,b.length-N);const C=parseInt(b.substring(N,N+P),v);P<8?(P=u(Math.pow(v,P)),I=I.j(P).add(u(C))):(I=I.j(S),I=I.add(u(C)))}return I}var f=c(0),p=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-R(this).m();let b=0,v=1;for(let S=0;S<this.g.length;S++){const I=this.i(S);b+=(I>=0?I:4294967296+I)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(T(this))return"0";if(A(this))return"-"+R(this).toString(b);const v=u(Math.pow(b,6));var S=this;let I="";for(;;){const P=k(S,v).g;S=_(S,P.j(v));let N=((S.g.length>0?S.g[0]:S.h)>>>0).toString(b);if(S=P,T(S))return N+I;for(;N.length<6;)N="0"+N;I=N+I}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function T(b){if(b.h!=0)return!1;for(let v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function A(b){return b.h==-1}t.l=function(b){return b=_(this,b),A(b)?-1:T(b)?0:1};function R(b){const v=b.g.length,S=[];for(let I=0;I<v;I++)S[I]=~b.g[I];return new o(S,~b.h).add(p)}t.abs=function(){return A(this)?R(this):this},t.add=function(b){const v=Math.max(this.g.length,b.g.length),S=[];let I=0;for(let P=0;P<=v;P++){let N=I+(this.i(P)&65535)+(b.i(P)&65535),C=(N>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);I=C>>>16,N&=65535,C&=65535,S[P]=C<<16|N}return new o(S,S[S.length-1]&-2147483648?-1:0)};function _(b,v){return b.add(R(v))}t.j=function(b){if(T(this)||T(b))return f;if(A(this))return A(b)?R(this).j(R(b)):R(R(this).j(b));if(A(b))return R(this.j(R(b)));if(this.l(x)<0&&b.l(x)<0)return u(this.m()*b.m());const v=this.g.length+b.g.length,S=[];for(var I=0;I<2*v;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(let P=0;P<b.g.length;P++){const N=this.i(I)>>>16,C=this.i(I)&65535,Y=b.i(P)>>>16,ee=b.i(P)&65535;S[2*I+2*P]+=C*ee,y(S,2*I+2*P),S[2*I+2*P+1]+=N*ee,y(S,2*I+2*P+1),S[2*I+2*P+1]+=C*Y,y(S,2*I+2*P+1),S[2*I+2*P+2]+=N*Y,y(S,2*I+2*P+2)}for(b=0;b<v;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=v;b<2*v;b++)S[b]=0;return new o(S,0)};function y(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function w(b,v){this.g=b,this.h=v}function k(b,v){if(T(v))throw Error("division by zero");if(T(b))return new w(f,f);if(A(b))return v=k(R(b),v),new w(R(v.g),R(v.h));if(A(v))return v=k(b,R(v)),new w(R(v.g),v.h);if(b.g.length>30){if(A(b)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var S=p,I=v;I.l(b)<=0;)S=V(S),I=V(I);var P=O(S,1),N=O(I,1);for(I=O(I,2),S=O(S,2);!T(I);){var C=N.add(I);C.l(b)<=0&&(P=P.add(S),N=C),I=O(I,1),S=O(S,1)}return v=_(b,P.j(v)),new w(P,v)}for(P=f;b.l(v)>=0;){for(S=Math.max(1,Math.floor(b.m()/v.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),N=u(S),C=N.j(v);A(C)||C.l(b)>0;)S-=I,N=u(S),C=N.j(v);T(N)&&(N=p),P=P.add(N),b=_(b,C)}return new w(P,b)}t.B=function(b){return k(this,b).h},t.and=function(b){const v=Math.max(this.g.length,b.g.length),S=[];for(let I=0;I<v;I++)S[I]=this.i(I)&b.i(I);return new o(S,this.h&b.h)},t.or=function(b){const v=Math.max(this.g.length,b.g.length),S=[];for(let I=0;I<v;I++)S[I]=this.i(I)|b.i(I);return new o(S,this.h|b.h)},t.xor=function(b){const v=Math.max(this.g.length,b.g.length),S=[];for(let I=0;I<v;I++)S[I]=this.i(I)^b.i(I);return new o(S,this.h^b.h)};function V(b){const v=b.g.length+1,S=[];for(let I=0;I<v;I++)S[I]=b.i(I)<<1|b.i(I-1)>>>31;return new o(S,b.h)}function O(b,v){const S=v>>5;v%=32;const I=b.g.length-S,P=[];for(let N=0;N<I;N++)P[N]=v>0?b.i(N+S)>>>v|b.i(N+S+1)<<32-v:b.i(N+S);return new o(P,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,aS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Gr=o}).apply(typeof kw<"u"?kw:typeof self<"u"?self:typeof window<"u"?window:{});var Jl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lS,Jo,cS,_c,lm,uS,hS,dS;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jl=="object"&&Jl];for(var m=0;m<l.length;++m){var g=l[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(l,m){if(m)e:{var g=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var D=l[E];if(!(D in g))break e;g=g[D]}l=l[l.length-1],E=g[l],m=m(E),m!=E&&m!=null&&e(g,l,{configurable:!0,writable:!0,value:m})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(m){var g=[],E;for(E in m)Object.prototype.hasOwnProperty.call(m,E)&&g.push([E,m[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(l){var m=typeof l;return m=="object"&&l!=null||m=="function"}function c(l,m,g){return l.call.apply(l.bind,arguments)}function u(l,m,g){return u=c,u.apply(null,arguments)}function d(l,m){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function f(l,m){function g(){}g.prototype=m.prototype,l.Z=m.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(E,D,M){for(var z=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)z[ie-2]=arguments[ie];return m.prototype[D].apply(E,z)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function x(l){const m=l.length;if(m>0){const g=Array(m);for(let E=0;E<m;E++)g[E]=l[E];return g}return[]}function T(l,m){for(let E=1;E<arguments.length;E++){const D=arguments[E];var g=typeof D;if(g=g!="object"?g:D?Array.isArray(D)?"array":g:"null",g=="array"||g=="object"&&typeof D.length=="number"){g=l.length||0;const M=D.length||0;l.length=g+M;for(let z=0;z<M;z++)l[g+z]=D[z]}else l.push(D)}}class A{constructor(m,g){this.i=m,this.j=g,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function R(l){o.setTimeout(()=>{throw l},0)}function _(){var l=b;let m=null;return l.g&&(m=l.g,l.g=l.g.next,l.g||(l.h=null),m.next=null),m}class y{constructor(){this.h=this.g=null}add(m,g){const E=w.get();E.set(m,g),this.h?this.h.next=E:this.g=E,this.h=E}}var w=new A(()=>new k,l=>l.reset());class k{constructor(){this.next=this.g=this.h=null}set(m,g){this.h=m,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,O=!1,b=new y,v=()=>{const l=Promise.resolve(void 0);V=()=>{l.then(S)}};function S(){for(var l;l=_();){try{l.h.call(l.g)}catch(g){R(g)}var m=w;m.j(l),m.h<100&&(m.h++,l.next=m.g,m.g=l)}O=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(l,m){this.type=l,this.g=this.target=m,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,m=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,m),o.removeEventListener("test",g,m)}catch{}return l}();function C(l){return/^[\s\xa0]*$/.test(l)}function Y(l,m){P.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,m)}f(Y,P),Y.prototype.init=function(l,m){const g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=m,m=l.relatedTarget,m||(g=="mouseover"?m=l.fromElement:g=="mouseout"&&(m=l.toElement)),this.relatedTarget=m,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&Y.Z.h.call(this)},Y.prototype.h=function(){Y.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),oe=0;function Me(l,m,g,E,D){this.listener=l,this.proxy=null,this.src=m,this.type=g,this.capture=!!E,this.ha=D,this.key=++oe,this.da=this.fa=!1}function H(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function $(l,m,g){for(const E in l)m.call(g,l[E],E,l)}function K(l,m){for(const g in l)m.call(void 0,l[g],g,l)}function X(l){const m={};for(const g in l)m[g]=l[g];return m}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vn(l,m){let g,E;for(let D=1;D<arguments.length;D++){E=arguments[D];for(g in E)l[g]=E[g];for(let M=0;M<pe.length;M++)g=pe[M],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function vt(l){this.src=l,this.g={},this.h=0}vt.prototype.add=function(l,m,g,E,D){const M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);const z=Ze(l,m,E,D);return z>-1?(m=l[z],g||(m.fa=!1)):(m=new Me(m,this.src,M,!!E,D),m.fa=g,l.push(m)),m};function wn(l,m){const g=m.type;if(g in l.g){var E=l.g[g],D=Array.prototype.indexOf.call(E,m,void 0),M;(M=D>=0)&&Array.prototype.splice.call(E,D,1),M&&(H(m),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Ze(l,m,g,E){for(let D=0;D<l.length;++D){const M=l[D];if(!M.da&&M.listener==m&&M.capture==!!g&&M.ha==E)return D}return-1}var tn="closure_lm_"+(Math.random()*1e6|0),xo={};function ns(l,m,g,E,D){if(E&&E.once)return Ih(l,m,g,E,D);if(Array.isArray(m)){for(let M=0;M<m.length;M++)ns(l,m[M],g,E,D);return null}return g=Ah(g),l&&l[ee]?l.J(m,g,a(E)?!!E.capture:!!E,D):pi(l,m,g,!1,E,D)}function pi(l,m,g,E,D,M){if(!m)throw Error("Invalid event type");const z=a(D)?!!D.capture:!!D;let ie=kh(l);if(ie||(l[tn]=ie=new vt(l)),g=ie.add(m,g,E,z,M),g.proxy)return g;if(E=Bn(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)N||(D=z),D===void 0&&(D=!1),l.addEventListener(m.toString(),E,D);else if(l.attachEvent)l.attachEvent(Wg(m.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Bn(){function l(g){return m.call(l.src,l.listener,g)}const m=eb;return l}function Ih(l,m,g,E,D){if(Array.isArray(m)){for(let M=0;M<m.length;M++)Ih(l,m[M],g,E,D);return null}return g=Ah(g),l&&l[ee]?l.K(m,g,a(E)?!!E.capture:!!E,D):pi(l,m,g,!0,E,D)}function Hg(l,m,g,E,D){if(Array.isArray(m))for(var M=0;M<m.length;M++)Hg(l,m[M],g,E,D);else E=a(E)?!!E.capture:!!E,g=Ah(g),l&&l[ee]?(l=l.i,M=String(m).toString(),M in l.g&&(m=l.g[M],g=Ze(m,g,E,D),g>-1&&(H(m[g]),Array.prototype.splice.call(m,g,1),m.length==0&&(delete l.g[M],l.h--)))):l&&(l=kh(l))&&(m=l.g[m.toString()],l=-1,m&&(l=Ze(m,g,E,D)),(g=l>-1?m[l]:null)&&bh(g))}function bh(l){if(typeof l!="number"&&l&&!l.da){var m=l.src;if(m&&m[ee])wn(m.i,l);else{var g=l.type,E=l.proxy;m.removeEventListener?m.removeEventListener(g,E,l.capture):m.detachEvent?m.detachEvent(Wg(g),E):m.addListener&&m.removeListener&&m.removeListener(E),(g=kh(m))?(wn(g,l),g.h==0&&(g.src=null,m[tn]=null)):H(l)}}}function Wg(l){return l in xo?xo[l]:xo[l]="on"+l}function eb(l,m){if(l.da)l=!0;else{m=new Y(m,this);const g=l.listener,E=l.ha||l.src;l.fa&&bh(l),l=g.call(E,m)}return l}function kh(l){return l=l[tn],l instanceof vt?l:null}var Ch="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ah(l){return typeof l=="function"?l:(l[Ch]||(l[Ch]=function(m){return l.handleEvent(m)}),l[Ch])}function at(){I.call(this),this.i=new vt(this),this.M=this,this.G=null}f(at,I),at.prototype[ee]=!0,at.prototype.removeEventListener=function(l,m,g,E){Hg(this,l,m,g,E)};function wt(l,m){var g,E=l.G;if(E)for(g=[];E;E=E.G)g.push(E);if(l=l.M,E=m.type||m,typeof m=="string")m=new P(m,l);else if(m instanceof P)m.target=m.target||l;else{var D=m;m=new P(E,l),vn(m,D)}D=!0;let M,z;if(g)for(z=g.length-1;z>=0;z--)M=m.g=g[z],D=vl(M,E,!0,m)&&D;if(M=m.g=l,D=vl(M,E,!0,m)&&D,D=vl(M,E,!1,m)&&D,g)for(z=0;z<g.length;z++)M=m.g=g[z],D=vl(M,E,!1,m)&&D}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var l=this.i;for(const m in l.g){const g=l.g[m];for(let E=0;E<g.length;E++)H(g[E]);delete l.g[m],l.h--}}this.G=null},at.prototype.J=function(l,m,g,E){return this.i.add(String(l),m,!1,g,E)},at.prototype.K=function(l,m,g,E){return this.i.add(String(l),m,!0,g,E)};function vl(l,m,g,E){if(m=l.i.g[String(m)],!m)return!0;m=m.concat();let D=!0;for(let M=0;M<m.length;++M){const z=m[M];if(z&&!z.da&&z.capture==g){const ie=z.listener,He=z.ha||z.src;z.fa&&wn(l.i,z),D=ie.call(He,E)!==!1&&D}}return D&&!E.defaultPrevented}function tb(l,m){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=u(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(l,m||0)}function qg(l){l.g=tb(()=>{l.g=null,l.i&&(l.i=!1,qg(l))},l.l);const m=l.h;l.h=null,l.m.apply(null,m)}class nb extends I{constructor(m,g){super(),this.m=m,this.l=g,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:qg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(l){I.call(this),this.h=l,this.g={}}f(_o,I);var Gg=[];function Kg(l){$(l.g,function(m,g){this.g.hasOwnProperty(g)&&bh(m)},l),l.g={}}_o.prototype.N=function(){_o.Z.N.call(this),Kg(this)},_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ph=o.JSON.stringify,rb=o.JSON.parse,ib=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Qg(){}function Yg(){}var To={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Nh(){P.call(this,"d")}f(Nh,P);function Rh(){P.call(this,"c")}f(Rh,P);var gi={},Xg=null;function wl(){return Xg=Xg||new at}gi.Ia="serverreachability";function Jg(l){P.call(this,gi.Ia,l)}f(Jg,P);function Eo(l){const m=wl();wt(m,new Jg(m))}gi.STAT_EVENT="statevent";function Zg(l,m){P.call(this,gi.STAT_EVENT,l),this.stat=m}f(Zg,P);function xt(l){const m=wl();wt(m,new Zg(m,l))}gi.Ja="timingevent";function ey(l,m){P.call(this,gi.Ja,l),this.size=m}f(ey,P);function So(l,m){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},m)}function Io(){this.g=!0}Io.prototype.ua=function(){this.g=!1};function sb(l,m,g,E,D,M){l.info(function(){if(l.g)if(M){var z="",ie=M.split("&");for(let ge=0;ge<ie.length;ge++){var He=ie[ge].split("=");if(He.length>1){const Ke=He[0];He=He[1];const _n=Ke.split("_");z=_n.length>=2&&_n[1]=="type"?z+(Ke+"="+He+"&"):z+(Ke+"=redacted&")}}}else z=null;else z=M;return"XMLHTTP REQ ("+E+") [attempt "+D+"]: "+m+`
`+g+`
`+z})}function ob(l,m,g,E,D,M,z){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+D+"]: "+m+`
`+g+`
`+M+" "+z})}function rs(l,m,g,E){l.info(function(){return"XMLHTTP TEXT ("+m+"): "+lb(l,g)+(E?" "+E:"")})}function ab(l,m){l.info(function(){return"TIMEOUT: "+m})}Io.prototype.info=function(){};function lb(l,m){if(!l.g)return m;if(!m)return null;try{const M=JSON.parse(m);if(M){for(l=0;l<M.length;l++)if(Array.isArray(M[l])){var g=M[l];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var D=E[0];if(D!="noop"&&D!="stop"&&D!="close")for(let z=1;z<E.length;z++)E[z]=""}}}}return Ph(M)}catch{return m}}var xl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ty={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ny;function Dh(){}f(Dh,Qg),Dh.prototype.g=function(){return new XMLHttpRequest},ny=new Dh;function bo(l){return encodeURIComponent(String(l))}function cb(l){var m=1;l=l.split(":");const g=[];for(;m>0&&l.length;)g.push(l.shift()),m--;return l.length&&g.push(l.join(":")),g}function hr(l,m,g,E){this.j=l,this.i=m,this.l=g,this.S=E||1,this.V=new _o(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ry}function ry(){this.i=null,this.g="",this.h=!1}var iy={},Vh={};function Mh(l,m,g){l.M=1,l.A=Tl(xn(m)),l.u=g,l.R=!0,sy(l,null)}function sy(l,m){l.F=Date.now(),_l(l),l.B=xn(l.A);var g=l.B,E=l.S;Array.isArray(E)||(E=[String(E)]),vy(g.i,"t",E),l.C=0,g=l.j.L,l.h=new ry,l.g=jy(l.j,g?m:null,!l.u),l.P>0&&(l.O=new nb(u(l.Y,l,l.g),l.P)),m=l.V,g=l.g,E=l.ba;var D="readystatechange";Array.isArray(D)||(D&&(Gg[0]=D.toString()),D=Gg);for(let M=0;M<D.length;M++){const z=ns(g,D[M],E||m.handleEvent,!1,m.h||m);if(!z)break;m.g[z.key]=z}m=l.J?X(l.J):{},l.u?(l.v||(l.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,m)):(l.v="GET",l.g.ea(l.B,l.v,null,m)),Eo(),sb(l.i,l.v,l.B,l.l,l.S,l.u)}hr.prototype.ba=function(l){l=l.target;const m=this.O;m&&mr(l)==3?m.j():this.Y(l)},hr.prototype.Y=function(l){try{if(l==this.g)e:{const ie=mr(this.g),He=this.g.ya(),ge=this.g.ca();if(!(ie<3)&&(ie!=3||this.g&&(this.h.h||this.g.la()||Iy(this.g)))){this.K||ie!=4||He==7||(He==8||ge<=0?Eo(3):Eo(2)),jh(this);var m=this.g.ca();this.X=m;var g=ub(this);if(this.o=m==200,ob(this.i,this.v,this.B,this.l,this.S,ie,m),this.o){if(this.U&&!this.L){t:{if(this.g){var E,D=this.g;if((E=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(E)){var M=E;break t}}M=null}if(l=M)rs(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Oh(this,l);else{this.o=!1,this.m=3,xt(12),yi(this),ko(this);break e}}if(this.R){l=!0;let Ke;for(;!this.K&&this.C<g.length;)if(Ke=hb(this,g),Ke==Vh){ie==4&&(this.m=4,xt(14),l=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ke==iy){this.m=4,xt(15),rs(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else rs(this.i,this.l,Ke,null),Oh(this,Ke);if(oy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||g.length!=0||this.h.h||(this.m=1,xt(16),l=!1),this.o=this.o&&l,!l)rs(this.i,this.l,g,"[Invalid Chunked Response]"),yi(this),ko(this);else if(g.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Wh(z),z.P=!0,xt(11))}}else rs(this.i,this.l,g,null),Oh(this,g);ie==4&&yi(this),this.o&&!this.K&&(ie==4?Ry(this.j,this):(this.o=!1,_l(this)))}else Ib(this.g),m==400&&g.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),yi(this),ko(this)}}}catch{}finally{}};function ub(l){if(!oy(l))return l.g.la();const m=Iy(l.g);if(m==="")return"";let g="";const E=m.length,D=mr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return yi(l),ko(l),"";l.h.i=new o.TextDecoder}for(let M=0;M<E;M++)l.h.h=!0,g+=l.h.i.decode(m[M],{stream:!(D&&M==E-1)});return m.length=0,l.h.g+=g,l.C=0,l.h.g}function oy(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function hb(l,m){var g=l.C,E=m.indexOf(`
`,g);return E==-1?Vh:(g=Number(m.substring(g,E)),isNaN(g)?iy:(E+=1,E+g>m.length?Vh:(m=m.slice(E,E+g),l.C=E+g,m)))}hr.prototype.cancel=function(){this.K=!0,yi(this)};function _l(l){l.T=Date.now()+l.H,ay(l,l.H)}function ay(l,m){if(l.D!=null)throw Error("WatchDog timer not null");l.D=So(u(l.aa,l),m)}function jh(l){l.D&&(o.clearTimeout(l.D),l.D=null)}hr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(ab(this.i,this.B),this.M!=2&&(Eo(),xt(17)),yi(this),this.m=2,ko(this)):ay(this,this.T-l)};function ko(l){l.j.I==0||l.K||Ry(l.j,l)}function yi(l){jh(l);var m=l.O;m&&typeof m.dispose=="function"&&m.dispose(),l.O=null,Kg(l.V),l.g&&(m=l.g,l.g=null,m.abort(),m.dispose())}function Oh(l,m){try{var g=l.j;if(g.I!=0&&(g.g==l||Lh(g.h,l))){if(!l.L&&Lh(g.h,l)&&g.I==3){try{var E=g.Ba.g.parse(m)}catch{E=null}if(Array.isArray(E)&&E.length==3){var D=E;if(D[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)kl(g),Il(g);else break e;Hh(g),xt(18)}}else g.xa=D[1],0<g.xa-g.K&&D[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=So(u(g.Va,g),6e3));uy(g.h)<=1&&g.ta&&(g.ta=void 0)}else wi(g,11)}else if((l.L||g.g==l)&&kl(g),!C(m))for(D=g.Ba.g.parse(m),m=0;m<D.length;m++){let ge=D[m];const Ke=ge[0];if(!(Ke<=g.K))if(g.K=Ke,ge=ge[1],g.I==2)if(ge[0]=="c"){g.M=ge[1],g.ba=ge[2];const _n=ge[3];_n!=null&&(g.ka=_n,g.j.info("VER="+g.ka));const xi=ge[4];xi!=null&&(g.za=xi,g.j.info("SVER="+g.za));const pr=ge[5];pr!=null&&typeof pr=="number"&&pr>0&&(E=1.5*pr,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const gr=l.g;if(gr){const Al=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var M=E.h;M.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Fh(M,M.h),M.h=null))}if(E.G){const qh=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;qh&&(E.wa=qh,_e(E.J,E.G,qh))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var z=l;if(E.na=My(E,E.L?E.ba:null,E.W),z.L){hy(E.h,z);var ie=z,He=E.O;He&&(ie.H=He),ie.D&&(jh(ie),_l(ie)),E.g=z}else Py(E);g.i.length>0&&bl(g)}else ge[0]!="stop"&&ge[0]!="close"||wi(g,7);else g.I==3&&(ge[0]=="stop"||ge[0]=="close"?ge[0]=="stop"?wi(g,7):zh(g):ge[0]!="noop"&&g.l&&g.l.qa(ge),g.A=0)}}Eo(4)}catch{}}var db=class{constructor(l,m){this.g=l,this.map=m}};function ly(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function cy(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function uy(l){return l.h?1:l.g?l.g.size:0}function Lh(l,m){return l.h?l.h==m:l.g?l.g.has(m):!1}function Fh(l,m){l.g?l.g.add(m):l.h=m}function hy(l,m){l.h&&l.h==m?l.h=null:l.g&&l.g.has(m)&&l.g.delete(m)}ly.prototype.cancel=function(){if(this.i=dy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function dy(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let m=l.i;for(const g of l.g.values())m=m.concat(g.G);return m}return x(l.i)}var fy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fb(l,m){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const E=l[g].indexOf("=");let D,M=null;E>=0?(D=l[g].substring(0,E),M=l[g].substring(E+1)):D=l[g],m(D,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function dr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;l instanceof dr?(this.l=l.l,Co(this,l.j),this.o=l.o,this.g=l.g,Ao(this,l.u),this.h=l.h,Uh(this,wy(l.i)),this.m=l.m):l&&(m=String(l).match(fy))?(this.l=!1,Co(this,m[1]||"",!0),this.o=Po(m[2]||""),this.g=Po(m[3]||"",!0),Ao(this,m[4]),this.h=Po(m[5]||"",!0),Uh(this,m[6]||"",!0),this.m=Po(m[7]||"")):(this.l=!1,this.i=new Ro(null,this.l))}dr.prototype.toString=function(){const l=[];var m=this.j;m&&l.push(No(m,my,!0),":");var g=this.g;return(g||m=="file")&&(l.push("//"),(m=this.o)&&l.push(No(m,my,!0),"@"),l.push(bo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(No(g,g.charAt(0)=="/"?gb:pb,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",No(g,vb)),l.join("")},dr.prototype.resolve=function(l){const m=xn(this);let g=!!l.j;g?Co(m,l.j):g=!!l.o,g?m.o=l.o:g=!!l.g,g?m.g=l.g:g=l.u!=null;var E=l.h;if(g)Ao(m,l.u);else if(g=!!l.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var D=m.h.lastIndexOf("/");D!=-1&&(E=m.h.slice(0,D+1)+E)}if(D=E,D==".."||D==".")E="";else if(D.indexOf("./")!=-1||D.indexOf("/.")!=-1){E=D.lastIndexOf("/",0)==0,D=D.split("/");const M=[];for(let z=0;z<D.length;){const ie=D[z++];ie=="."?E&&z==D.length&&M.push(""):ie==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),E&&z==D.length&&M.push("")):(M.push(ie),E=!0)}E=M.join("/")}else E=D}return g?m.h=E:g=l.i.toString()!=="",g?Uh(m,wy(l.i)):g=!!l.m,g&&(m.m=l.m),m};function xn(l){return new dr(l)}function Co(l,m,g){l.j=g?Po(m,!0):m,l.j&&(l.j=l.j.replace(/:$/,""))}function Ao(l,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);l.u=m}else l.u=null}function Uh(l,m,g){m instanceof Ro?(l.i=m,wb(l.i,l.l)):(g||(m=No(m,yb)),l.i=new Ro(m,l.l))}function _e(l,m,g){l.i.set(m,g)}function Tl(l){return _e(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Po(l,m){return l?m?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function No(l,m,g){return typeof l=="string"?(l=encodeURI(l).replace(m,mb),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function mb(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var my=/[#\/\?@]/g,pb=/[#\?:]/g,gb=/[#\?]/g,yb=/[#\?@]/g,vb=/#/g;function Ro(l,m){this.h=this.g=null,this.i=l||null,this.j=!!m}function vi(l){l.g||(l.g=new Map,l.h=0,l.i&&fb(l.i,function(m,g){l.add(decodeURIComponent(m.replace(/\+/g," ")),g)}))}t=Ro.prototype,t.add=function(l,m){vi(this),this.i=null,l=is(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(m),this.h+=1,this};function py(l,m){vi(l),m=is(l,m),l.g.has(m)&&(l.i=null,l.h-=l.g.get(m).length,l.g.delete(m))}function gy(l,m){return vi(l),m=is(l,m),l.g.has(m)}t.forEach=function(l,m){vi(this),this.g.forEach(function(g,E){g.forEach(function(D){l.call(m,D,E,this)},this)},this)};function yy(l,m){vi(l);let g=[];if(typeof m=="string")gy(l,m)&&(g=g.concat(l.g.get(is(l,m))));else for(l=Array.from(l.g.values()),m=0;m<l.length;m++)g=g.concat(l[m]);return g}t.set=function(l,m){return vi(this),this.i=null,l=is(this,l),gy(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[m]),this.h+=1,this},t.get=function(l,m){return l?(l=yy(this,l),l.length>0?String(l[0]):m):m};function vy(l,m,g){py(l,m),g.length>0&&(l.i=null,l.g.set(is(l,m),x(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],m=Array.from(this.g.keys());for(let E=0;E<m.length;E++){var g=m[E];const D=bo(g);g=yy(this,g);for(let M=0;M<g.length;M++){let z=D;g[M]!==""&&(z+="="+bo(g[M])),l.push(z)}}return this.i=l.join("&")};function wy(l){const m=new Ro;return m.i=l.i,l.g&&(m.g=new Map(l.g),m.h=l.h),m}function is(l,m){return m=String(m),l.j&&(m=m.toLowerCase()),m}function wb(l,m){m&&!l.j&&(vi(l),l.i=null,l.g.forEach(function(g,E){const D=E.toLowerCase();E!=D&&(py(this,E),vy(this,D,g))},l)),l.j=m}function xb(l,m){const g=new Io;if(o.Image){const E=new Image;E.onload=d(fr,g,"TestLoadImage: loaded",!0,m,E),E.onerror=d(fr,g,"TestLoadImage: error",!1,m,E),E.onabort=d(fr,g,"TestLoadImage: abort",!1,m,E),E.ontimeout=d(fr,g,"TestLoadImage: timeout",!1,m,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else m(!1)}function _b(l,m){const g=new Io,E=new AbortController,D=setTimeout(()=>{E.abort(),fr(g,"TestPingServer: timeout",!1,m)},1e4);fetch(l,{signal:E.signal}).then(M=>{clearTimeout(D),M.ok?fr(g,"TestPingServer: ok",!0,m):fr(g,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(D),fr(g,"TestPingServer: error",!1,m)})}function fr(l,m,g,E,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),E(g)}catch{}}function Tb(){this.g=new ib}function Bh(l){this.i=l.Sb||null,this.h=l.ab||!1}f(Bh,Qg),Bh.prototype.g=function(){return new El(this.i,this.h)};function El(l,m){at.call(this),this.H=l,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(El,at),t=El.prototype,t.open=function(l,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=m,this.readyState=1,Vo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(m.body=l),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Vo(this)),this.g&&(this.readyState=3,Vo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xy(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function xy(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var m=l.value?l.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!l.done}))&&(this.response=this.responseText+=m)}l.done?Do(this):Vo(this),this.readyState==3&&xy(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Do(this))},t.Na=function(l){this.g&&(this.response=l,Do(this))},t.ga=function(){this.g&&Do(this)};function Do(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Vo(l)}t.setRequestHeader=function(l,m){this.A.append(l,m)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],m=this.h.entries();for(var g=m.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=m.next();return l.join(`\r
`)};function Vo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(El.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _y(l){let m="";return $(l,function(g,E){m+=E,m+=":",m+=g,m+=`\r
`}),m}function $h(l,m,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=_y(g),typeof l=="string"?g!=null&&bo(g):_e(l,m,g))}function Re(l){at.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Re,at);var Eb=/^https?$/i,Sb=["POST","PUT"];t=Re.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,m,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);m=m?m.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ny.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(l),!0),this.B=!1}catch(M){Ty(this,M);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var D in E)g.set(D,E[D]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const M of E.keys())g.set(M,E.get(M));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),D=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(Sb,m,void 0)>=0)||E||D||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,z]of g)this.g.setRequestHeader(M,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(M){Ty(this,M)}};function Ty(l,m){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=m,l.o=5,Ey(l),Sl(l)}function Ey(l){l.A||(l.A=!0,wt(l,"complete"),wt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,wt(this,"complete"),wt(this,"abort"),Sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sl(this,!0)),Re.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Sy(this):this.Xa())},t.Xa=function(){Sy(this)};function Sy(l){if(l.h&&typeof s<"u"){if(l.v&&mr(l)==4)setTimeout(l.Ca.bind(l),0);else if(wt(l,"readystatechange"),mr(l)==4){l.h=!1;try{const M=l.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var g;if(!(g=m)){var E;if(E=M===0){let z=String(l.D).match(fy)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),E=!Eb.test(z?z.toLowerCase():"")}g=E}if(g)wt(l,"complete"),wt(l,"success");else{l.o=6;try{var D=mr(l)>2?l.g.statusText:""}catch{D=""}l.l=D+" ["+l.ca()+"]",Ey(l)}}finally{Sl(l)}}}}function Sl(l,m){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,m||wt(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function mr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return mr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var m=this.g.responseText;return l&&m.indexOf(l)==0&&(m=m.substring(l.length)),rb(m)}};function Iy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ib(l){const m={};l=(l.g&&mr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(C(l[E]))continue;var g=cb(l[E]);const D=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=m[D]||[];m[D]=M,M.push(g)}K(m,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(l,m,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||m}function by(l){this.za=0,this.i=[],this.j=new Io,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Mo("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Mo("baseRetryDelayMs",5e3,l),this.Za=Mo("retryDelaySeedMs",1e4,l),this.Ta=Mo("forwardChannelMaxRetries",2,l),this.va=Mo("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new ly(l&&l.concurrentRequestLimit),this.Ba=new Tb,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=by.prototype,t.ka=8,t.I=1,t.connect=function(l,m,g,E){xt(0),this.W=l,this.H=m||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=My(this,null,this.W),bl(this)};function zh(l){if(ky(l),l.I==3){var m=l.V++,g=xn(l.J);if(_e(g,"SID",l.M),_e(g,"RID",m),_e(g,"TYPE","terminate"),jo(l,g),m=new hr(l,l.j,m),m.M=2,m.A=Tl(xn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=m.A,g=!0),g||(m.g=jy(m.j,null),m.g.ea(m.A)),m.F=Date.now(),_l(m)}Vy(l)}function Il(l){l.g&&(Wh(l),l.g.cancel(),l.g=null)}function ky(l){Il(l),l.v&&(o.clearTimeout(l.v),l.v=null),kl(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function bl(l){if(!cy(l.h)&&!l.m){l.m=!0;var m=l.Ea;V||v(),O||(V(),O=!0),b.add(m,l),l.D=0}}function bb(l,m){return uy(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=m.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=So(u(l.Ea,l,m),Dy(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const D=new hr(this,this.j,l);let M=this.o;if(this.U&&(M?(M=X(M),vn(M,this.U)):M=this.U),this.u!==null||this.R||(D.J=M,M=null),this.S)e:{for(var m=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(m+=E,m>4096){m=g;break e}if(m===4096||g===this.i.length-1){m=g+1;break e}}m=1e3}else m=1e3;m=Ay(this,D,m),g=xn(this.J),_e(g,"RID",l),_e(g,"CVER",22),this.G&&_e(g,"X-HTTP-Session-Id",this.G),jo(this,g),M&&(this.R?m="headers="+bo(_y(M))+"&"+m:this.u&&$h(g,this.u,M)),Fh(this.h,D),this.Ra&&_e(g,"TYPE","init"),this.S?(_e(g,"$req",m),_e(g,"SID","null"),D.U=!0,Mh(D,g,null)):Mh(D,g,m),this.I=2}}else this.I==3&&(l?Cy(this,l):this.i.length==0||cy(this.h)||Cy(this))};function Cy(l,m){var g;m?g=m.l:g=l.V++;const E=xn(l.J);_e(E,"SID",l.M),_e(E,"RID",g),_e(E,"AID",l.K),jo(l,E),l.u&&l.o&&$h(E,l.u,l.o),g=new hr(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),m&&(l.i=m.G.concat(l.i)),m=Ay(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Fh(l.h,g),Mh(g,E,m)}function jo(l,m){l.H&&$(l.H,function(g,E){_e(m,E,g)}),l.l&&$({},function(g,E){_e(m,E,g)})}function Ay(l,m,g){g=Math.min(l.i.length,g);const E=l.l?u(l.l.Ka,l.l,l):null;e:{var D=l.i;let ie=-1;for(;;){const He=["count="+g];ie==-1?g>0?(ie=D[0].g,He.push("ofs="+ie)):ie=0:He.push("ofs="+ie);let ge=!0;for(let Ke=0;Ke<g;Ke++){var M=D[Ke].g;const _n=D[Ke].map;if(M-=ie,M<0)ie=Math.max(0,D[Ke].g-100),ge=!1;else try{M="req"+M+"_"||"";try{var z=_n instanceof Map?_n:Object.entries(_n);for(const[xi,pr]of z){let gr=pr;a(pr)&&(gr=Ph(pr)),He.push(M+xi+"="+encodeURIComponent(gr))}}catch(xi){throw He.push(M+"type="+encodeURIComponent("_badmap")),xi}}catch{E&&E(_n)}}if(ge){z=He.join("&");break e}}z=void 0}return l=l.i.splice(0,g),m.G=l,z}function Py(l){if(!l.g&&!l.v){l.Y=1;var m=l.Da;V||v(),O||(V(),O=!0),b.add(m,l),l.A=0}}function Hh(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=So(u(l.Da,l),Dy(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Ny(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=So(u(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Il(this),Ny(this))};function Wh(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Ny(l){l.g=new hr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var m=xn(l.na);_e(m,"RID","rpc"),_e(m,"SID",l.M),_e(m,"AID",l.K),_e(m,"CI",l.F?"0":"1"),!l.F&&l.ia&&_e(m,"TO",l.ia),_e(m,"TYPE","xmlhttp"),jo(l,m),l.u&&l.o&&$h(m,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=Tl(xn(m)),g.u=null,g.R=!0,sy(g,l)}t.Va=function(){this.C!=null&&(this.C=null,Il(this),Hh(this),xt(19))};function kl(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function Ry(l,m){var g=null;if(l.g==m){kl(l),Wh(l),l.g=null;var E=2}else if(Lh(l.h,m))g=m.G,hy(l.h,m),E=1;else return;if(l.I!=0){if(m.o)if(E==1){g=m.u?m.u.length:0,m=Date.now()-m.F;var D=l.D;E=wl(),wt(E,new ey(E,g)),bl(l)}else Py(l);else if(D=m.m,D==3||D==0&&m.X>0||!(E==1&&bb(l,m)||E==2&&Hh(l)))switch(g&&g.length>0&&(m=l.h,m.i=m.i.concat(g)),D){case 1:wi(l,5);break;case 4:wi(l,10);break;case 3:wi(l,6);break;default:wi(l,2)}}}function Dy(l,m){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*m}function wi(l,m){if(l.j.info("Error code "+m),m==2){var g=u(l.bb,l),E=l.Ua;const D=!E;E=new dr(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Co(E,"https"),Tl(E),D?xb(E.toString(),g):_b(E.toString(),g)}else xt(2);l.I=0,l.l&&l.l.pa(m),Vy(l),ky(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Vy(l){if(l.I=0,l.ja=[],l.l){const m=dy(l.h);(m.length!=0||l.i.length!=0)&&(T(l.ja,m),T(l.ja,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.oa()}}function My(l,m,g){var E=g instanceof dr?xn(g):new dr(g);if(E.g!="")m&&(E.g=m+"."+E.g),Ao(E,E.u);else{var D=o.location;E=D.protocol,m=m?m+"."+D.hostname:D.hostname,D=+D.port;const M=new dr(null);E&&Co(M,E),m&&(M.g=m),D&&Ao(M,D),g&&(M.h=g),E=M}return g=l.G,m=l.wa,g&&m&&_e(E,g,m),_e(E,"VER",l.ka),jo(l,E),E}function jy(l,m,g){if(m&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=l.Aa&&!l.ma?new Re(new Bh({ab:g})):new Re(l.ma),m.Fa(l.L),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oy(){}t=Oy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Cl(){}Cl.prototype.g=function(l,m){return new Vt(l,m)};function Vt(l,m){at.call(this),this.g=new by(m),this.l=l,this.h=m&&m.messageUrlParams||null,l=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(l?l["X-WebChannel-Content-Type"]=m.messageContentType:l={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(l?l["X-WebChannel-Client-Profile"]=m.sa:l={"X-WebChannel-Client-Profile":m.sa}),this.g.U=l,(l=m&&m.Qb)&&!C(l)&&(this.g.u=l),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,l=this.h,l!==null&&m in l&&(l=this.h,m in l&&delete l[m])),this.j=new ss(this)}f(Vt,at),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){zh(this.g)},Vt.prototype.o=function(l){var m=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Ph(l),l=g);m.i.push(new db(m.Ya++,l)),m.I==3&&bl(m)},Vt.prototype.N=function(){this.g.l=null,delete this.j,zh(this.g),delete this.g,Vt.Z.N.call(this)};function Ly(l){Nh.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var m=l.__sm__;if(m){e:{for(const g in m){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,m=m!==null&&l in m?m[l]:void 0),this.data=m}else this.data=l}f(Ly,Nh);function Fy(){Rh.call(this),this.status=1}f(Fy,Rh);function ss(l){this.g=l}f(ss,Oy),ss.prototype.ra=function(){wt(this.g,"a")},ss.prototype.qa=function(l){wt(this.g,new Ly(l))},ss.prototype.pa=function(l){wt(this.g,new Fy)},ss.prototype.oa=function(){wt(this.g,"b")},Cl.prototype.createWebChannel=Cl.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,dS=function(){return new Cl},hS=function(){return wl()},uS=gi,lm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xl.NO_ERROR=0,xl.TIMEOUT=8,xl.HTTP_ERROR=6,_c=xl,ty.COMPLETE="complete",cS=ty,Yg.EventType=To,To.OPEN="a",To.CLOSE="b",To.ERROR="c",To.MESSAGE="d",at.prototype.listen=at.prototype.J,Jo=Yg,Re.prototype.listenOnce=Re.prototype.K,Re.prototype.getLastError=Re.prototype.Ha,Re.prototype.getLastErrorCode=Re.prototype.ya,Re.prototype.getStatus=Re.prototype.ca,Re.prototype.getResponseJson=Re.prototype.La,Re.prototype.getResponseText=Re.prototype.la,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Fa,lS=Re}).apply(typeof Jl<"u"?Jl:typeof self<"u"?self:typeof window<"u"?window:{});const Cw="@firebase/firestore",Aw="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi=new Gp("@firebase/firestore");function ls(){return qi.logLevel}function q(t,...e){if(qi.logLevel<=ae.DEBUG){const n=e.map(og);qi.debug(`Firestore (${ho}): ${t}`,...n)}}function ar(t,...e){if(qi.logLevel<=ae.ERROR){const n=e.map(og);qi.error(`Firestore (${ho}): ${t}`,...n)}}function Xs(t,...e){if(qi.logLevel<=ae.WARN){const n=e.map(og);qi.warn(`Firestore (${ho}): ${t}`,...n)}}function og(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fS(t,r,n)}function fS(t,e,n){let r=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ar(r),new Error(r)}function de(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||fS(e,i,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends ur{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class pM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gM{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Kr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new mS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new dt(e)}}class yM{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vM{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new yM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,an(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){de(this.o===void 0,3512);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Pw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=xM(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function cm(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Ud(i)===Ud(s)?le(i,s):Ud(i)?1:-1}return le(t.length,e.length)}const _M=55296,TM=57343;function Ud(t){const e=t.charCodeAt(0);return e>=_M&&e<=TM}function Js(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw="__name__";class Sn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Sn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Sn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return le(e.length,n.length)}static compareSegments(e,n){const r=Sn.isNumericId(e),i=Sn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Sn.extractNumericId(e).compare(Sn.extractNumericId(n)):cm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gr.fromString(e.substring(4,e.length-2))}}class ve extends Sn{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const EM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends Sn{construct(e,n,r){return new nt(e,n,r)}static isValidIdentifier(e){return EM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nw}static keyField(){return new nt([Nw])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new W(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(ve.fromString(e))}static fromName(e){return new Q(ve.fromString(e).popFirst(5))}static empty(){return new Q(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t,e,n){if(!n)throw new W(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SM(t,e,n,r){if(e===!0&&r===!0)throw new W(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rw(t){if(!Q.isDocumentKey(t))throw new W(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dw(t){if(Q.isDocumentKey(t))throw new W(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ih(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z(12329,{type:typeof t})}function Vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ih(t);throw new W(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t,e){const n={typeString:t};return e&&(n.value=e),n}function dl(t,e){if(!gS(t))throw new W(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=-62135596800,Mw=1e6;class Ee{static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Mw);return new Ee(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Vw)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Mw}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ee._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dl(e,Ee._jsonSchema))return new Ee(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vw;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ee._jsonSchemaVersion="firestore/timestamp/1.0",Ee._jsonSchema={type:ze("string",Ee._jsonSchemaVersion),seconds:ze("number"),nanoseconds:ze("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{static fromTimestamp(e){return new ne(e)}static min(){return new ne(new Ee(0,0))}static max(){return new ne(new Ee(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=-1;function IM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new ni(i,Q.empty(),e)}function bM(t){return new ni(t.readTime,t.key,Wa)}class ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ni(ne.min(),Q.empty(),Wa)}static max(){return new ni(ne.max(),Q.empty(),Wa)}}function kM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==CM)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function PM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-1;function oh(t){return t==null}function pu(t){return t===0&&1/t==-1/0}function NM(t){return typeof t=="number"&&Number.isInteger(t)&&!pu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="";function RM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jw(e)),e=DM(t.get(n),e);return jw(e)}function DM(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case yS:n+="";break;default:n+=s}}return n}function jw(t){return t+yS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function di(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zl(this.root,e,this.comparator,!0)}}class Zl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??tt.RED,this.left=i??tt.EMPTY,this.right=s??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new tt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return tt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lw(this.data.getIterator())}getIteratorFrom(e){return new Lw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ge)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ge(this.comparator);return n.data=e,n}}class Lw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new Ge(nt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Js(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new wS("Invalid base64 string: "+s):s}}(e);return new ot(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const VM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(t){if(de(!!t,39018),typeof t=="string"){let e=0;const n=VM.exec(t);if(de(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ii(t){return typeof t=="string"?ot.fromBase64String(t):ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="server_timestamp",_S="__type__",TS="__previous_value__",ES="__local_write_time__";function cg(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_S])==null?void 0:r.stringValue)===xS}function ah(t){const e=t.mapValue.fields[TS];return cg(e)?ah(e):e}function qa(t){const e=ri(t.mapValue.fields[ES].timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,r,i,s,o,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const gu="(default)";class Ga{constructor(e,n){this.projectId=e,this.database=n||gu}static empty(){return new Ga("","")}get isDefaultDatabase(){return this.database===gu}isEqual(e){return e instanceof Ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="__type__",IS="__max__",ec={mapValue:{fields:{__type__:{stringValue:IS}}}},bS="__vector__",yu="value";function si(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cg(t)?4:OM(t)?9007199254740991:jM(t)?10:11:Z(28295,{value:t})}function Un(t,e){if(t===e)return!0;const n=si(t);if(n!==si(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qa(t).isEqual(qa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ri(i.timestampValue),a=ri(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ii(i.bytesValue).isEqual(ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return je(i.geoPointValue.latitude)===je(s.geoPointValue.latitude)&&je(i.geoPointValue.longitude)===je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return je(i.integerValue)===je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=je(i.doubleValue),a=je(s.doubleValue);return o===a?pu(o)===pu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Js(t.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Ow(o)!==Ow(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Un(o[c],a[c])))return!1;return!0}(t,e);default:return Z(52216,{left:t})}}function Ka(t,e){return(t.values||[]).find(n=>Un(n,e))!==void 0}function Zs(t,e){if(t===e)return 0;const n=si(t),r=si(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=je(s.integerValue||s.doubleValue),c=je(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return Fw(t.timestampValue,e.timestampValue);case 4:return Fw(qa(t),qa(e));case 5:return cm(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ii(s),c=ii(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){const d=le(a[u],c[u]);if(d!==0)return d}return le(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=le(je(s.latitude),je(o.latitude));return a!==0?a:le(je(s.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Uw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,x,T,A;const a=s.fields||{},c=o.fields||{},u=(p=a[yu])==null?void 0:p.arrayValue,d=(x=c[yu])==null?void 0:x.arrayValue,f=le(((T=u==null?void 0:u.values)==null?void 0:T.length)||0,((A=d==null?void 0:d.values)==null?void 0:A.length)||0);return f!==0?f:Uw(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ec.mapValue&&o===ec.mapValue)return 0;if(s===ec.mapValue)return 1;if(o===ec.mapValue)return-1;const a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const p=cm(c[f],d[f]);if(p!==0)return p;const x=Zs(a[c[f]],u[d[f]]);if(x!==0)return x}return le(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Z(23264,{he:n})}}function Fw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=ri(t),r=ri(e),i=le(n.seconds,r.seconds);return i!==0?i:le(n.nanos,r.nanos)}function Uw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Zs(n[i],r[i]);if(s)return s}return le(n.length,r.length)}function eo(t){return um(t)}function um(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=um(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${um(n.fields[o])}`;return i+"}"}(t.mapValue):Z(61005,{value:t})}function Tc(t){switch(si(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ah(t);return e?16+Tc(e):16;case 5:return 2*t.stringValue.length;case 6:return ii(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Tc(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return di(r.fields,(s,o)=>{i+=s.length+Tc(o)}),i}(t.mapValue);default:throw Z(13486,{value:t})}}function Bw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hm(t){return!!t&&"integerValue"in t}function ug(t){return!!t&&"arrayValue"in t}function $w(t){return!!t&&"nullValue"in t}function zw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ec(t){return!!t&&"mapValue"in t}function jM(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[SS])==null?void 0:r.stringValue)===bS}function va(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return di(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=va(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=va(t.arrayValue.values[n]);return e}return{...t}}function OM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===IS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ec(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=va(n)}setAll(e){let n=nt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=va(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ec(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ec(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){di(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ct(va(this.value))}}function kS(t){const e=[];return di(t.fields,(n,r)=>{const i=new nt([n]);if(Ec(r)){const s=kS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new pt(e,0,ne.min(),ne.min(),ne.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,i){return new pt(e,1,n,ne.min(),r,i,0)}static newNoDocument(e,n){return new pt(e,2,n,ne.min(),ne.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new pt(e,3,n,ne.min(),ne.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){this.position=e,this.inclusive=n}}function Hw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Zs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ww(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Un(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function LM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{}class $e extends CS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new UM(e,n,r):n==="array-contains"?new zM(e,r):n==="in"?new HM(e,r):n==="not-in"?new WM(e,r):n==="array-contains-any"?new qM(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new BM(e,r):new $M(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Zs(n,this.value)):n!==null&&si(this.value)===si(n)&&this.matchesComparison(Zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends CS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new mn(e,n)}matches(e){return AS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function AS(t){return t.op==="and"}function PS(t){return FM(t)&&AS(t)}function FM(t){for(const e of t.filters)if(e instanceof mn)return!1;return!0}function dm(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+eo(t.value);if(PS(t))return t.filters.map(e=>dm(e)).join(",");{const e=t.filters.map(n=>dm(n)).join(",");return`${t.op}(${e})`}}function NS(t,e){return t instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.field.isEqual(i.field)&&Un(r.value,i.value)}(t,e):t instanceof mn?function(r,i){return i instanceof mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&NS(o,i.filters[a]),!0):!1}(t,e):void Z(19439)}function RS(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${eo(n.value)}`}(t):t instanceof mn?function(n){return n.op.toString()+" {"+n.getFilters().map(RS).join(" ,")+"}"}(t):"Filter"}class UM extends $e{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class BM extends $e{constructor(e,n){super(e,"in",n),this.keys=DS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $M extends $e{constructor(e,n){super(e,"not-in",n),this.keys=DS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class zM extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ug(n)&&Ka(n.arrayValue,this.value)}}class HM extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ka(this.value.arrayValue,n)}}class WM extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ka(this.value.arrayValue,n)}}class qM extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ug(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function qw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new GM(t,e,n,r,i,s,o)}function hg(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),oh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>eo(r)).join(",")),e.Te=n}return e.Te}function dg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!NS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ww(t.startAt,e.startAt)&&Ww(t.endAt,e.endAt)}function fm(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KM(t,e,n,r,i,s,o,a){return new po(t,e,n,r,i,s,o,a)}function lh(t){return new po(t)}function Gw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function VS(t){return t.collectionGroup!==null}function wa(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ge(nt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Qa(s,r))}),n.has(nt.keyField().canonicalString())||e.Ie.push(new Qa(nt.keyField(),r))}return e.Ie}function Mn(t){const e=re(t);return e.Ee||(e.Ee=QM(e,wa(t))),e.Ee}function QM(t,e){if(t.limitType==="F")return qw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Qa(i.field,s)});const n=t.endAt?new vu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new vu(t.startAt.position,t.startAt.inclusive):null;return qw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function mm(t,e){const n=t.filters.concat([e]);return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pm(t,e,n){return new po(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ch(t,e){return dg(Mn(t),Mn(e))&&t.limitType===e.limitType}function MS(t){return`${hg(Mn(t))}|lt:${t.limitType}`}function cs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>RS(i)).join(", ")}]`),oh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>eo(i)).join(",")),`Target(${r})`}(Mn(t))}; limitType=${t.limitType})`}function uh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of wa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){const u=Hw(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,wa(r),i)||r.endAt&&!function(o,a,c){const u=Hw(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,wa(r),i))}(t,e)}function YM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jS(t){return(e,n)=>{let r=!1;for(const i of wa(t)){const s=XM(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function XM(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){const c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Zs(c,u):Z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){di(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return vS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM=new Ne(Q.comparator);function lr(){return JM}const OS=new Ne(Q.comparator);function Zo(...t){let e=OS;for(const n of t)e=e.insert(n.key,n);return e}function LS(t){let e=OS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vi(){return xa()}function FS(){return xa()}function xa(){return new Zi(t=>t.toString(),(t,e)=>t.isEqual(e))}const ZM=new Ne(Q.comparator),ej=new Ge(Q.comparator);function ce(...t){let e=ej;for(const n of t)e=e.add(n);return e}const tj=new Ge(le);function nj(){return tj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(e)?"-0":e}}function US(t){return{integerValue:""+t}}function rj(t,e){return NM(e)?US(e):fg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(){this._=void 0}}function ij(t,e,n){return t instanceof Ya?function(i,s){const o={fields:{[_S]:{stringValue:xS},[ES]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cg(s)&&(s=ah(s)),s&&(o.fields[TS]=s),{mapValue:o}}(n,e):t instanceof to?$S(t,e):t instanceof Xa?zS(t,e):function(i,s){const o=BS(i,s),a=Kw(o)+Kw(i.Ae);return hm(o)&&hm(i.Ae)?US(a):fg(i.serializer,a)}(t,e)}function sj(t,e,n){return t instanceof to?$S(t,e):t instanceof Xa?zS(t,e):n}function BS(t,e){return t instanceof wu?function(r){return hm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ya extends hh{}class to extends hh{constructor(e){super(),this.elements=e}}function $S(t,e){const n=HS(e);for(const r of t.elements)n.some(i=>Un(i,r))||n.push(r);return{arrayValue:{values:n}}}class Xa extends hh{constructor(e){super(),this.elements=e}}function zS(t,e){let n=HS(e);for(const r of t.elements)n=n.filter(i=>!Un(i,r));return{arrayValue:{values:n}}}class wu extends hh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Kw(t){return je(t.integerValue||t.doubleValue)}function HS(t){return ug(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n){this.field=e,this.transform=n}}function oj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof to&&i instanceof to||r instanceof Xa&&i instanceof Xa?Js(r.elements,i.elements,Un):r instanceof wu&&i instanceof wu?Un(r.Ae,i.Ae):r instanceof Ya&&i instanceof Ya}(t.transform,e.transform)}class aj{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class dh{}function qS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mg(t.key,dn.none()):new fl(t.key,t.data,dn.none());{const n=t.data,r=Ct.empty();let i=new Ge(nt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fi(t.key,r,new Ot(i.toArray()),dn.none())}}function lj(t,e,n){t instanceof fl?function(i,s,o){const a=i.value.clone(),c=Yw(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fi?function(i,s,o){if(!Sc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Yw(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(GS(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function _a(t,e,n,r){return t instanceof fl?function(s,o,a,c){if(!Sc(s.precondition,o))return a;const u=s.value.clone(),d=Xw(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof fi?function(s,o,a,c){if(!Sc(s.precondition,o))return a;const u=Xw(s.fieldTransforms,c,o),d=o.data;return d.setAll(GS(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Sc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function cj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=BS(r.transform,i||null);s!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,s))}return n||null}function Qw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Js(r,i,(s,o)=>oj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class fl extends dh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class fi extends dh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Yw(t,e,n){const r=new Map;de(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,sj(o,a,n[i]))}return r}function Xw(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ij(s,o,e))}return r}class mg extends dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uj extends dh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&lj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=_a(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const c=qS(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ce())}isEqual(e){return this.batchId===e.batchId&&Js(this.mutations,e.mutations,(n,r)=>Qw(n,r))&&Js(this.baseMutations,e.baseMutations,(n,r)=>Qw(n,r))}}class pg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return ZM}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new pg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,ue;function mj(t){switch(t){case L.OK:return Z(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Z(15467,{code:t})}}function KS(t){if(t===void 0)return ar("GRPC error has no .code"),L.UNKNOWN;switch(t){case Fe.OK:return L.OK;case Fe.CANCELLED:return L.CANCELLED;case Fe.UNKNOWN:return L.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return L.INTERNAL;case Fe.UNAVAILABLE:return L.UNAVAILABLE;case Fe.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Fe.NOT_FOUND:return L.NOT_FOUND;case Fe.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Fe.ABORTED:return L.ABORTED;case Fe.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Fe.DATA_LOSS:return L.DATA_LOSS;default:return Z(39323,{code:t})}}(ue=Fe||(Fe={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new Gr([4294967295,4294967295],0);function Jw(t){const e=pj().encode(t),n=new aS;return n.update(e),new Uint8Array(n.digest())}function Zw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gr([n,r],0),new Gr([i,s],0)]}class gg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ea(`Invalid padding: ${n}`);if(r<0)throw new ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ea(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Gr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Gr.fromNumber(r)));return i.compare(gj)===1&&(i=new Gr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Jw(e),[r,i]=Zw(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new gg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=Jw(e),[r,i]=Zw(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ml.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fh(ne.min(),i,new Ne(le),lr(),ce())}}class ml{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ml(r,n,ce(),ce(),ce())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class QS{constructor(e,n){this.targetId=e,this.Ce=n}}class YS{constructor(e,n,r=ot.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ex{constructor(){this.ve=0,this.Fe=tx(),this.Me=ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ce(),n=ce(),r=ce();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z(38017,{changeType:s})}}),new ml(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=tx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yj{constructor(e){this.Ge=e,this.ze=new Map,this.je=lr(),this.Je=tc(),this.He=tc(),this.Ye=new Ne(le)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(fm(s))if(r===0){const o=new Q(s.path);this.et(n,o,pt.newNoDocument(o,ne.min()))}else de(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ii(r).toUint8Array()}catch(c){if(c instanceof wS)return Xs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new gg(o,i,s)}catch(c){return Xs(c instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&fm(a.target)){const c=new Q(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,pt.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ce();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new fh(e,n,this.Ye,this.je,r);return this.je=lr(),this.Je=tc(),this.He=tc(),this.Ye=new Ne(le),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ex,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ge(le),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ge(le),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ex),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function tc(){return new Ne(Q.comparator)}function tx(){return new Ne(Q.comparator)}const vj=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),wj=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),xj=(()=>({and:"AND",or:"OR"}))();class _j{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gm(t,e){return t.useProto3Json||oh(e)?e:{value:e}}function xu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Tj(t,e){return xu(t,e.toTimestamp())}function jn(t){return de(!!t,49232),ne.fromTimestamp(function(n){const r=ri(n);return new Ee(r.seconds,r.nanos)}(t))}function yg(t,e){return ym(t,e).canonicalString()}function ym(t,e){const n=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function JS(t){const e=ve.fromString(t);return de(rI(e),10190,{key:e.toString()}),e}function vm(t,e){return yg(t.databaseId,e.path)}function Bd(t,e){const n=JS(e);if(n.get(1)!==t.databaseId.projectId)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(eI(n))}function ZS(t,e){return yg(t.databaseId,e)}function Ej(t){const e=JS(t);return e.length===4?ve.emptyPath():eI(e)}function wm(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eI(t){return de(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function nx(t,e,n){return{name:vm(t,e),fields:n.value.mapValue.fields}}function Sj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Z(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(de(d===void 0||typeof d=="string",58123),ot.fromBase64String(d||"")):(de(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),ot.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?L.UNKNOWN:KS(u.code);return new W(d,u.message||"")}(o);n=new YS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Bd(t,r.document.name),s=jn(r.document.updateTime),o=r.document.createTime?jn(r.document.createTime):ne.min(),a=new Ct({mapValue:{fields:r.document.fields}}),c=pt.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Ic(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Bd(t,r.document),s=r.readTime?jn(r.readTime):ne.min(),o=pt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ic([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Bd(t,r.document),s=r.removedTargetIds||[];n=new Ic([],s,i,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new fj(i,s),a=r.targetId;n=new QS(a,o)}}return n}function Ij(t,e){let n;if(e instanceof fl)n={update:nx(t,e.key,e.value)};else if(e instanceof mg)n={delete:vm(t,e.key)};else if(e instanceof fi)n={update:nx(t,e.key,e.data),updateMask:Vj(e.fieldMask)};else{if(!(e instanceof uj))return Z(16599,{Vt:e.type});n={verify:vm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Ya)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof to)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof wu)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Z(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Tj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z(27497)}(t,e.precondition)),n}function bj(t,e){return t&&t.length>0?(de(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?jn(i.updateTime):jn(s);return o.isEqual(ne.min())&&(o=jn(s)),new aj(o,i.transformResults||[])}(n,e))):[]}function kj(t,e){return{documents:[ZS(t,e.path)]}}function Cj(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZS(t,i);const s=function(u){if(u.length!==0)return nI(mn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:us(p.field),direction:Nj(p.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=gm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function Aj(t){let e=Ej(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){de(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const p=tI(f);return p instanceof mn&&PS(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(T){return new Qa(hs(T.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,oh(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,x=f.values||[];return new vu(x,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,x=f.values||[];return new vu(x,p)}(n.endAt)),KM(e,i,o,s,a,"F",c,u)}function Pj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hs(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=hs(n.unaryFilter.field);return $e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=hs(n.unaryFilter.field);return $e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=hs(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}}(t):t.fieldFilter!==void 0?function(n){return $e.create(hs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return mn.create(n.compositeFilter.filters.map(r=>tI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z(1026)}}(n.compositeFilter.op))}(t):Z(30097,{filter:t})}function Nj(t){return vj[t]}function Rj(t){return wj[t]}function Dj(t){return xj[t]}function us(t){return{fieldPath:t.canonicalString()}}function hs(t){return nt.fromServerFormat(t.fieldPath)}function nI(t){return t instanceof $e?function(n){if(n.op==="=="){if(zw(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NAN"}};if($w(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(zw(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NAN"}};if($w(n.value))return{unaryFilter:{field:us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:us(n.field),op:Rj(n.op),value:n.value}}}(t):t instanceof mn?function(n){const r=n.getFilters().map(i=>nI(i));return r.length===1?r[0]:{compositeFilter:{op:Dj(n.op),filters:r}}}(t):Z(54877,{filter:t})}function Vj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r,i,s=ne.min(),o=ne.min(),a=ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e){this.yt=e}}function jj(t){const e=Aj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.Cn=new Lj}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(ni.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class Lj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ge(ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ge(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iI=41943040;class bt{static withCacheSize(e){return new bt(e,bt.DEFAULT_COLLECTION_PERCENTILE,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bt.DEFAULT_COLLECTION_PERCENTILE=10,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bt.DEFAULT=new bt(iI,bt.DEFAULT_COLLECTION_PERCENTILE,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bt.DISABLED=new bt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new no(0)}static cr(){return new no(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="LruGarbageCollector",Fj=1048576;function sx([t,e],[n,r]){const i=le(t,n);return i===0?le(e,r):i}class Uj{constructor(e){this.Ir=e,this.buffer=new Ge(sx),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Bj{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){q(ix,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mo(n)?q(ix,"Ignoring IndexedDB error during garbage collection: ",n):await fo(n)}await this.Vr(3e5)})}}class $j{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(sh.ce);const r=new Uj(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(rx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rx):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ls()<=ae.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function zj(t,e){return new $j(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.changes=new Zi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_a(r.mutation,i,Ot.empty(),Ee.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ce()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ce()){const i=Vi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Zo();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Vi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ce()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=lr();const o=xa(),a=function(){return xa()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof fi)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),_a(d.mutation,u,d.mutation.getFieldMask(),Ee.now())):o.set(u.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>a.set(u,new Wj(d,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=xa();let i=new Ne((o,a)=>o-a),s=ce();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Ot.empty();d=a.applyToLocalView(u,d),r.set(c,d);const f=(i.get(a.batchId)||ce()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,d=c.value,f=FS();d.forEach(p=>{if(!s.has(p)){const x=qS(n.get(p),r.get(p));x!==null&&f.set(p,x),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):VS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(Vi());let a=Wa,c=s;return o.next(u=>F.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ce())).next(d=>({batchId:a,changes:LS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=Zo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Zo();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,c=>{const u=function(f,p){return new po(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,pt.newInvalidDocument(d)))});let a=Zo();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&_a(d.mutation,u,Ot.empty(),Ee.now()),uh(n,u)&&(a=a.insert(c,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:jj(i.bundledQuery),readTime:jn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.overlays=new Ne(Q.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vi();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Vi(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ne((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Vi(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Vi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return F.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new dj(n,r));let s=this.qr.get(n);s===void 0&&(s=ce(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.sessionToken=ot.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(){this.Qr=new Ge(Qe.$r),this.Ur=new Ge(Qe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Qe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Qe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Q(new ve([])),r=new Qe(n,e),i=new Qe(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Q(new ve([])),r=new Qe(n,e),i=new Qe(n,e+1);let s=ce();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Qe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Qe{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Q.comparator(e.key,n.key)||le(e.Yr,n.Yr)}static Kr(e,n){return le(e.Yr,n.Yr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ge(Qe.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hj(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new Qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?lg:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Qe(n,0),i=new Qe(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ge(le);return n.forEach(i=>{const s=new Qe(i,0),o=new Qe(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const o=new Qe(new Q(s),0);let a=new Ge(le);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)},o),F.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(n.mutations,i=>{const s=new Qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Qe(n,0),i=this.Zr.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.ri=e,this.docs=function(){return new Ne(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pt.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=lr();const o=n.path,a=new Q(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||kM(bM(d),r)<=0||(i.has(d.key)||uh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z(9500)}ii(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Jj(this)}getSize(e){return F.resolve(this.size)}}class Jj extends Hj{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.persistence=e,this.si=new Zi(n=>hg(n),dg),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.oi=0,this._i=new vg,this.targetCount=0,this.ai=no.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new no(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n){this.ui={},this.overlays={},this.ci=new sh(0),this.li=!1,this.li=!0,this.hi=new Qj,this.referenceDelegate=e(this),this.Pi=new Zj(this),this.indexManager=new Oj,this.remoteDocumentCache=function(i){return new Xj(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Mj(n),this.Ii=new Gj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Kj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Yj(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new eO(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return F.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class eO extends AM{constructor(e){super(),this.currentSequenceNumber=e}}class wg{constructor(e){this.persistence=e,this.Ri=new vg,this.Vi=null}static mi(e){return new wg(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,r=>{const i=Q.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ne.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class _u{constructor(e,n){this.persistence=e,this.pi=new Zi(r=>RM(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=zj(this,n)}static mi(e,n){return new _u(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?F.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,ne.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Tc(e.data.value)),n}br(e,n,r){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ce(),i=ce();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return GR()?8:PM(yt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new tO;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(ls()<=ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(ls()<=ae.DEBUG&&q("QueryEngine","Query:",cs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ls()<=ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(n))):F.resolve())}ys(e,n){if(Gw(n))return F.resolve(null);let r=Mn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=pm(n,null,"F"),r=Mn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ce(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,a);return this.Cs(n,u,o,c.readTime)?this.ys(e,pm(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,i){return Gw(n)||i.isEqual(ne.min())?F.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?F.resolve(null):(ls()<=ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cs(n)),this.vs(e,o,n,IM(i,Wa)).next(a=>a))})}Ds(e,n){let r=new Ge(jS(e));return n.forEach((i,s)=>{uh(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return ls()<=ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",cs(n)),this.ps.getDocumentsMatchingQuery(e,n,ni.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g="LocalStore",rO=3e8;class iO{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ne(le),this.xs=new Zi(s=>hg(s),dg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qj(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function sO(t,e,n,r){return new iO(t,e,n,r)}async function oI(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let c=ce();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function oO(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){const f=u.batch,p=f.keys();let x=F.resolve();return p.forEach(T=>{x=x.next(()=>d.getEntry(c,T)).next(A=>{const R=u.docVersions.get(T);de(R!==null,48541),A.version.compareTo(R)<0&&(f.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),d.addEntry(A)))})}),x.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ce();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function aI(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function aO(t,e){const n=re(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((d,f)=>{const p=i.get(f);if(!p)return;a.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,f)));let x=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?x=x.withResumeToken(ot.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):d.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(d.resumeToken,r)),i=i.insert(f,x),function(A,R,_){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=rO?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,x,d)&&a.push(n.Pi.updateTargetData(s,x))});let c=lr(),u=ce();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(lO(s,o,e.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!r.isEqual(ne.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.Ms=i,s))}function lO(t,e,n){let r=ce(),i=ce();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=lr();return n.forEach((a,c)=>{const u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q(_g,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:i}})}function cO(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=lg),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uO(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Nr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function xm(t,e,n){const r=re(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!mo(o))throw o;q(_g,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function ox(t,e,n){const r=re(t);let i=ne.min(),s=ce();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=re(c),p=f.xs.get(d);return p!==void 0?F.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,d)}(r,o,Mn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ne.min(),n?s:ce())).next(a=>(hO(r,YM(e),a),{documents:a,Qs:s})))}function hO(t,e,n){let r=t.Os.get(e)||ne.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class ax{constructor(){this.activeTargetIds=nj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class dO{constructor(){this.Mo=new ax,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ax,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx="ConnectivityMonitor";class cx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){q(lx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){q(lx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nc=null;function _m(){return nc===null?nc=function(){return 268435456+Math.round(2147483648*Math.random())}():nc++,"0x"+nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="RestConnection",mO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===gu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=_m(),a=this.zo(e,n.toUriEncodedString());q($d,`Sending RPC '${e}' ${o}:`,a,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:u}=new URL(a),d=lo(u);return this.Jo(e,a,c,r,d).then(f=>(q($d,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Xs($d,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ho}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=mO[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class yO extends pO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=_m();return new Promise((a,c)=>{const u=new lS;u.setWithCredentials(!0),u.listenOnce(cS.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _c.NO_ERROR:const f=u.getResponseJson();q(ut,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case _c.TIMEOUT:q(ut,`RPC '${e}' ${o} timed out`),c(new W(L.DEADLINE_EXCEEDED,"Request time out"));break;case _c.HTTP_ERROR:const p=u.getStatus();if(q(ut,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let x=u.getResponseJson();Array.isArray(x)&&(x=x[0]);const T=x==null?void 0:x.error;if(T&&T.status&&T.message){const A=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(y)>=0?y:L.UNKNOWN}(T.status);c(new W(A,T.message))}else c(new W(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new W(L.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{q(ut,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);q(ut,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=_m(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dS(),a=hS(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");q(ut,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=o.createWebChannel(d,c);this.I_(f);let p=!1,x=!1;const T=new gO({Yo:R=>{x?q(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(p||(q(ut,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),q(ut,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},Zo:()=>f.close()}),A=(R,_,y)=>{R.listen(_,w=>{try{y(w)}catch(k){setTimeout(()=>{throw k},0)}})};return A(f,Jo.EventType.OPEN,()=>{x||(q(ut,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),A(f,Jo.EventType.CLOSE,()=>{x||(x=!0,q(ut,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(f))}),A(f,Jo.EventType.ERROR,R=>{x||(x=!0,Xs(ut,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),T.a_(new W(L.UNAVAILABLE,"The operation could not be completed")))}),A(f,Jo.EventType.MESSAGE,R=>{var _;if(!x){const y=R.data[0];de(!!y,16349);const w=y,k=(w==null?void 0:w.error)||((_=w[0])==null?void 0:_.error);if(k){q(ut,`RPC '${e}' stream ${i} received error:`,k);const V=k.status;let O=function(S){const I=Fe[S];if(I!==void 0)return KS(I)}(V),b=k.message;O===void 0&&(O=L.INTERNAL,b="Unknown error status: "+V+" with message "+k.message),x=!0,T.a_(new W(O,b)),f.close()}else q(ut,`RPC '${e}' stream ${i} received:`,y),T.u_(y)}}),A(a,uS.STAT_EVENT,R=>{R.stat===lm.PROXY?q(ut,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===lm.NOPROXY&&q(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){return new _j(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="PersistentStream";class cI{constructor(e,n,r,i,s,o,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lI(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(ux,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(q(ux,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vO extends cI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Sj(this.serializer,e),r=function(s){if(!("targetChange"in s))return ne.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?jn(o.readTime):ne.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=wm(this.serializer),n.addTarget=function(s,o){let a;const c=o.target;if(a=fm(c)?{documents:kj(s,c)}:{query:Cj(s,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=XS(s,o.resumeToken);const u=gm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=xu(s,o.snapshotVersion.toTimestamp());const u=gm(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=Pj(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=wm(this.serializer),n.removeTarget=e,this.q_(n)}}class wO extends cI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=bj(e.writeResults,e.commitTime),r=jn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=wm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Ij(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{}class _O extends xO{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,ym(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(L.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,ym(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class TO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ar(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="RemoteStore";class EO{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{es(this)&&(q(Gi,"Restarting streams for network reachability change."),await async function(c){const u=re(c);u.Ea.add(4),await pl(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ph(u)}(this))})}),this.Ra=new TO(r,i)}}async function ph(t){if(es(t))for(const e of t.da)await e(!0)}async function pl(t){for(const e of t.da)await e(!1)}function uI(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Ig(n)?Sg(n):go(n).O_()&&Eg(n,e))}function Tg(t,e){const n=re(t),r=go(n);n.Ia.delete(e),r.O_()&&hI(n,e),n.Ia.size===0&&(r.O_()?r.L_():es(n)&&n.Ra.set("Unknown"))}function Eg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).Y_(e)}function hI(t,e){t.Va.Ue(e),go(t).Z_(e)}function Sg(t){t.Va=new yj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),go(t).start(),t.Ra.ua()}function Ig(t){return es(t)&&!go(t).x_()&&t.Ia.size>0}function es(t){return re(t).Ea.size===0}function dI(t){t.Va=void 0}async function SO(t){t.Ra.set("Online")}async function IO(t){t.Ia.forEach((e,n)=>{Eg(t,e)})}async function bO(t,e){dI(t),Ig(t)?(t.Ra.ha(e),Sg(t)):t.Ra.set("Unknown")}async function kO(t,e,n){if(t.Ra.set("Online"),e instanceof YS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){q(Gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tu(t,r)}else if(e instanceof Ic?t.Va.Ze(e):e instanceof QS?t.Va.st(e):t.Va.tt(e),!n.isEqual(ne.min()))try{const r=await aI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(ot.EMPTY_BYTE_STRING,d.snapshotVersion)),hI(s,c);const f=new Nr(d.target,c,u,d.sequenceNumber);Eg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q(Gi,"Failed to raise snapshot:",r),await Tu(t,r)}}async function Tu(t,e,n){if(!mo(e))throw e;t.Ea.add(1),await pl(t),t.Ra.set("Offline"),n||(n=()=>aI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Gi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ph(t)})}function fI(t,e){return e().catch(n=>Tu(t,n,e))}async function gh(t){const e=re(t),n=oi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:lg;for(;CO(e);)try{const i=await cO(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,AO(e,i)}catch(i){await Tu(e,i)}mI(e)&&pI(e)}function CO(t){return es(t)&&t.Ta.length<10}function AO(t,e){t.Ta.push(e);const n=oi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function mI(t){return es(t)&&!oi(t).x_()&&t.Ta.length>0}function pI(t){oi(t).start()}async function PO(t){oi(t).ra()}async function NO(t){const e=oi(t);for(const n of t.Ta)e.ea(n.mutations)}async function RO(t,e,n){const r=t.Ta.shift(),i=pg.from(r,e,n);await fI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gh(t)}async function DO(t,e){e&&oi(t).X_&&await async function(r,i){if(function(o){return mj(o)&&o!==L.ABORTED}(i.code)){const s=r.Ta.shift();oi(r).B_(),await fI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await gh(r)}}(t,e),mI(t)&&pI(t)}async function hx(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),q(Gi,"RemoteStore received new credentials");const r=es(n);n.Ea.add(3),await pl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ph(n)}async function VO(t,e){const n=re(t);e?(n.Ea.delete(2),await ph(n)):e||(n.Ea.add(2),await pl(n),n.Ra.set("Unknown"))}function go(t){return t.ma||(t.ma=function(n,r,i){const s=re(n);return s.sa(),new vO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:SO.bind(null,t),t_:IO.bind(null,t),r_:bO.bind(null,t),H_:kO.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Ig(t)?Sg(t):t.Ra.set("Unknown")):(await t.ma.stop(),dI(t))})),t.ma}function oi(t){return t.fa||(t.fa=function(n,r,i){const s=re(n);return s.sa(),new wO(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:PO.bind(null,t),r_:DO.bind(null,t),ta:NO.bind(null,t),na:RO.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await gh(t)):(await t.fa.stop(),t.Ta.length>0&&(q(Gi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new bg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kg(t,e){if(ar("AsyncQueue",`${e}: ${t}`),mo(t))return new W(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{static emptySet(e){return new Os(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Zo(),this.sortedSet=new Ne(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Os)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Os;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.ga=new Ne(Q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ro{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ro(e,n,Os.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ch(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class jO{constructor(){this.queries=fx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=re(n),s=i.queries;i.queries=fx(),s.forEach((o,a)=>{for(const c of a.Sa)c.onError(r)})})(this,new W(L.ABORTED,"Firestore shutting down"))}}function fx(){return new Zi(t=>MS(t),ch)}async function gI(t,e){const n=re(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new MO,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=kg(o,`Initialization of query '${cs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Cg(n)}async function yI(t,e){const n=re(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function OO(t,e){const n=re(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&Cg(n)}function LO(t,e,n){const r=re(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function Cg(t){t.Ca.forEach(e=>{e.next()})}var Tm,mx;(mx=Tm||(Tm={})).Ma="default",mx.Cache="cache";class vI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ro(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.key=e}}class xI{constructor(e){this.key=e}}class FO{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ce(),this.mutatedKeys=ce(),this.eu=jS(e),this.tu=new Os(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new dx,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const p=i.get(d),x=uh(this.query,f)?f:null,T=!!p&&this.mutatedKeys.has(p.key),A=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let R=!1;p&&x?p.data.isEqual(x.data)?T!==A&&(r.track({type:3,doc:x}),R=!0):this.su(p,x)||(r.track({type:2,doc:x}),R=!0,(c&&this.eu(x,c)>0||u&&this.eu(x,u)<0)&&(a=!0)):!p&&x?(r.track({type:0,doc:x}),R=!0):p&&!x&&(r.track({type:1,doc:p}),R=!0,(c||u)&&(a=!0)),R&&(x?(o=o.add(x),s=A?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,f)=>function(x,T){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:R})}};return A(x)-A(T)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new ro(this.query,e.tu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dx,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ce(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new xI(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new wI(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ce();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ag="SyncEngine";class UO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BO{constructor(e){this.key=e,this.hu=!1}}class $O{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zi(a=>MS(a),ch),this.Iu=new Map,this.Eu=new Set,this.du=new Ne(Q.comparator),this.Au=new Map,this.Ru=new vg,this.Vu={},this.mu=new Map,this.fu=no.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function zO(t,e,n=!0){const r=bI(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await _I(r,e,n,!0),i}async function HO(t,e){const n=bI(t);await _I(n,e,!0,!1)}async function _I(t,e,n,r){const i=await uO(t.localStore,Mn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await WO(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&uI(t.remoteStore,i),a}async function WO(t,e,n,r,i){t.pu=(f,p,x)=>async function(A,R,_,y){let w=R.view.ru(_);w.Cs&&(w=await ox(A.localStore,R.query,!1).then(({documents:b})=>R.view.ru(b,w)));const k=y&&y.targetChanges.get(R.targetId),V=y&&y.targetMismatches.get(R.targetId)!=null,O=R.view.applyChanges(w,A.isPrimaryClient,k,V);return gx(A,R.targetId,O.au),O.snapshot}(t,f,p,x);const s=await ox(t.localStore,e,!0),o=new FO(e,s.Qs),a=o.ru(s.documents),c=ml.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);gx(t,n,u.au);const d=new UO(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function qO(t,e,n){const r=re(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!ch(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Tg(r.remoteStore,i.targetId),Em(r,i.targetId)}).catch(fo)):(Em(r,i.targetId),await xm(r.localStore,i.targetId,!0))}async function GO(t,e){const n=re(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tg(n.remoteStore,r.targetId))}async function KO(t,e,n){const r=tL(t);try{const i=await function(o,a){const c=re(o),u=Ee.now(),d=a.reduce((x,T)=>x.add(T.key),ce());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let T=lr(),A=ce();return c.Ns.getEntries(x,d).next(R=>{T=R,T.forEach((_,y)=>{y.isValidDocument()||(A=A.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,T)).next(R=>{f=R;const _=[];for(const y of a){const w=cj(y,f.get(y.key).overlayedDocument);w!=null&&_.push(new fi(y.key,w,kS(w.value.mapValue),dn.exists(!0)))}return c.mutationQueue.addMutationBatch(x,u,_,a)}).next(R=>{p=R;const _=R.applyToLocalDocumentSet(f,A);return c.documentOverlayCache.saveOverlays(x,R.batchId,_)})}).then(()=>({batchId:p.batchId,changes:LS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ne(le)),u=u.insert(a,c),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await gl(r,i.changes),await gh(r.remoteStore)}catch(i){const s=kg(i,"Failed to persist write");n.reject(s)}}async function TI(t,e){const n=re(t);try{const r=await aO(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?de(o.hu,14607):i.removedDocuments.size>0&&(de(o.hu,42227),o.hu=!1))}),await gl(n,r,e)}catch(r){await fo(r)}}function px(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const c=re(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(const p of f.Sa)p.va(a)&&(u=!0)}),u&&Cg(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function QO(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ne(Q.comparator);o=o.insert(s,pt.newNoDocument(s,ne.min()));const a=ce().add(s),c=new fh(ne.min(),new Map,new Ne(le),o,a);await TI(r,c),r.du=r.du.remove(s),r.Au.delete(e),Pg(r)}else await xm(r.localStore,e,!1).then(()=>Em(r,e,n)).catch(fo)}async function YO(t,e){const n=re(t),r=e.batch.batchId;try{const i=await oO(n.localStore,e);SI(n,r,null),EI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gl(n,i)}catch(i){await fo(i)}}async function XO(t,e,n){const r=re(t);try{const i=await function(o,a){const c=re(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(de(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);SI(r,e,n),EI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await gl(r,i)}catch(i){await fo(i)}}function EI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function SI(t,e,n){const r=re(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Em(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||II(t,r)})}function II(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Tg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Pg(t))}function gx(t,e,n){for(const r of n)r instanceof wI?(t.Ru.addReference(r.key,e),JO(t,r)):r instanceof xI?(q(Ag,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||II(t,r.key)):Z(19791,{wu:r})}function JO(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(q(Ag,"New document in limbo: "+n),t.Eu.add(r),Pg(t))}function Pg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Q(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new BO(n)),t.du=t.du.insert(n,r),uI(t.remoteStore,new Nr(Mn(lh(n.path)),r,"TargetPurposeLimboResolution",sh.ce))}}async function gl(t,e,n){const r=re(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{o.push(r.pu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=xg.As(c.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,u){const d=re(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(u,p=>F.forEach(p.Es,x=>d.persistence.referenceDelegate.addReference(f,p.targetId,x)).next(()=>F.forEach(p.ds,x=>d.persistence.referenceDelegate.removeReference(f,p.targetId,x)))))}catch(f){if(!mo(f))throw f;q(_g,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const x=d.Ms.get(p),T=x.snapshotVersion,A=x.withLastLimboFreeSnapshotVersion(T);d.Ms=d.Ms.insert(p,A)}}}(r.localStore,s))}async function ZO(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){q(Ag,"User change. New user:",e.toKey());const r=await oI(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(c=>{c.reject(new W(L.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await gl(n,r.Ls)}}function eL(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return ce().add(r.key);{let i=ce();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function bI(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QO.bind(null,e),e.Pu.H_=OO.bind(null,e.eventManager),e.Pu.yu=LO.bind(null,e.eventManager),e}function tL(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=YO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XO.bind(null,e),e}class Eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return sO(this.persistence,new nO,e.initialUser,this.serializer)}Cu(e){return new sI(wg.mi,this.serializer)}Du(e){return new dO}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Eu.provider={build:()=>new Eu};class nL extends Eu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){de(this.persistence.referenceDelegate instanceof _u,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Bj(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?bt.withCacheSize(this.cacheSizeBytes):bt.DEFAULT;return new sI(r=>_u.mi(r,n),this.serializer)}}class Sm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>px(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZO.bind(null,this.syncEngine),await VO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new jO}()}createDatastore(e){const n=mh(e.databaseInfo.databaseId),r=function(s){return new yO(s)}(e.databaseInfo);return function(s,o,a,c){return new _O(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new EO(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>px(this.syncEngine,n,0),function(){return cx.v()?new cx:new fO}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,d){const f=new $O(i,s,o,a,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=re(i);q(Gi,"RemoteStore shutting down."),s.Ea.add(5),await pl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Sm.provider={build:()=>new Sm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="FirestoreClient";class rL{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=dt.UNAUTHENTICATED,this.clientId=ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q(ai,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(ai,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hd(t,e){t.asyncQueue.verifyOperationInProgress(),q(ai,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iL(t);q(ai,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>hx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>hx(e.remoteStore,i)),t._onlineComponents=e}async function iL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(ai,"Using user provided OfflineComponentProvider");try{await Hd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Xs("Error using user provided cache. Falling back to memory cache: "+n),await Hd(t,new Eu)}}else q(ai,"Using default OfflineComponentProvider"),await Hd(t,new nL(void 0));return t._offlineComponents}async function CI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(ai,"Using user provided OnlineComponentProvider"),await yx(t,t._uninitializedComponentsProvider._online)):(q(ai,"Using default OnlineComponentProvider"),await yx(t,new Sm))),t._onlineComponents}function sL(t){return CI(t).then(e=>e.syncEngine)}async function Im(t){const e=await CI(t),n=e.eventManager;return n.onListen=zO.bind(null,e.syncEngine),n.onUnlisten=qO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=HO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GO.bind(null,e.syncEngine),n}function oL(t,e,n={}){const r=new Kr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,c,u){const d=new kI({next:p=>{d.Nu(),o.enqueueAndForget(()=>yI(s,f));const x=p.docs.has(a);!x&&p.fromCache?u.reject(new W(L.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&p.fromCache&&c&&c.source==="server"?u.reject(new W(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new vI(lh(a.path),d,{includeMetadataChanges:!0,qa:!0});return gI(s,f)}(await Im(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="firestore.googleapis.com",wx=!0;class xx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PI,this.ssl=wx}else this.host=e.host,this.ssl=e.ssl??wx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Fj)throw new W(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mM;switch(r.type){case"firstParty":return new vM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vx.get(n);r&&(q("ComponentProvider","Removing Datastore"),vx.delete(n),r.terminate())}(this),Promise.resolve()}}function aL(t,e,n,r={}){var u;t=Vn(t,yh);const i=lo(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(EE(`https://${a}`),SE("Firestore",!0)),s.host!==PI&&s.host!==a&&Xs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:i,emulatorOptions:r};if(!ti(c,o)&&(t._setSettings(c),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=dt.MOCK_USER;else{d=LR(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new W(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new dt(p)}t._authCredentials=new pM(new mS(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class Le{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Le(this.firestore,e,this._key)}toJSON(){return{type:Le._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(dl(n,Le._jsonSchema))return new Le(e,r||null,new Q(ve.fromString(n.referencePath)))}}Le._jsonSchemaVersion="firestore/documentReference/1.0",Le._jsonSchema={type:ze("string",Le._jsonSchemaVersion),referencePath:ze("string")};class Qr extends ts{constructor(e,n,r){super(e,n,lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Le(this.firestore,null,new Q(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function vh(t,e,...n){if(t=Je(t),pS("collection","path",e),t instanceof yh){const r=ve.fromString(e,...n);return Dw(r),new Qr(t,null,r)}{if(!(t instanceof Le||t instanceof Qr))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Dw(r),new Qr(t.firestore,null,r)}}function mi(t,e,...n){if(t=Je(t),arguments.length===1&&(e=ag.newId()),pS("doc","path",e),t instanceof yh){const r=ve.fromString(e,...n);return Rw(r),new Le(t,null,new Q(r))}{if(!(t instanceof Le||t instanceof Qr))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Rw(r),new Le(t.firestore,t instanceof Qr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="AsyncQueue";class Tx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lI(this,"async_queue_retry"),this._c=()=>{const r=zd();r&&q(_x,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=zd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=zd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Kr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mo(e))throw e;q(_x,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ar("INTERNAL UNHANDLED ERROR: ",Ex(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=bg.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Z(47125,{Pc:Ex(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Ex(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ki extends yh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Tx,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tx(e),this._firestoreClient=void 0,await e}}}function lL(t,e){const n=typeof t=="object"?t:CE(),r=typeof t=="string"?t:e||gu,i=Qp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=jR("firestore");s&&aL(i,...s)}return i}function Ng(t){if(t._terminated)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cL(t),t._firestoreClient}function cL(t){var r,i,s;const e=t._freezeSettings(),n=function(a,c,u,d){return new MM(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,AI(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new rL(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kt(ot.fromBase64String(e))}catch(n){throw new W(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Kt(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dl(e,Kt._jsonSchema))return Kt.fromBase64String(e.bytes)}}Kt._jsonSchemaVersion="firestore/bytes/1.0",Kt._jsonSchema={type:ze("string",Kt._jsonSchemaVersion),bytes:ze("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:On._jsonSchemaVersion}}static fromJSON(e){if(dl(e,On._jsonSchema))return new On(e.latitude,e.longitude)}}On._jsonSchemaVersion="firestore/geoPoint/1.0",On._jsonSchema={type:ze("string",On._jsonSchemaVersion),latitude:ze("number"),longitude:ze("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ln._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dl(e,Ln._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ln(e.vectorValues);throw new W(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ln._jsonSchemaVersion="firestore/vectorValue/1.0",Ln._jsonSchema={type:ze("string",Ln._jsonSchemaVersion),vectorValues:ze("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=/^__.*__$/;class hL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fi(e,this.data,this.fieldMask,n,this.fieldTransforms):new fl(e,this.data,n,this.fieldTransforms)}}class NI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function RI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:t})}}class xh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Su(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(RI(this.Ac)&&uL.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mh(e)}Cc(e,n,r,i=!1){return new xh({Ac:e,methodName:n,Dc:r,path:nt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rg(t){const e=t._freezeSettings(),n=mh(t._databaseId);return new dL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function fL(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Mg("Data must be an object, but it was:",o,r);const a=DI(r,o);let c,u;if(s.merge)c=new Ot(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const p=bm(e,f,n);if(!o.contains(p))throw new W(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);MI(d,p)||d.push(p)}c=new Ot(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new hL(new Ct(a),c,u)}class _h extends yl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _h}}function mL(t,e,n){return new xh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Dg extends yl{_toFieldTransform(e){return new WS(e.path,new Ya)}isEqual(e){return e instanceof Dg}}class Vg extends yl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=mL(this,e,!0),r=this.vc.map(s=>yo(s,n)),i=new to(r);return new WS(e.path,i)}isEqual(e){return e instanceof Vg&&ti(this.vc,e.vc)}}function pL(t,e,n,r){const i=t.Cc(1,e,n);Mg("Data must be an object, but it was:",i,r);const s=[],o=Ct.empty();di(r,(c,u)=>{const d=jg(e,c,n);u=Je(u);const f=i.yc(d);if(u instanceof _h)s.push(d);else{const p=yo(u,f);p!=null&&(s.push(d),o.set(d,p))}});const a=new Ot(s);return new NI(o,a,i.fieldTransforms)}function gL(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[bm(e,r,n)],c=[i];if(s.length%2!=0)throw new W(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(bm(e,s[p])),c.push(s[p+1]);const u=[],d=Ct.empty();for(let p=a.length-1;p>=0;--p)if(!MI(u,a[p])){const x=a[p];let T=c[p];T=Je(T);const A=o.yc(x);if(T instanceof _h)u.push(x);else{const R=yo(T,A);R!=null&&(u.push(x),d.set(x,R))}}const f=new Ot(u);return new NI(d,f,o.fieldTransforms)}function yL(t,e,n,r=!1){return yo(n,t.Cc(r?4:3,e))}function yo(t,e){if(VI(t=Je(t)))return Mg("Unsupported field value:",e,t),DI(t,e);if(t instanceof yl)return function(r,i){if(!RI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let c=yo(a,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ee.fromDate(r);return{timestampValue:xu(i.serializer,s)}}if(r instanceof Ee){const s=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xu(i.serializer,s)}}if(r instanceof On)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Kt)return{bytesValue:XS(i.serializer,r._byteString)};if(r instanceof Le){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:yg(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ln)return function(o,a){return{mapValue:{fields:{[SS]:{stringValue:bS},[yu]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return fg(a.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${ih(r)}`)}(t,e)}function DI(t,e){const n={};return vS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):di(t,(r,i)=>{const s=yo(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function VI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof On||t instanceof Kt||t instanceof Le||t instanceof yl||t instanceof Ln)}function Mg(t,e,n){if(!VI(n)||!gS(n)){const r=ih(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function bm(t,e,n){if((e=Je(e))instanceof wh)return e._internalPath;if(typeof e=="string")return jg(t,e);throw Su("Field path arguments must be of type string or ",t,!1,void 0,n)}const vL=new RegExp("[~\\*/\\[\\]]");function jg(t,e,n){if(e.search(vL)>=0)throw Su(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wh(...e.split("."))._internalPath}catch{throw Su(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Su(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new W(L.INVALID_ARGUMENT,a+t+c)}function MI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Le(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Th("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class wL extends jI{data(){return super.data()}}function Th(t,e){return typeof e=="string"?jg(t,e):e instanceof wh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Og{}class OI extends Og{}function LI(t,e,...n){let r=[];e instanceof Og&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof Lg).length,a=s.filter(c=>c instanceof Eh).length;if(o>1||o>0&&a>0)throw new W(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Eh extends OI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Eh(e,n,r)}_apply(e){const n=this._parse(e);return UI(e._query,n),new ts(e.firestore,e.converter,mm(e._query,n))}_parse(e){const n=Rg(e.firestore);return function(s,o,a,c,u,d,f){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new W(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){bx(f,d);const T=[];for(const A of f)T.push(Ix(c,s,A));p={arrayValue:{values:T}}}else p=Ix(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||bx(f,d),p=yL(a,o,f,d==="in"||d==="not-in");return $e.create(u,d,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function _L(t,e,n){const r=e,i=Th("where",t);return Eh._create(i,r,n)}class Lg extends Og{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const c of a)UI(o,c),o=mm(o,c)}(e._query,n),new ts(e.firestore,e.converter,mm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fg extends OI{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fg(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new W(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qa(s,o)}(e._query,this._field,this._direction);return new ts(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new po(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function FI(t,e="asc"){const n=e,r=Th("orderBy",t);return Fg._create(r,n)}function Ix(t,e,n){if(typeof(n=Je(n))=="string"){if(n==="")throw new W(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VS(e)&&n.indexOf("/")!==-1)throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!Q.isDocumentKey(r))throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bw(t,new Q(r))}if(n instanceof Le)return Bw(t,n._key);throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ih(n)}.`)}function bx(t,e){if(!Array.isArray(t)||t.length===0)throw new W(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function UI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class TL{convertValue(e,n="none"){switch(si(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return di(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[yu].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>je(o.doubleValue));return new Ln(n)}convertGeoPoint(e){return new On(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ah(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qa(e));default:return null}}convertTimestamp(e){const n=ri(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);de(rI(r),9688,{name:e});const i=new Ga(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||ar(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Li extends jI{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Th("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Li._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Li._jsonSchemaVersion="firestore/documentSnapshot/1.0",Li._jsonSchema={type:ze("string",Li._jsonSchemaVersion),bundleSource:ze("string","DocumentSnapshot"),bundleName:ze("string"),bundle:ze("string")};class bc extends Li{data(e={}){return super.data(e)}}class Ls{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bc(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const c=new bc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const c=new bc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ta(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:SL(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ls._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t){t=Vn(t,Le);const e=Vn(t.firestore,Ki);return oL(Ng(e),t._key).then(n=>HI(e,t,n))}Ls._jsonSchemaVersion="firestore/querySnapshot/1.0",Ls._jsonSchema={type:ze("string",Ls._jsonSchemaVersion),bundleSource:ze("string","QuerySnapshot"),bundleName:ze("string"),bundle:ze("string")};class BI extends TL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Le(this.firestore,null,n)}}function vo(t,e,n,...r){t=Vn(t,Le);const i=Vn(t.firestore,Ki),s=Rg(i);let o;return o=typeof(e=Je(e))=="string"||e instanceof wh?gL(s,"updateDoc",t._key,e,n,r):pL(s,"updateDoc",t._key,e),Ug(i,[o.toMutation(t._key,dn.exists(!0))])}function bL(t){return Ug(Vn(t.firestore,Ki),[new mg(t._key,dn.none())])}function $I(t,e){const n=Vn(t.firestore,Ki),r=mi(t),i=EL(t.converter,e);return Ug(n,[fL(Rg(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function zI(t,...e){var c,u,d;t=Je(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Sx(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Sx(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,o,a;if(t instanceof Le)o=Vn(t.firestore,Ki),a=lh(t._key.path),s={next:f=>{e[r]&&e[r](HI(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Vn(t,ts);o=Vn(f.firestore,Ki),a=f._query;const p=new BI(o);s={next:x=>{e[r]&&e[r](new Ls(o,p,f,x))},error:e[r+1],complete:e[r+2]},xL(t._query)}return function(p,x,T,A){const R=new kI(A),_=new vI(x,R,T);return p.asyncQueue.enqueueAndForget(async()=>gI(await Im(p),_)),()=>{R.Nu(),p.asyncQueue.enqueueAndForget(async()=>yI(await Im(p),_))}}(Ng(o),a,i,s)}function Ug(t,e){return function(r,i){const s=new Kr;return r.asyncQueue.enqueueAndForget(async()=>KO(await sL(r),i,s)),s.promise}(Ng(t),e)}function HI(t,e,n){const r=n.docs.get(e._key),i=new BI(t);return new Li(t,i,e._key,r,new ta(n.hasPendingWrites,n.fromCache),e.converter)}function Ft(){return new Dg("serverTimestamp")}function WI(...t){return new Vg("arrayUnion",t)}(function(e,n=!0){(function(i){ho=i})(co),Qs(new Hi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ki(new gM(r.getProvider("auth-internal")),new wM(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new W(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(u.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qr(Cw,Aw,e),qr(Cw,Aw,"esm2020")})();const kL={apiKey:"AIzaSyA8xJa7JOxWDgGcu51tQYiQq-GNscb1VaA",authDomain:"skeduler-acddf.firebaseapp.com",projectId:"skeduler-acddf",storageBucket:"skeduler-acddf.firebasestorage.app",messagingSenderId:"425131930464",appId:"1:425131930464:web:109fe2abbb290d81852405"},qI=kE(kL),Bg=uM(qI),gn=lL(qI),CL=new Hn,AL=async()=>{try{return(await w4(Bg,CL)).user}catch(t){throw console.error("Google 로그인 오류:",t),t}},PL=async()=>{try{await ZV(Bg)}catch(t){throw console.error("로그아웃 오류:",t),t}},GI=j.createContext(),Sh=()=>{const t=j.useContext(GI);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},NL=({children:t})=>{const[e,n]=j.useState(null),[r,i]=j.useState(!0),[s,o]=j.useState(!1);j.useEffect(()=>JV(Bg,f=>{if(n(f),i(!1),f&&f.email){const p=f.email.endsWith("@kaist.ac.kr"),x=f.email.endsWith("@gmail.com");o(p||x)}else o(!1)}),[]);const u={user:e,loading:r,isKaistUser:s,login:async()=>{try{return await AL()}catch(d){throw console.error("로그인 실패:",d),d}},logout:async()=>{try{await PL()}catch(d){throw console.error("로그아웃 실패:",d),d}}};return h.jsx(GI.Provider,{value:u,children:t})},RL=()=>{var c,u;const{user:t,logout:e,isKaistUser:n}=Sh(),[r,i]=j.useState(!1),s=async()=>{try{await e(),i(!1)}catch(d){console.error("로그아웃 실패:",d)}},o=()=>t!=null&&t.displayName?t.displayName:t!=null&&t.email?t.email.split("@")[0]:"사용자",a=()=>o().charAt(0).toUpperCase();return h.jsxs("div",{className:"relative",children:[h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(!r),className:"flex items-center space-x-3 p-2 rounded-xl hover:bg-white/50 dark:hover:bg-gray-700/50 transition-all duration-300",children:[h.jsx("div",{className:"w-8 h-8 bg-kaist-blue rounded-full flex items-center justify-center text-white font-bold text-sm",children:a()}),h.jsxs("div",{className:"hidden md:block text-left",children:[h.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:o()}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:n?(c=t==null?void 0:t.email)!=null&&c.endsWith("@kaist.ac.kr")?"KAIST 구성원":"Gmail 사용자":"외부 사용자"})]}),h.jsx(wR,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${r?"rotate-180":""}`})]}),h.jsx(Ju,{children:r&&h.jsxs(B.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-gray-800 rounded-xl shadow-xl border border-gray-200 dark:border-gray-700 py-2 z-50",children:[h.jsx("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-12 h-12 bg-kaist-blue rounded-full flex items-center justify-center text-white font-bold",children:a()}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:o()}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t==null?void 0:t.email}),n&&h.jsx("span",{className:"inline-block mt-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs rounded-full",children:(u=t==null?void 0:t.email)!=null&&u.endsWith("@kaist.ac.kr")?"KAIST 구성원":"Gmail 사용자"})]})]})}),h.jsxs("div",{className:"py-2",children:[h.jsxs(B.button,{whileHover:{backgroundColor:"rgba(0, 65, 145, 0.1)"},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[h.jsx(bR,{className:"w-4 h-4"}),h.jsx("span",{children:"프로필"})]}),h.jsxs(B.button,{whileHover:{backgroundColor:"rgba(0, 65, 145, 0.1)"},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[h.jsx(pE,{className:"w-4 h-4"}),h.jsx("span",{children:"설정"})]}),h.jsxs(B.button,{whileHover:{backgroundColor:"rgba(0, 65, 145, 0.1)"},className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-gray-700 dark:text-gray-200 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:[h.jsx(Kn,{className:"w-4 h-4"}),h.jsx("span",{children:"알림"})]})]}),h.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-2",children:h.jsxs(B.button,{whileHover:{backgroundColor:"rgba(239, 68, 68, 0.1)"},onClick:s,className:"w-full flex items-center space-x-3 px-4 py-2 text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[h.jsx(_R,{className:"w-4 h-4"}),h.jsx("span",{children:"로그아웃"})]})})]})})]})},DL=({view:t,setView:e,onAddEvent:n,onLogin:r})=>{const[i,s]=kR(),{user:o}=Sh();return h.jsx(B.header,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.6},className:"sticky top-0 z-50 glass-effect border-b border-white/20",children:h.jsx("div",{className:"container mx-auto px-4 py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs(B.div,{whileHover:{scale:1.05},className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-kaist-blue to-kaist-lightblue rounded-xl flex items-center justify-center",children:h.jsx(Yt,{className:"w-6 h-6 text-white"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-kaist-blue",children:"KAIST Scheduler"}),h.jsx("p",{className:"text-sm text-gray-600",children:"스마트한 일정 관리"})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e("calendar"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 ${t==="calendar"?"bg-kaist-blue text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[h.jsx(Yt,{className:"w-4 h-4"}),h.jsx("span",{className:"font-medium",children:"대시보드"})]}),h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e("schedule"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 ${t==="schedule"?"bg-kaist-blue text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50"}`,children:[h.jsx("span",{className:"font-medium",children:"📋"}),h.jsx("span",{className:"font-medium",children:"스케줄"})]}),h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>e("meetings"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 ${t==="meetings"?"bg-kaist-blue text-white shadow-lg":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[h.jsx(Xt,{className:"w-4 h-4"}),h.jsx("span",{className:"font-medium",children:"모임"})]})]}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-3 bg-white dark:bg-gray-700 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 text-gray-600 dark:text-gray-300 hover:text-kaist-blue dark:hover:text-blue-400",children:h.jsx(Kn,{className:"w-5 h-5"})}),h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:s,className:"p-3 bg-white dark:bg-gray-700 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 text-gray-600 dark:text-gray-300 hover:text-kaist-blue dark:hover:text-blue-400",children:i?h.jsx(SR,{className:"w-5 h-5"}):h.jsx(ER,{className:"w-5 h-5"})}),h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"btn-primary flex items-center space-x-2",children:[h.jsx(Zu,{className:"w-4 h-4"}),h.jsx("span",{children:"일정 추가"})]}),o?h.jsx(RL,{}):h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"btn-secondary flex items-center space-x-2",children:[h.jsx(Xt,{className:"w-4 h-4"}),h.jsx("span",{children:"로그인"})]})]})]})})})};function Iu(t){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iu(t)}function pn(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ie(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function it(t){Ie(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Iu(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function $g(t,e){Ie(2,arguments);var n=it(t),r=pn(e);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function VL(t,e){Ie(2,arguments);var n=it(t).getTime(),r=pn(e);return new Date(n+r)}var ML={};function wo(){return ML}function jL(t,e){var n,r,i,s,o,a,c,u;Ie(1,arguments);var d=wo(),f=pn((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=it(t),x=p.getDay(),T=(x<f?7:0)+x-f;return p.setDate(p.getDate()-T),p.setHours(0,0,0,0),p}function OL(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function kx(t){Ie(1,arguments);var e=it(t);return e.setHours(0,0,0,0),e}function zg(t,e){Ie(2,arguments);var n=kx(t),r=kx(e);return n.getTime()===r.getTime()}function LL(t){return Ie(1,arguments),t instanceof Date||Iu(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function FL(t){if(Ie(1,arguments),!LL(t)&&typeof t!="number")return!1;var e=it(t);return!isNaN(Number(e))}function UL(t,e){var n;Ie(1,arguments);var r=t||{},i=it(r.start),s=it(r.end),o=s.getTime();if(!(i.getTime()<=o))throw new RangeError("Invalid interval");var a=[],c=i;c.setHours(0,0,0,0);var u=Number((n=e==null?void 0:e.step)!==null&&n!==void 0?n:1);if(u<1||isNaN(u))throw new RangeError("`options.step` must be a number greater than 1");for(;c.getTime()<=o;)a.push(it(c)),c.setDate(c.getDate()+u),c.setHours(0,0,0,0);return a}function BL(t,e){var n,r,i,s,o,a,c,u;Ie(1,arguments);var d=wo(),f=pn((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=it(t),x=p.getDay(),T=(x<f?-7:0)+6-(x-f);return p.setDate(p.getDate()+T),p.setHours(23,59,59,999),p}function $L(t,e){Ie(2,arguments);var n=pn(e);return VL(t,-n)}var zL=864e5;function HL(t){Ie(1,arguments);var e=it(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),i=n-r;return Math.floor(i/zL)+1}function bu(t){Ie(1,arguments);var e=1,n=it(t),r=n.getUTCDay(),i=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function KI(t){Ie(1,arguments);var e=it(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=bu(r),s=new Date(0);s.setUTCFullYear(n,0,4),s.setUTCHours(0,0,0,0);var o=bu(s);return e.getTime()>=i.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function WL(t){Ie(1,arguments);var e=KI(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=bu(n);return r}var qL=6048e5;function GL(t){Ie(1,arguments);var e=it(t),n=bu(e).getTime()-WL(e).getTime();return Math.round(n/qL)+1}function ku(t,e){var n,r,i,s,o,a,c,u;Ie(1,arguments);var d=wo(),f=pn((n=(r=(i=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.weekStartsOn)!==null&&i!==void 0?i:d.weekStartsOn)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=it(t),x=p.getUTCDay(),T=(x<f?7:0)+x-f;return p.setUTCDate(p.getUTCDate()-T),p.setUTCHours(0,0,0,0),p}function QI(t,e){var n,r,i,s,o,a,c,u;Ie(1,arguments);var d=it(t),f=d.getUTCFullYear(),p=wo(),x=pn((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(x>=1&&x<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=new Date(0);T.setUTCFullYear(f+1,0,x),T.setUTCHours(0,0,0,0);var A=ku(T,e),R=new Date(0);R.setUTCFullYear(f,0,x),R.setUTCHours(0,0,0,0);var _=ku(R,e);return d.getTime()>=A.getTime()?f+1:d.getTime()>=_.getTime()?f:f-1}function KL(t,e){var n,r,i,s,o,a,c,u;Ie(1,arguments);var d=wo(),f=pn((n=(r=(i=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(o=e.locale)===null||o===void 0||(a=o.options)===null||a===void 0?void 0:a.firstWeekContainsDate)!==null&&i!==void 0?i:d.firstWeekContainsDate)!==null&&r!==void 0?r:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=QI(t,e),x=new Date(0);x.setUTCFullYear(p,0,f),x.setUTCHours(0,0,0,0);var T=ku(x,e);return T}var QL=6048e5;function YL(t,e){Ie(1,arguments);var n=it(t),r=ku(n,e).getTime()-KL(n,e).getTime();return Math.round(r/QL)+1}function fe(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var XL={y:function(e,n){var r=e.getUTCFullYear(),i=r>0?r:1-r;return fe(n==="yy"?i%100:i,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):fe(r+1,2)},d:function(e,n){return fe(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return fe(e.getUTCHours()%12||12,n.length)},H:function(e,n){return fe(e.getUTCHours(),n.length)},m:function(e,n){return fe(e.getUTCMinutes(),n.length)},s:function(e,n){return fe(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,i=e.getUTCMilliseconds(),s=Math.floor(i*Math.pow(10,r-3));return fe(s,n.length)}};const wr=XL;var as={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},JL={G:function(e,n,r){var i=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var i=e.getUTCFullYear(),s=i>0?i:1-i;return r.ordinalNumber(s,{unit:"year"})}return wr.y(e,n)},Y:function(e,n,r,i){var s=QI(e,i),o=s>0?s:1-s;if(n==="YY"){var a=o%100;return fe(a,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):fe(o,n.length)},R:function(e,n){var r=KI(e);return fe(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return fe(r,n.length)},Q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(i);case"QQ":return fe(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(e,n,r){var i=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(i);case"qq":return fe(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(e,n,r){var i=e.getUTCMonth();switch(n){case"M":case"MM":return wr.M(e,n);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(e,n,r){var i=e.getUTCMonth();switch(n){case"L":return String(i+1);case"LL":return fe(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(e,n,r,i){var s=YL(e,i);return n==="wo"?r.ordinalNumber(s,{unit:"week"}):fe(s,n.length)},I:function(e,n,r){var i=GL(e);return n==="Io"?r.ordinalNumber(i,{unit:"week"}):fe(i,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):wr.d(e,n)},D:function(e,n,r){var i=HL(e);return n==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):fe(i,n.length)},E:function(e,n,r){var i=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return fe(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,r,i){var s=e.getUTCDay(),o=(s-i.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return fe(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,r){var i=e.getUTCDay(),s=i===0?7:i;switch(n){case"i":return String(s);case"ii":return fe(s,n.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(e,n,r){var i=e.getUTCHours(),s=i/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,r){var i=e.getUTCHours(),s;switch(i===12?s=as.noon:i===0?s=as.midnight:s=i/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,r){var i=e.getUTCHours(),s;switch(i>=17?s=as.evening:i>=12?s=as.afternoon:i>=4?s=as.morning:s=as.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var i=e.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return wr.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):wr.H(e,n)},K:function(e,n,r){var i=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(i,{unit:"hour"}):fe(i,n.length)},k:function(e,n,r){var i=e.getUTCHours();return i===0&&(i=24),n==="ko"?r.ordinalNumber(i,{unit:"hour"}):fe(i,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):wr.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):wr.s(e,n)},S:function(e,n){return wr.S(e,n)},X:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return Ax(o);case"XXXX":case"XX":return Ci(o);case"XXXXX":case"XXX":default:return Ci(o,":")}},x:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"x":return Ax(o);case"xxxx":case"xx":return Ci(o);case"xxxxx":case"xxx":default:return Ci(o,":")}},O:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Cx(o,":");case"OOOO":default:return"GMT"+Ci(o,":")}},z:function(e,n,r,i){var s=i._originalDate||e,o=s.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Cx(o,":");case"zzzz":default:return"GMT"+Ci(o,":")}},t:function(e,n,r,i){var s=i._originalDate||e,o=Math.floor(s.getTime()/1e3);return fe(o,n.length)},T:function(e,n,r,i){var s=i._originalDate||e,o=s.getTime();return fe(o,n.length)}};function Cx(t,e){var n=t>0?"-":"+",r=Math.abs(t),i=Math.floor(r/60),s=r%60;if(s===0)return n+String(i);var o=e||"";return n+String(i)+o+fe(s,2)}function Ax(t,e){if(t%60===0){var n=t>0?"-":"+";return n+fe(Math.abs(t)/60,2)}return Ci(t,e)}function Ci(t,e){var n=e||"",r=t>0?"-":"+",i=Math.abs(t),s=fe(Math.floor(i/60),2),o=fe(i%60,2);return r+s+n+o}const ZL=JL;var Px=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},YI=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},e3=function(e,n){var r=e.match(/(P+)(p+)?/)||[],i=r[1],s=r[2];if(!s)return Px(e,n);var o;switch(i){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",Px(i,n)).replace("{{time}}",YI(s,n))},t3={p:YI,P:e3};const n3=t3;var r3=["D","DD"],i3=["YY","YYYY"];function s3(t){return r3.indexOf(t)!==-1}function o3(t){return i3.indexOf(t)!==-1}function Nx(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var a3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},l3=function(e,n,r){var i,s=a3[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};const c3=l3;function Fs(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var u3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},h3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},d3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},f3={date:Fs({formats:u3,defaultWidth:"full"}),time:Fs({formats:h3,defaultWidth:"full"}),dateTime:Fs({formats:d3,defaultWidth:"full"})};const m3=f3;var p3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},g3=function(e,n,r,i){return p3[e]};const y3=g3;function bn(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",i;if(r==="formatting"&&t.formattingValues){var s=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):s;i=t.formattingValues[o]||t.formattingValues[s]}else{var a=t.defaultWidth,c=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[c]||t.values[a]}var u=t.argumentCallback?t.argumentCallback(e):e;return i[u]}}var v3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},w3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},x3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},T3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},E3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},S3=function(e,n){var r=Number(e),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},I3={ordinalNumber:S3,era:bn({values:v3,defaultWidth:"wide"}),quarter:bn({values:w3,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:bn({values:x3,defaultWidth:"wide"}),day:bn({values:_3,defaultWidth:"wide"}),dayPeriod:bn({values:T3,defaultWidth:"wide",formattingValues:E3,defaultFormattingWidth:"wide"})};const b3=I3;function kn(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;var o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?C3(a,function(f){return f.test(o)}):k3(a,function(f){return f.test(o)}),u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var d=e.slice(o.length);return{value:u,rest:d}}}function k3(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function C3(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function XI(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var i=r[0],s=e.match(t.parsePattern);if(!s)return null;var o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;var a=e.slice(i.length);return{value:o,rest:a}}}var A3=/^(\d+)(th|st|nd|rd)?/i,P3=/\d+/i,N3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},R3={any:[/^b/i,/^(a|c)/i]},D3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},V3={any:[/1/i,/2/i,/3/i,/4/i]},M3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},j3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},O3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},L3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},F3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},U3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},B3={ordinalNumber:XI({matchPattern:A3,parsePattern:P3,valueCallback:function(e){return parseInt(e,10)}}),era:kn({matchPatterns:N3,defaultMatchWidth:"wide",parsePatterns:R3,defaultParseWidth:"any"}),quarter:kn({matchPatterns:D3,defaultMatchWidth:"wide",parsePatterns:V3,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:kn({matchPatterns:M3,defaultMatchWidth:"wide",parsePatterns:j3,defaultParseWidth:"any"}),day:kn({matchPatterns:O3,defaultMatchWidth:"wide",parsePatterns:L3,defaultParseWidth:"any"}),dayPeriod:kn({matchPatterns:F3,defaultMatchWidth:"any",parsePatterns:U3,defaultParseWidth:"any"})};const $3=B3;var z3={code:"en-US",formatDistance:c3,formatLong:m3,formatRelative:y3,localize:b3,match:$3,options:{weekStartsOn:0,firstWeekContainsDate:1}};const H3=z3;var W3=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,q3=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,G3=/^'([^]*?)'?$/,K3=/''/g,Q3=/[a-zA-Z]/;function Cn(t,e,n){var r,i,s,o,a,c,u,d,f,p,x,T,A,R,_,y,w,k;Ie(2,arguments);var V=String(e),O=wo(),b=(r=(i=n==null?void 0:n.locale)!==null&&i!==void 0?i:O.locale)!==null&&r!==void 0?r:H3,v=pn((s=(o=(a=(c=n==null?void 0:n.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(u=n.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:O.firstWeekContainsDate)!==null&&o!==void 0?o:(f=O.locale)===null||f===void 0||(p=f.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var S=pn((x=(T=(A=(R=n==null?void 0:n.weekStartsOn)!==null&&R!==void 0?R:n==null||(_=n.locale)===null||_===void 0||(y=_.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&A!==void 0?A:O.weekStartsOn)!==null&&T!==void 0?T:(w=O.locale)===null||w===void 0||(k=w.options)===null||k===void 0?void 0:k.weekStartsOn)!==null&&x!==void 0?x:0);if(!(S>=0&&S<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!b.localize)throw new RangeError("locale must contain localize property");if(!b.formatLong)throw new RangeError("locale must contain formatLong property");var I=it(t);if(!FL(I))throw new RangeError("Invalid time value");var P=OL(I),N=$L(I,P),C={firstWeekContainsDate:v,weekStartsOn:S,locale:b,_originalDate:I},Y=V.match(q3).map(function(ee){var oe=ee[0];if(oe==="p"||oe==="P"){var Me=n3[oe];return Me(ee,b.formatLong)}return ee}).join("").match(W3).map(function(ee){if(ee==="''")return"'";var oe=ee[0];if(oe==="'")return Y3(ee);var Me=ZL[oe];if(Me)return!(n!=null&&n.useAdditionalWeekYearTokens)&&o3(ee)&&Nx(ee,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&s3(ee)&&Nx(ee,e,String(t)),Me(N,ee,b.localize,C);if(oe.match(Q3))throw new RangeError("Format string contains an unescaped latin alphabet character `"+oe+"`");return ee}).join("");return Y}function Y3(t){var e=t.match(G3);return e?e[1].replace(K3,"'"):t}function kc(t){return Ie(1,arguments),zg(t,Date.now())}function JI(t){return Ie(1,arguments),zg(t,$g(Date.now(),1))}function X3(t,e){Ie(2,arguments);var n=pn(e);return $g(t,-n)}function ZI(t){return Ie(1,arguments),zg(t,X3(Date.now(),1))}var J3={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},Z3=function(e,n,r){var i,s=J3[e];return typeof s=="string"?i=s:n===1?i=s.one:i=s.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?i+" 후":i+" 전":i};const e6=Z3;var t6={full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},n6={full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},r6={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},i6={date:Fs({formats:t6,defaultWidth:"full"}),time:Fs({formats:n6,defaultWidth:"full"}),dateTime:Fs({formats:r6,defaultWidth:"full"})};const s6=i6;var o6={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},a6=function(e,n,r,i){return o6[e]};const l6=a6;var c6={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},u6={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},h6={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},d6={narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},f6={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},m6={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},p6=function(e,n){var r=Number(e),i=String(n==null?void 0:n.unit);switch(i){case"minute":case"second":return String(r);case"date":return r+"일";default:return r+"번째"}},g6={ordinalNumber:p6,era:bn({values:c6,defaultWidth:"wide"}),quarter:bn({values:u6,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:bn({values:h6,defaultWidth:"wide"}),day:bn({values:d6,defaultWidth:"wide"}),dayPeriod:bn({values:f6,defaultWidth:"wide",formattingValues:m6,defaultFormattingWidth:"wide"})};const y6=g6;var v6=/^(\d+)(일|번째)?/i,w6=/\d+/i,x6={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},_6={any:[/^(bc|기원전)/i,/^(ad|서기)/i]},T6={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},E6={any:[/1/i,/2/i,/3/i,/4/i]},S6={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},I6={any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},b6={narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},k6={any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},C6={any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},A6={any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},P6={ordinalNumber:XI({matchPattern:v6,parsePattern:w6,valueCallback:function(e){return parseInt(e,10)}}),era:kn({matchPatterns:x6,defaultMatchWidth:"wide",parsePatterns:_6,defaultParseWidth:"any"}),quarter:kn({matchPatterns:T6,defaultMatchWidth:"wide",parsePatterns:E6,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:kn({matchPatterns:S6,defaultMatchWidth:"wide",parsePatterns:I6,defaultParseWidth:"any"}),day:kn({matchPatterns:b6,defaultMatchWidth:"wide",parsePatterns:k6,defaultParseWidth:"any"}),dayPeriod:kn({matchPatterns:C6,defaultMatchWidth:"any",parsePatterns:A6,defaultParseWidth:"any"})};const N6=P6;var R6={code:"ko",formatDistance:e6,formatLong:s6,formatRelative:l6,localize:y6,match:N6,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Rr=R6,D6=({selectedDate:t,setSelectedDate:e,events:n,meetings:r,onEventClick:i,onDateClick:s,currentUser:o})=>{const[a,c]=j.useState(new Date);j.useEffect(()=>{const y=setInterval(()=>{c(new Date)},1e3);return()=>clearInterval(y)},[]);const u=n.filter(y=>{const w=new Date(y.date),k=new Date,V=$g(k,7);return w>=k&&w<=V}).sort((y,w)=>new Date(y.date)-new Date(w.date)).slice(0,5),d=r.filter(y=>y.participants.some(w=>w.userId===(o==null?void 0:o.uid)&&(w.status==="approved"||w.status==="owner"))).slice(0,4),f=r.flatMap(y=>{var w;return((w=y.announcements)==null?void 0:w.map(k=>({...k,meetingTitle:y.title,meetingId:y.id})))||[]}).filter(y=>y.priority==="high").sort((y,w)=>new Date(w.createdAt)-new Date(y.createdAt)).slice(0,3),p=jL(t,{weekStartsOn:1}),x=BL(t,{weekStartsOn:1}),T=UL({start:p,end:x}),A=y=>n.filter(w=>new Date(w.date).toDateString()===y.toDateString()),R=y=>kc(y)?"오늘":JI(y)?"내일":ZI(y)?"어제":Cn(y,"M/d",{locale:Rr}),_=y=>Cn(y,"HH:mm",{locale:Rr});return h.jsxs("div",{className:"space-y-6",children:[h.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-kaist-blue to-kaist-lightblue rounded-2xl p-6 text-white",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold mb-2",children:"안녕하세요! 👋"}),h.jsxs("p",{className:"text-blue-100",children:[(o==null?void 0:o.displayName)||(o==null?void 0:o.email)||"사용자","님의 대시보드입니다"]}),h.jsxs("p",{className:"text-sm text-blue-200 mt-1",children:[Cn(a,"yyyy년 M월 d일 EEEE",{locale:Rr})," ",_(a)]})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-3xl font-bold",children:u.length}),h.jsx("div",{className:"text-sm text-blue-200",children:"다가오는 일정"})]})]})}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsx(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"lg:col-span-1",children:h.jsxs("div",{className:"glass-effect rounded-2xl p-6 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[h.jsx(Yt,{className:"w-5 h-5 mr-2 text-kaist-blue"}),"이번 주"]}),h.jsx("button",{onClick:()=>s(t),className:"text-sm text-kaist-blue hover:text-kaist-lightblue transition-colors",children:"전체 보기"})]}),h.jsx("div",{className:"space-y-2",children:T.map((y,w)=>{const k=A(y),V=y.toDateString()===t.toDateString();return h.jsx(B.div,{whileHover:{scale:1.02},onClick:()=>s(y),className:`p-3 rounded-xl cursor-pointer transition-all duration-200 ${V?"bg-kaist-blue text-white shadow-lg":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:`text-sm font-medium ${V?"text-white":"text-gray-600 dark:text-gray-300"}`,children:Cn(y,"E",{locale:Rr})}),h.jsx("div",{className:`text-lg font-bold ${V?"text-white":"text-gray-800 dark:text-white"}`,children:Cn(y,"d")})]}),k.length>0&&h.jsxs("div",{className:`flex items-center space-x-1 ${V?"text-white":"text-kaist-blue"}`,children:[h.jsx("div",{className:"w-2 h-2 bg-current rounded-full"}),h.jsx("span",{className:"text-xs font-medium",children:k.length})]})]})},y.toISOString())})})]})}),h.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[h.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect rounded-2xl p-6 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[h.jsx(Kn,{className:"w-5 h-5 mr-2 text-red-500"}),"중요 공지사항"]}),h.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[h.jsx(dE,{className:"w-4 h-4 mr-1"}),f.length,"개"]})]}),h.jsx("div",{className:"space-y-3",children:f.length>0?f.map(y=>h.jsx(B.div,{whileHover:{scale:1.02},className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[h.jsx("span",{className:"text-xs px-2 py-1 bg-red-500 text-white rounded-full font-medium",children:"긴급"}),h.jsx("span",{className:"text-sm text-red-600 dark:text-red-400 font-medium",children:y.meetingTitle})]}),h.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-200 mb-1",children:y.title}),h.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 line-clamp-2",children:y.content})]}),h.jsx(Rd,{className:"w-4 h-4 text-red-400 mt-1"})]})},y.id)):h.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[h.jsx(Kn,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),h.jsx("p",{children:"중요한 공지사항이 없습니다"})]})})]}),h.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-effect rounded-2xl p-6 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[h.jsx(ao,{className:"w-5 h-5 mr-2 text-green-500"}),"다가오는 일정"]}),h.jsx("button",{onClick:()=>i(),className:"text-sm text-kaist-blue hover:text-kaist-lightblue transition-colors",children:"일정 추가"})]}),h.jsx("div",{className:"space-y-3",children:u.length>0?u.map(y=>h.jsx(B.div,{whileHover:{scale:1.02},onClick:()=>i(y),className:"p-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl cursor-pointer hover:shadow-md transition-all duration-200",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-lg flex items-center justify-center",children:h.jsx(Yt,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:y.title}),h.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[h.jsx("span",{children:R(new Date(y.date))}),y.time&&h.jsxs("span",{children:["• ",y.time]}),y.location&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"•"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(ei,{className:"w-3 h-3 mr-1"}),h.jsx("span",{children:y.location})]})]})]})]})]}),h.jsx(Rd,{className:"w-4 h-4 text-gray-400"})]})},y.id)):h.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[h.jsx(Yt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),h.jsx("p",{children:"다가오는 일정이 없습니다"}),h.jsx("button",{onClick:()=>i(),className:"mt-3 text-kaist-blue hover:text-kaist-lightblue transition-colors",children:"첫 번째 일정을 추가해보세요"})]})})]}),h.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"glass-effect rounded-2xl p-6 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[h.jsx(Xt,{className:"w-5 h-5 mr-2 text-purple-500"}),"참여중인 모임"]}),h.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[h.jsx(ou,{className:"w-4 h-4 mr-1"}),d.length,"개"]})]}),h.jsx("div",{className:"space-y-3",children:d.length>0?d.map(y=>h.jsx(B.div,{whileHover:{scale:1.02},className:"p-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-xl hover:shadow-md transition-all duration-200",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-400 to-purple-600 rounded-lg flex items-center justify-center",children:h.jsx(Xt,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white",children:y.title}),h.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[h.jsx("span",{className:"capitalize",children:y.type}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:[y.participants.length,"명 참여"]}),y.location&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"•"}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(ei,{className:"w-3 h-3 mr-1"}),h.jsx("span",{children:y.location})]})]})]})]})]}),h.jsx(Rd,{className:"w-4 h-4 text-gray-400"})]})},y.id)):h.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[h.jsx(Xt,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),h.jsx("p",{children:"참여중인 모임이 없습니다"})]})})]})]})]}),h.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"glass-effect rounded-xl p-4 text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center mx-auto mb-2",children:h.jsx(Yt,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),h.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:n.length}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"총 일정"})]}),h.jsxs("div",{className:"glass-effect rounded-xl p-4 text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center mx-auto mb-2",children:h.jsx(Xt,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),h.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:d.length}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"참여 모임"})]}),h.jsxs("div",{className:"glass-effect rounded-xl p-4 text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/20 rounded-lg flex items-center justify-center mx-auto mb-2",children:h.jsx(Kn,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),h.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:f.length}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"중요 공지"})]}),h.jsxs("div",{className:"glass-effect rounded-xl p-4 text-center",children:[h.jsx("div",{className:"w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center mx-auto mb-2",children:h.jsx(IR,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),h.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:u.length}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"이번 주 일정"})]})]})]})},Wd={north:[{id:"N0",name:"동문",englishName:"East Gate",type:"gate",x:85,y:12},{id:"N1",name:"김병호·김상열 융합 빌딩",englishName:"Kim Beang Ho & Kim Sam-Youl TC Building",type:"academic",x:82,y:18},{id:"N2",name:"행정분관",englishName:"Branch Administration B/D",type:"administration",x:78,y:22},{id:"N3",name:"스포츠 컴플렉스",englishName:"Sports Complex",type:"sports",x:50,y:25},{id:"N4",name:"인문사회과학부동",englishName:"School of Humanities & Social Science B/D",type:"academic",x:45,y:30},{id:"N5",name:"기초실험연구동",englishName:"Basic Experiment & Research B/D",type:"research",x:40,y:35},{id:"N6",name:"교수회관",englishName:"Faculty Hall",type:"faculty",x:35,y:40},{id:"N7",name:"기계공학동",englishName:"Mechanical Engineering B/D",type:"academic",x:15,y:15},{id:"N9",name:"실습동",englishName:"Practice B/D",type:"academic",x:30,y:45},{id:"N10",name:"교양분관",englishName:"Undergraduate Branch Library",type:"library",x:25,y:50},{id:"N11",name:"학생식당",englishName:"Cafeteria",type:"dining",x:20,y:55},{id:"N12",name:"학생회관-2",englishName:"Student Center-2",type:"student",x:15,y:60},{id:"N13",name:"태울관",englishName:"Tae Wul Gwan",type:"dormitory",x:10,y:65},{id:"N14",name:"사랑관",englishName:"Sarang Hall",type:"dormitory",x:5,y:70},{id:"N15",name:"교직원 숙소",englishName:"Staff Accommodation",type:"staff",x:0,y:75},{id:"N16",name:"소망관",englishName:"Somang Hall",type:"dormitory",x:90,y:8},{id:"N17",name:"성실관",englishName:"Seongsil Hall",type:"dormitory",x:95,y:3},{id:"N18",name:"진리관",englishName:"Jilli Hall",type:"dormitory",x:100,y:0},{id:"N19",name:"아름관",englishName:"Areum Hall",type:"dormitory",x:105,y:3},{id:"N20",name:"신뢰관",englishName:"Siltoe Hall",type:"dormitory",x:110,y:8},{id:"N21",name:"지혜관",englishName:"Jihye Hall",type:"dormitory",x:115,y:12},{id:"N22",name:"동문창업관",englishName:"Alumni Venture Hall",type:"venture",x:120,y:16},{id:"N23",name:"IMR 센터",englishName:"IMRI Center",type:"research",x:125,y:20},{id:"N24",name:"L0 이노베이션홀",englishName:"L0 Innovation Hall",type:"innovation",x:130,y:24},{id:"N25",name:"산업디자인학과동",englishName:"Dept. of Industrial Design B/D",type:"academic",x:135,y:28},{id:"N26",name:"고성능집적시스템연구센터",englishName:"Center for High-Performance Integrated Systems",type:"research",x:140,y:32},{id:"N27",name:"유레카관",englishName:"Eureka Hall",type:"innovation",x:145,y:36},{id:"N28",name:"에너지환경연구센터",englishName:"Energy & Environment Research Center",type:"research",x:150,y:40}],east:[{id:"E1",name:"정문",englishName:"Main Gate",type:"gate",x:50,y:88},{id:"E2",name:"산업경영학동",englishName:"Industrial Engineering & Management B/D",type:"academic",x:55,y:83},{id:"E3",name:"정보전자공학동",englishName:"Information & Electronics B/D",type:"academic",x:60,y:78},{id:"E4",name:"KI빌딩",englishName:"KAIST Institutes B/D",type:"research",x:50,y:50},{id:"E5",name:"교직원회관",englishName:"Faculty Club",type:"faculty",x:65,y:73},{id:"E6",name:"자연과학동",englishName:"Natural Science B/D",type:"academic",x:70,y:68},{id:"E7",name:"의과학연구센터",englishName:"Biomedical Research Center",type:"research",x:75,y:63},{id:"E8",name:"세종관",englishName:"Sejong Hall",type:"dormitory",x:80,y:58},{id:"E9",name:"학술문화관",englishName:"Academic Cultural Complex",type:"cultural",x:85,y:53},{id:"E10",name:"중앙창고",englishName:"Storehouse",type:"facility",x:90,y:48},{id:"E11",name:"창의학습관",englishName:"Creative Learning B/D",type:"academic",x:95,y:43},{id:"E12",name:"중앙기계실",englishName:"Energy Plant",type:"facility",x:100,y:38},{id:"E13",name:"인공위성연구센터",englishName:"Satellite Technology Research Center",type:"research",x:105,y:33},{id:"E14",name:"본관",englishName:"Main Administration B/D",type:"administration",x:110,y:28},{id:"E15",name:"대강당",englishName:"Auditorium",type:"cultural",x:115,y:23},{id:"E16",name:"정문술빌딩",englishName:"ChungMoonSoul Building",type:"academic",x:120,y:18},{id:"E17",name:"운동장",englishName:"Stadium",type:"sports",x:85,y:83},{id:"E18",name:"대전질환모델동물센터",englishName:"Daejeon Disease-model Animal Center",type:"research",x:90,y:78},{id:"E19",name:"KAIST 부설 나노종합기술원",englishName:"National Nano Fab Center",type:"research",x:95,y:73},{id:"E20",name:"계룡관",englishName:"Kyeryong Hall",type:"academic",x:100,y:68},{id:"E21",name:"카이스트 클리닉",englishName:"KAIST Clinic",type:"medical",x:105,y:63}],west:[{id:"W1",name:"응용공학동",englishName:"Applied Engineering B/D",type:"academic",x:20,y:63},{id:"W2",name:"학생회관-1",englishName:"Student Center-1",type:"student",x:15,y:68},{id:"W3",name:"갈릴레이관",englishName:"Galilei Hall",type:"dormitory",x:10,y:73},{id:"W4",name:"여울관, 나들관, 다솜관, 희망관",englishName:"Yeoul, Nadeul, Dasom, Huimang Hall",type:"dormitory",x:5,y:78},{id:"W5",name:"기혼자기숙사, 스타트업빌리지",englishName:"Married Student Housing, Startup Village",type:"dormitory",x:0,y:83},{id:"W6",name:"미르관, 나래관",englishName:"Mir Hall, Narae Hall",type:"dormitory",x:25,y:58},{id:"W7",name:"나눔관",englishName:"Nanum Hall",type:"dormitory",x:30,y:53},{id:"W8",name:"교육지원동",englishName:"Educational Support B/D",type:"academic",x:35,y:48},{id:"W9",name:"노천극장",englishName:"Outdoor Theater",type:"cultural",x:40,y:43},{id:"W10",name:"풍동실험실",englishName:"Wind Tunnel Laboratory",type:"research",x:45,y:38},{id:"W11",name:"외국인교수 아파트",englishName:"International Faculty Apartment",type:"staff",x:50,y:33},{id:"W12",name:"서측기계실",englishName:"West Energy Plant",type:"facility",x:55,y:28},{id:"W16",name:"지오센트리퓨지 실험동",englishName:"Geotechnical Centrifuge Testing Center",type:"research",x:60,y:23}]},ft={academic:{label:"학술",color:"#3B82F6"},research:{label:"연구",color:"#10B981"},dormitory:{label:"기숙사",color:"#F59E0B"},administration:{label:"행정",color:"#EF4444"},sports:{label:"체육",color:"#8B5CF6"},dining:{label:"식당",color:"#06B6D4"},library:{label:"도서관",color:"#84CC16"},faculty:{label:"교수",color:"#F97316"},student:{label:"학생",color:"#EC4899"},staff:{label:"교직원",color:"#6366F1"},gate:{label:"출입구",color:"#64748B"},cultural:{label:"문화",color:"#A855F7"},facility:{label:"시설",color:"#6B7280"},medical:{label:"의료",color:"#DC2626"},venture:{label:"창업",color:"#059669"},innovation:{label:"혁신",color:"#7C3AED"}},An=[...Wd.north,...Wd.east,...Wd.west],Dr=t=>An.find(e=>e.id===t),V6=({event:t,onSave:e,onDelete:n,onClose:r})=>{var R,_,y;const[i,s]=j.useState({title:"",description:"",date:"",time:"",location:"",buildingId:"",participants:"",category:"meeting",priority:"medium"}),[o,a]=j.useState(!1),[c,u]=j.useState(""),[d,f]=j.useState("all");j.useEffect(()=>{s(t?{title:t.title||"",description:t.description||"",date:t.date?Cn(new Date(t.date),"yyyy-MM-dd"):"",time:t.time||"",location:t.location||"",buildingId:t.buildingId||"",participants:t.participants||"",category:t.category||"meeting",priority:t.priority||"medium"}:{title:"",description:"",date:"",time:"",location:"",buildingId:"",participants:"",category:"meeting",priority:"medium"})},[t]);const p=w=>{w.preventDefault();const k={...i,id:t==null?void 0:t.id,date:new Date(i.date)};e(k),r()},x=()=>{n&&t&&(n(),r())},T=[{value:"meeting",label:"회의",color:"bg-blue-100 text-blue-800"},{value:"study",label:"스터디",color:"bg-green-100 text-green-800"},{value:"exam",label:"시험",color:"bg-red-100 text-red-800"},{value:"assignment",label:"과제",color:"bg-yellow-100 text-yellow-800"},{value:"social",label:"모임",color:"bg-purple-100 text-purple-800"},{value:"personal",label:"개인",color:"bg-gray-100 text-gray-800"}],A=[{value:"low",label:"낮음",color:"bg-green-100 text-green-800"},{value:"medium",label:"보통",color:"bg-yellow-100 text-yellow-800"},{value:"high",label:"높음",color:"bg-red-100 text-red-800"}];return h.jsx(Ju,{children:h.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:h.jsxs(B.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:w=>w.stopPropagation(),children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-kaist-blue to-kaist-lightblue rounded-xl flex items-center justify-center",children:h.jsx(Yt,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-kaist-blue",children:t?"일정 수정":"새 일정 추가"}),h.jsx("p",{className:"text-sm text-gray-600",children:t?"일정 정보를 수정하세요":"새로운 일정을 추가하세요"})]})]}),h.jsx(B.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:r,className:"p-2 rounded-xl hover:bg-gray-100 transition-colors",children:h.jsx(qp,{className:"w-5 h-5 text-gray-500"})})]}),h.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"제목 *"}),h.jsx("input",{type:"text",required:!0,value:i.title,onChange:w=>s({...i,title:w.target.value}),className:"input-field",placeholder:"일정 제목을 입력하세요"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"설명"}),h.jsx("textarea",{value:i.description,onChange:w=>s({...i,description:w.target.value}),className:"input-field min-h-[100px] resize-none",placeholder:"일정에 대한 자세한 설명을 입력하세요"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"날짜 *"}),h.jsxs("div",{className:"relative",children:[h.jsx(Yt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"date",required:!0,value:i.date,onChange:w=>s({...i,date:w.target.value}),className:"input-field pl-10"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"시간"}),h.jsxs("div",{className:"relative",children:[h.jsx(ao,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"time",value:i.time,onChange:w=>s({...i,time:w.target.value}),className:"input-field pl-10"})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"장소 선택"}),h.jsxs("div",{className:"flex space-x-2 mb-3",children:[h.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(!o),className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border-2 transition-all duration-300 ${o?"border-kaist-blue bg-blue-50 text-kaist-blue":"border-gray-300 hover:border-kaist-blue"}`,children:[h.jsx(ei,{className:"w-4 h-4"}),h.jsx("span",{children:"캠퍼스맵에서 선택"})]}),h.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{a(!1),s({...i,buildingId:"",location:""})},className:"px-4 py-3 border-2 border-gray-300 rounded-xl hover:border-gray-400 transition-all duration-300",children:"직접 입력"})]}),o&&h.jsxs(B.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border border-gray-200 rounded-xl p-4 bg-gray-50",children:[h.jsxs("div",{className:"mb-4 space-y-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Hp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"text",placeholder:"건물 검색...",className:"input-field pl-10",value:c,onChange:w=>u(w.target.value)})]}),h.jsxs("div",{className:"relative",children:[h.jsx($a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsxs("select",{value:d,onChange:w=>f(w.target.value),className:"input-field pl-10",children:[h.jsx("option",{value:"all",children:"모든 타입"}),ft&&Object.entries(ft).map(([w,k])=>h.jsx("option",{value:w,children:k.label},w))]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:"/kaist-campus-map.png",alt:"KAIST 캠퍼스맵",className:"w-full h-64 object-cover rounded-lg border border-gray-200",onError:w=>{w.target.style.display="none",w.target.nextElementSibling.style.display="block"}}),h.jsx("div",{className:"hidden w-full h-64 bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 rounded-lg border border-gray-200 flex items-center justify-center",children:h.jsx("p",{className:"text-gray-500",children:"캠퍼스맵 이미지"})})]}),h.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:An&&An.filter(w=>{const k=w.name.toLowerCase().includes(c.toLowerCase())||w.englishName.toLowerCase().includes(c.toLowerCase())||w.id.toLowerCase().includes(c.toLowerCase()),V=d==="all"||w.type===d;return k&&V}).map(w=>{var k;return h.jsxs(B.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{try{const V=Dr(w.id);s({...i,buildingId:w.id,location:V?V.name:""})}catch(V){console.error("건물 선택 오류:",V),s({...i,buildingId:w.id,location:w.name})}},className:`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${i.buildingId===w.id?"border-kaist-blue bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:((k=ft==null?void 0:ft[w.type])==null?void 0:k.color)||"#6B7280"}}),h.jsx("span",{className:"font-medium text-sm",children:w.id}),h.jsx("span",{className:"text-sm text-gray-600",children:w.name})]}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:w.englishName})]},w.id)})})]})]}),!o&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx($a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsxs("select",{value:i.buildingId,onChange:w=>{try{const k=Dr(w.target.value);s({...i,buildingId:w.target.value,location:k?k.name:""})}catch(k){console.error("건물 선택 오류:",k),s({...i,buildingId:w.target.value,location:""})}},className:"input-field pl-10",children:[h.jsx("option",{value:"",children:"건물을 선택하세요"}),An&&An.map(w=>h.jsxs("option",{value:w.id,children:[w.id," - ",w.name]},w.id))]})]}),i.buildingId&&h.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:((_=ft==null?void 0:ft[(R=Dr(i.buildingId))==null?void 0:R.type])==null?void 0:_.color)||"#6B7280"}}),h.jsx("span",{className:"text-sm text-blue-800",children:((y=Dr(i.buildingId))==null?void 0:y.englishName)||"알 수 없는 건물"})]})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"상세 장소"}),h.jsxs("div",{className:"relative",children:[h.jsx(ei,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"text",value:i.location,onChange:w=>s({...i,location:w.target.value}),className:"input-field pl-10",placeholder:"상세 장소를 입력하세요 (예: 강의실, 회의실)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"참석자"}),h.jsxs("div",{className:"relative",children:[h.jsx(Xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"text",value:i.participants,onChange:w=>s({...i,participants:w.target.value}),className:"input-field pl-10",placeholder:"참석자들을 입력하세요"})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"카테고리"}),h.jsxs("div",{className:"relative",children:[h.jsx(Wp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("select",{value:i.category,onChange:w=>s({...i,category:w.target.value}),className:"input-field pl-10",children:T.map(w=>h.jsx("option",{value:w.value,children:w.label},w.value))})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"우선순위"}),h.jsx("select",{value:i.priority,onChange:w=>s({...i,priority:w.target.value}),className:"input-field",children:A.map(w=>h.jsx("option",{value:w.value,children:w.label},w.value))})]})]}),h.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[h.jsx("div",{className:"flex items-center space-x-3",children:t&&n&&h.jsxs(B.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:x,className:"flex items-center space-x-2 px-4 py-2 bg-red-100 text-red-700 rounded-xl hover:bg-red-200 transition-colors",children:[h.jsx(gE,{className:"w-4 h-4"}),h.jsx("span",{children:"삭제"})]})}),h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx(B.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"btn-secondary",children:"취소"}),h.jsxs(B.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-primary flex items-center space-x-2",children:[h.jsx(mE,{className:"w-4 h-4"}),h.jsx("span",{children:t?"수정":"저장"})]})]})]})]})]})})})},M6=({events:t,onEventClick:e,onAddEvent:n})=>{const[r,i]=j.useState("all"),[s,o]=j.useState("date"),[a,c]=j.useState("all"),u={meeting:{label:"회의",color:"bg-blue-100 text-blue-800 border-blue-200"},study:{label:"스터디",color:"bg-green-100 text-green-800 border-green-200"},exam:{label:"시험",color:"bg-red-100 text-red-800 border-red-200"},assignment:{label:"과제",color:"bg-yellow-100 text-yellow-800 border-yellow-200"},social:{label:"모임",color:"bg-purple-100 text-purple-800 border-purple-200"},personal:{label:"개인",color:"bg-gray-100 text-gray-800 border-gray-200"}},d={low:{label:"낮음",color:"bg-green-100 text-green-800"},medium:{label:"보통",color:"bg-yellow-100 text-yellow-800"},high:{label:"높음",color:"bg-red-100 text-red-800"}},f=()=>{let T=[...t];switch(r){case"today":T=T.filter(_=>kc(new Date(_.date)));break;case"week":const A=new Date;A.setDate(A.getDate()+7),T=T.filter(_=>new Date(_.date)<=A);break;case"month":const R=new Date;R.setMonth(R.getMonth()+1),T=T.filter(_=>new Date(_.date)<=R);break}return a!=="all"&&(T=T.filter(A=>A.buildingId===a)),T.sort((A,R)=>{switch(s){case"priority":const _={high:3,medium:2,low:1};return _[R.priority]-_[A.priority];case"category":return A.category.localeCompare(R.category);case"date":default:return new Date(A.date)-new Date(R.date)}}),T},p=T=>{const A=new Date(T);return kc(A)?"오늘":JI(A)?"내일":ZI(A)?"어제":Cn(A,"M월 d일 (E)",{locale:Rr})},x=f();return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx(B.h2,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"text-2xl font-bold text-kaist-blue",children:"일정 목록"}),h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"btn-primary flex items-center space-x-2",children:[h.jsx(Zu,{className:"w-4 h-4"}),h.jsx("span",{children:"일정 추가"})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"text-sm font-medium text-gray-600",children:"필터:"}),["all","today","week","month"].map(T=>h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i(T),className:`px-3 py-1 rounded-lg text-sm font-medium transition-all duration-300 ${r===T?"bg-kaist-blue text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:T==="all"?"전체":T==="today"?"오늘":T==="week"?"이번 주":"이번 달"},T))]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"text-sm font-medium text-gray-600",children:"정렬:"}),h.jsxs("select",{value:s,onChange:T=>o(T.target.value),className:"px-3 py-1 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-kaist-blue",children:[h.jsx("option",{value:"date",children:"날짜순"}),h.jsx("option",{value:"priority",children:"우선순위순"}),h.jsx("option",{value:"category",children:"카테고리순"})]})]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("span",{className:"text-sm font-medium text-gray-600",children:"건물:"}),h.jsxs("select",{value:a,onChange:T=>c(T.target.value),className:"px-3 py-1 rounded-lg border border-gray-300 text-sm focus:outline-none focus:ring-2 focus:ring-kaist-blue",children:[h.jsx("option",{value:"all",children:"전체 건물"}),An.map(T=>h.jsxs("option",{value:T.id,children:[T.id," - ",T.name]},T.id))]})]}),h.jsx("div",{className:"space-y-4",children:x.length===0?h.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[h.jsx(Yt,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),h.jsx("h3",{className:"text-lg font-medium text-gray-500 mb-2",children:"일정이 없습니다"}),h.jsx("p",{className:"text-gray-400 mb-4",children:"새로운 일정을 추가해보세요"}),h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"btn-primary",children:"일정 추가하기"})]}):x.map((T,A)=>{var R,_,y,w,k;return h.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.1},whileHover:{scale:1.02},className:"glass-effect rounded-xl p-6 card-hover cursor-pointer",onClick:()=>e(T),children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T.title}),h.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${((R=u[T.category])==null?void 0:R.color)||u.personal.color}`,children:((_=u[T.category])==null?void 0:_.label)||"개인"}),h.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${((y=d[T.priority])==null?void 0:y.color)||d.medium.color}`,children:((w=d[T.priority])==null?void 0:w.label)||"보통"})]}),T.description&&h.jsx("p",{className:"text-gray-600 mb-4",children:T.description}),h.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Yt,{className:"w-4 h-4"}),h.jsx("span",{className:"font-medium",children:p(T.date)})]}),T.time&&h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(ao,{className:"w-4 h-4"}),h.jsx("span",{children:T.time})]}),T.buildingId&&h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx($a,{className:"w-4 h-4"}),h.jsxs("span",{children:[T.buildingId," - ",(k=Dr(T.buildingId))==null?void 0:k.name]})]}),T.location&&h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(ei,{className:"w-4 h-4"}),h.jsx("span",{children:T.location})]}),T.participants&&h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Xt,{className:"w-4 h-4"}),h.jsx("span",{children:T.participants})]})]})]}),h.jsx("div",{className:"flex items-center space-x-2",children:h.jsx(B.div,{whileHover:{scale:1.1},className:"w-3 h-3 rounded-full bg-kaist-blue"})})]})},T.id)})}),h.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect rounded-xl p-4",children:h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-kaist-blue",children:t.length}),h.jsx("div",{className:"text-sm text-gray-600",children:"전체 일정"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(T=>kc(new Date(T.date))).length}),h.jsx("div",{className:"text-sm text-gray-600",children:"오늘 일정"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:t.filter(T=>T.priority==="high").length}),h.jsx("div",{className:"text-sm text-gray-600",children:"높은 우선순위"})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.filter(T=>T.category==="meeting").length}),h.jsx("div",{className:"text-sm text-gray-600",children:"회의"})]})]})})]})},na={seminar:{label:"세미나",color:"#3B82F6",icon:"🎓"},study:{label:"스터디",color:"#10B981",icon:"📚"},project:{label:"프로젝트",color:"#F59E0B",icon:"💻"},social:{label:"모임",color:"#EF4444",icon:"👥"},workshop:{label:"워크샵",color:"#8B5CF6",icon:"🔧"},conference:{label:"컨퍼런스",color:"#06B6D4",icon:"🏛️"}},j6={draft:"draft",open:"open",closed:"closed",confirmed:"confirmed",cancelled:"cancelled"},O6={pending:"pending",approved:"approved",rejected:"rejected",owner:"owner"},L6=t=>({id:Date.now(),title:t.title,description:t.description,type:t.type,location:t.location,buildingId:t.buildingId,owner:t.owner,status:j6.draft,createdAt:new Date,updatedAt:new Date,maxParticipants:t.maxParticipants||null,participants:[{userId:t.owner,status:O6.owner,joinedAt:new Date}],availability:{},announcements:[]}),F6=({meetings:t,currentUser:e,onMeetingClick:n,onCreateMeeting:r,onJoinMeeting:i})=>{const[s,o]=j.useState(""),[a,c]=j.useState("all"),[u,d]=j.useState("all"),f=t.filter(_=>{const y=_.title.toLowerCase().includes(s.toLowerCase())||_.description.toLowerCase().includes(s.toLowerCase()),w=a==="all"||_.type===a,k=u==="all"||_.status===u;return y&&w&&k}),p=_=>_.participants.some(y=>y.userId===e.id),x=_=>_.owner===e.id,T=_=>!(p(_)||x(_)||_.status!=="open"||_.maxParticipants&&_.participants.length>=_.maxParticipants),A=_=>{switch(_){case"draft":return"bg-gray-100 text-gray-800";case"open":return"bg-green-100 text-green-800";case"closed":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},R=_=>{switch(_){case"draft":return"초안";case"open":return"참여 신청 중";case"closed":return"신청 마감";case"confirmed":return"확정";case"cancelled":return"취소";default:return _}};return h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h2",{className:"text-3xl font-bold text-kaist-blue",children:"모임 목록"}),h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"btn-primary flex items-center space-x-2",children:[h.jsx(Zu,{className:"w-5 h-5"}),h.jsx("span",{children:"새 모임 만들기"})]})]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[h.jsxs("div",{className:"relative flex-1 min-w-64",children:[h.jsx(Hp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"text",value:s,onChange:_=>o(_.target.value),className:"input-field pl-10",placeholder:"모임 검색..."})]}),h.jsxs("div",{className:"relative",children:[h.jsx(Wp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsxs("select",{value:a,onChange:_=>c(_.target.value),className:"input-field pl-10 pr-8",children:[h.jsx("option",{value:"all",children:"모든 타입"}),Object.entries(na).map(([_,y])=>h.jsxs("option",{value:_,children:[y.icon," ",y.label]},_))]})]}),h.jsxs("div",{className:"relative",children:[h.jsx(xR,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsxs("select",{value:u,onChange:_=>d(_.target.value),className:"input-field pl-10 pr-8",children:[h.jsx("option",{value:"all",children:"모든 상태"}),h.jsx("option",{value:"open",children:"참여 신청 중"}),h.jsx("option",{value:"confirmed",children:"확정"}),h.jsx("option",{value:"closed",children:"신청 마감"})]})]})]}),h.jsx("div",{className:"space-y-4",children:f.length===0?h.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center text-gray-500 py-10 glass-effect rounded-xl",children:[h.jsx("p",{className:"text-lg font-medium mb-2",children:"모임이 없습니다."}),h.jsx("p",{children:"새 모임을 만들거나 검색 조건을 변경해보세요!"})]}):h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(_=>{var y,w,k;return h.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.3},onClick:()=>n(_),className:"glass-effect card-hover p-6 rounded-xl cursor-pointer flex flex-col justify-between",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${(y=na[_.type])==null?void 0:y.color} bg-opacity-20`,children:[(w=na[_.type])==null?void 0:w.icon," ",(k=na[_.type])==null?void 0:k.label]}),h.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${A(_.status)}`,children:R(_.status)})]}),h.jsx("h3",{className:"text-xl font-semibold text-kaist-darkgray mb-2",children:_.title}),_.description&&h.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:_.description}),h.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Yt,{className:"w-4 h-4"}),h.jsx("span",{children:"시간 조율 중"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(ao,{className:"w-4 h-4"}),h.jsx("span",{children:"참여자들과 협의"})]}),_.location&&h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(ei,{className:"w-4 h-4"}),h.jsx("span",{children:_.location})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Xt,{className:"w-4 h-4"}),h.jsxs("span",{children:[_.participants.length,"명 참여",_.maxParticipants&&` / 최대 ${_.maxParticipants}명`]})]})]})]}),h.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(B.div,{whileHover:{scale:1.1},className:"w-2 h-2 rounded-full bg-kaist-blue"}),h.jsx("span",{className:"text-xs text-gray-400",children:Cn(new Date(_.createdAt),"yyyy.MM.dd",{locale:Rr})})]}),T(_)&&h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:V=>{V.stopPropagation(),i(_)},className:"px-3 py-1 bg-green-500 text-white text-xs rounded-lg hover:bg-green-600 transition-colors",children:"참여 신청"}),p(_)&&!x(_)&&h.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs rounded-lg",children:"참여 중"}),x(_)&&h.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-lg",children:"모임장"})]})]},_.id)})})})]})},U6=({meeting:t,onSave:e,onClose:n,currentUser:r})=>{var _,y,w;const[i,s]=j.useState({title:"",description:"",type:"study",location:"",buildingId:"",maxParticipants:"",status:"draft"}),[o,a]=j.useState({}),[c,u]=j.useState(!1),[d,f]=j.useState(""),[p,x]=j.useState("all");j.useEffect(()=>{s(t?{title:t.title||"",description:t.description||"",type:t.type||"study",location:t.location||"",buildingId:t.buildingId||"",maxParticipants:t.maxParticipants||"",status:t.status||"draft"}:{title:"",description:"",type:"study",location:"",buildingId:"",maxParticipants:"",status:"draft"})},[t]);const T=()=>{const k={};return i.title.trim()||(k.title="모임 제목을 입력해주세요"),i.maxParticipants&&(isNaN(i.maxParticipants)||i.maxParticipants<2)&&(k.maxParticipants="최소 2명 이상이어야 합니다"),a(k),Object.keys(k).length===0},A=k=>{if(k.preventDefault(),!r||!r.uid){alert("모임을 생성하려면 로그인이 필요합니다.");return}if(!T())return;const V={...i,owner:r.uid,maxParticipants:i.maxParticipants?parseInt(i.maxParticipants):null},O=L6(V);e(O)},R=k=>{try{const V=Dr(k);s({...i,buildingId:k,location:V?V.name:""})}catch(V){console.error("건물 선택 오류:",V),s({...i,buildingId:k,location:""})}};return h.jsx(Ju,{children:h.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:n,children:h.jsxs(B.div,{initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},transition:{type:"spring",damping:20,stiffness:300},className:"bg-white rounded-2xl p-8 shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto relative",onClick:k=>k.stopPropagation(),children:[h.jsx("button",{onClick:n,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:h.jsx(qp,{className:"w-6 h-6"})}),h.jsx("h2",{className:"text-3xl font-bold text-kaist-blue mb-6",children:t?"모임 수정":"새 모임 만들기"}),h.jsxs("form",{onSubmit:A,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"모임 제목 *"}),h.jsx("input",{type:"text",value:i.title,onChange:k=>s({...i,title:k.target.value}),className:`input-field pl-4 ${o.title?"border-red-500":""}`,placeholder:"모임 제목을 입력하세요"}),o.title&&h.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.title})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"모임 타입"}),h.jsxs("div",{className:"relative",children:[h.jsx(Wp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("select",{value:i.type,onChange:k=>s({...i,type:k.target.value}),className:"input-field pl-10",children:Object.entries(na).map(([k,V])=>h.jsxs("option",{value:k,children:[V.icon," ",V.label]},k))})]})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"모임 설명"}),h.jsx("textarea",{value:i.description,onChange:k=>s({...i,description:k.target.value}),className:"input-field pl-4 h-24 resize-none",placeholder:"모임에 대한 자세한 설명을 입력하세요"})]}),h.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[h.jsx(ao,{className:"w-5 h-5 text-blue-500"}),h.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"시간 조율 방식"})]}),h.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"모임 생성 후 참여자들이 각자 가능한 시간을 선택할 수 있습니다. 구체적인 날짜와 시간은 참여자들과의 시간 조율을 통해 결정됩니다."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"장소 선택"}),h.jsxs("div",{className:"flex space-x-2 mb-3",children:[h.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u(!c),type:"button",className:`flex-1 flex items-center justify-center space-x-2 px-4 py-3 rounded-xl border-2 transition-all duration-300 ${c?"border-kaist-blue bg-blue-50 text-kaist-blue":"border-gray-300 hover:border-kaist-blue"}`,children:[h.jsx(ei,{className:"w-4 h-4"}),h.jsx("span",{children:"캠퍼스맵에서 선택"})]}),h.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{u(!1),s({...i,buildingId:"",location:""})},type:"button",className:"px-4 py-3 border-2 border-gray-300 rounded-xl hover:border-gray-400 transition-all duration-300",children:"직접 입력"})]}),c&&h.jsxs(B.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border border-gray-200 rounded-xl p-4 bg-gray-50",children:[h.jsxs("div",{className:"mb-4 space-y-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Hp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"text",placeholder:"건물 검색...",className:"input-field pl-10",value:d,onChange:k=>f(k.target.value)})]}),h.jsxs("div",{className:"relative",children:[h.jsx($a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsxs("select",{value:p,onChange:k=>x(k.target.value),className:"input-field pl-10",children:[h.jsx("option",{value:"all",children:"모든 타입"}),ft&&Object.entries(ft).map(([k,V])=>h.jsx("option",{value:k,children:V.label},k))]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("img",{src:"/kaist-campus-map.png",alt:"KAIST 캠퍼스맵",className:"w-full h-64 object-cover rounded-lg border border-gray-200",onError:k=>{k.target.style.display="none",k.target.nextElementSibling.style.display="block"}}),h.jsx("div",{className:"hidden w-full h-64 bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 rounded-lg border border-gray-200 flex items-center justify-center",children:h.jsx("p",{className:"text-gray-500",children:"캠퍼스맵 이미지"})})]}),h.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:An&&An.filter(k=>{const V=k.name.toLowerCase().includes(d.toLowerCase())||k.englishName.toLowerCase().includes(d.toLowerCase())||k.id.toLowerCase().includes(d.toLowerCase()),O=p==="all"||k.type===p;return V&&O}).map(k=>{var V;return h.jsxs(B.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>R(k.id),className:`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${i.buildingId===k.id?"border-kaist-blue bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:((V=ft==null?void 0:ft[k.type])==null?void 0:V.color)||"#6B7280"}}),h.jsx("span",{className:"font-medium text-sm",children:k.id}),h.jsx("span",{className:"text-sm text-gray-600",children:k.name})]}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:k.englishName})]},k.id)})})]})]}),!c&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"relative",children:[h.jsx($a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsxs("select",{value:i.buildingId,onChange:k=>R(k.target.value),className:"input-field pl-10",children:[h.jsx("option",{value:"",children:"건물을 선택하세요"}),An&&An.map(k=>h.jsxs("option",{value:k.id,children:[k.id," - ",k.name]},k.id))]})]}),i.buildingId&&h.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:((y=ft==null?void 0:ft[(_=Dr(i.buildingId))==null?void 0:_.type])==null?void 0:y.color)||"#6B7280"}}),h.jsx("span",{className:"text-sm text-blue-800",children:((w=Dr(i.buildingId))==null?void 0:w.englishName)||"알 수 없는 건물"})]})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"상세 장소"}),h.jsxs("div",{className:"relative",children:[h.jsx(ei,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"text",value:i.location,onChange:k=>s({...i,location:k.target.value}),className:"input-field pl-10",placeholder:"상세 장소를 입력하세요 (예: 강의실, 회의실)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"최대 참여자 수"}),h.jsxs("div",{className:"relative",children:[h.jsx(Xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"number",value:i.maxParticipants,onChange:k=>s({...i,maxParticipants:k.target.value}),className:`input-field pl-10 ${o.maxParticipants?"border-red-500":""}`,placeholder:"제한 없음 (비워두세요)",min:"2"})]}),o.maxParticipants&&h.jsx("p",{className:"text-red-500 text-sm mt-1",children:o.maxParticipants})]}),h.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[h.jsx(B.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"btn-secondary",children:"취소"}),h.jsxs(B.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},className:"btn-primary flex items-center space-x-2",children:[h.jsx(mE,{className:"w-5 h-5"}),h.jsx("span",{children:t?"수정":"모임 만들기"})]})]})]})]})})})},B6=({meeting:t,currentUser:e,onAvailabilityChange:n,onBack:r,onComplete:i})=>{var S;const[s,o]=j.useState(!0),[a,c]=j.useState([]),[u,d]=j.useState([]),[f,p]=j.useState(!1),[x,T]=j.useState(null);if(!e||!e.uid)return h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:h.jsxs("div",{className:"glass-effect rounded-2xl p-8 shadow-xl text-center max-w-md",children:[h.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx(Zf,{className:"w-8 h-8 text-red-500"})}),h.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-4",children:"로그인이 필요합니다"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"시간 조율 기능을 사용하려면 로그인해주세요."}),h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"btn-primary",children:"돌아가기"})]})});j.useEffect(()=>{if(t&&e&&e.uid&&t.availability[e.uid]){const I=t.availability[e.uid]||[];c(I),d([])}},[t,e]);const R=(()=>{const I=[];for(let C=9;C<=16;C++)for(let Y=0;Y<60;Y+=30){const ee=`${C.toString().padStart(2,"0")}:${Y.toString().padStart(2,"0")}`;I.push({id:`${C}-${Y}`,time:ee,hour:C,minute:Y})}return I})(),_=["월","화","수","목","금"],y=["12.31","01.01","01.02","01.03","01.04"],w=(I,P)=>{const N=`${I}-${P}`;if(s){const C=a.includes(N)?a.filter(ee=>ee!==N):[...a,N],Y=u.filter(ee=>ee!==N);c(C),d(Y),n(C)}else{const C=u.includes(N)?u.filter(ee=>ee!==N):[...u,N],Y=a.filter(ee=>ee!==N);c(Y),d(C),n(Y)}},k=(I,P,N)=>{I.preventDefault(),p(!0),T({dayIndex:P,slotId:N}),w(P,N)},V=(I,P)=>{if(f&&x){const N=R.findIndex(Y=>Y.id===x.slotId),C=R.findIndex(Y=>Y.id===P);I===x.dayIndex&&Math.abs(C-N)<=10&&w(I,P)}},O=()=>{p(!1),T(null)},b=(I,P)=>{const N=`${I}-${P}`;return s?a.includes(N):u.includes(N)},v=(I,P)=>{const N=`${I}-${P}`,C=a.includes(N),Y=u.includes(N),ee=b(I,P);return Y?ee?"bg-pink-500 border-pink-600":"bg-pink-100 border-pink-300 hover:bg-pink-200":C?ee?"bg-blue-500 border-blue-600":"bg-blue-100 border-blue-300 hover:bg-blue-200":s?ee?"bg-blue-500 border-blue-600":"bg-white border-gray-200 hover:bg-blue-50":ee?"bg-pink-500 border-pink-600":"bg-white border-gray-200 hover:bg-pink-50"};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:to-gray-800",children:[h.jsx("div",{className:"sticky top-0 z-40 glass-effect border-b border-white/20 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"p-2 rounded-xl bg-white dark:bg-gray-700 shadow-md hover:shadow-lg transition-all duration-300",children:h.jsx(fE,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-kaist-blue dark:text-white",children:"시간 조율"}),h.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[t==null?void 0:t.title," - 가능한 시간을 선택해주세요"]})]})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Xt,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),h.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[((S=t==null?void 0:t.participants)==null?void 0:S.length)||0,"명 참여"]})]}),h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"btn-primary flex items-center space-x-2",children:[h.jsx(ou,{className:"w-4 h-4"}),h.jsx("span",{children:"완료"})]})]})]})}),h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"glass-effect rounded-2xl p-6 shadow-xl",children:[h.jsx("div",{className:"mb-8",children:h.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[h.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(!0),className:`flex items-center space-x-3 px-6 py-4 rounded-xl border-2 transition-all duration-300 ${s?"border-blue-500 bg-blue-50 text-blue-700 shadow-lg":"border-gray-300 bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:border-blue-300"}`,children:[h.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s?"bg-blue-500":"bg-gray-300"}`,children:s&&h.jsx(ou,{className:"w-4 h-4 text-white"})}),h.jsx("span",{className:"font-medium",children:"되는 시간 체크"})]}),h.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(!1),className:`flex items-center space-x-3 px-6 py-4 rounded-xl border-2 transition-all duration-300 ${s?"border-gray-300 bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:border-pink-300":"border-pink-500 bg-pink-50 text-pink-700 shadow-lg"}`,children:[h.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${s?"bg-gray-300":"bg-pink-500"}`,children:!s&&h.jsx(Zf,{className:"w-4 h-4 text-white"})}),h.jsx("span",{className:"font-medium",children:"안되는 시간 체크"})]})]})}),h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[h.jsxs("div",{className:"grid grid-cols-6 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:[h.jsx("div",{className:"p-4 text-center font-medium text-gray-500 dark:text-gray-400",children:"시간"}),_.map((I,P)=>h.jsxs("div",{className:"p-4 text-center border-l border-gray-200 dark:border-gray-600",children:[h.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:I}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:y[P]})]},I))]}),h.jsx("div",{className:"max-h-96 overflow-y-auto",onMouseUp:O,onMouseLeave:O,children:R.map(I=>h.jsxs("div",{className:"grid grid-cols-6 border-b border-gray-100 dark:border-gray-700",children:[h.jsx("div",{className:"p-3 text-center text-sm text-gray-600 dark:text-gray-400 border-r border-gray-200 dark:border-gray-600",children:I.time}),_.map((P,N)=>h.jsx(B.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-3 border-r border-gray-200 dark:border-gray-600 cursor-pointer transition-all duration-200 ${v(N,I.id)}`,onMouseDown:C=>k(C,N,I.id),onMouseEnter:()=>V(N,I.id),children:h.jsx("div",{className:"w-full h-6 rounded border border-dashed border-gray-300 dark:border-gray-500"})},N))]},I.id))})]}),h.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[h.jsx(ao,{className:"w-5 h-5 text-blue-500"}),h.jsx("span",{className:"font-medium text-blue-700 dark:text-blue-300",children:"사용 방법"})]}),h.jsxs("ul",{className:"text-sm text-blue-600 dark:text-blue-400 space-y-1",children:[h.jsxs("li",{children:["• ",s?"파란색":"분홍색"," 모드에서 시간을 클릭하거나 드래그하여 선택하세요"]}),h.jsx("li",{children:"• 드래그로 연속된 시간대를 한 번에 선택할 수 있습니다"}),h.jsx("li",{children:"• 파란색: 가능한 시간, 분홍색: 불가능한 시간으로 구분됩니다"}),h.jsx("li",{children:"• 모드를 전환해도 기존 설정이 유지됩니다"})]})]})]})})]})},yn={EVENTS:"events",MEETINGS:"meetings"},$6=(t,e)=>{if(!t)return e([]),()=>{};const n=LI(vh(gn,yn.EVENTS),_L("userId","==",t),FI("date","asc"));return zI(n,r=>{const i=r.docs.map(s=>({id:s.id,...s.data()}));e(i)})},z6=async(t,e)=>{try{return(await $I(vh(gn,yn.EVENTS),{...t,userId:e,createdAt:Ft(),updatedAt:Ft()})).id}catch(n){throw console.error("이벤트 생성 실패:",n),n}},H6=async(t,e)=>{try{const n=mi(gn,yn.EVENTS,t);await vo(n,{...e,updatedAt:Ft()})}catch(n){throw console.error("이벤트 업데이트 실패:",n),n}},W6=async t=>{try{await bL(mi(gn,yn.EVENTS,t))}catch(e){throw console.error("이벤트 삭제 실패:",e),e}},q6=t=>{const e=LI(vh(gn,yn.MEETINGS),FI("createdAt","desc"));return zI(e,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)})},G6=async(t,e)=>{try{return(await $I(vh(gn,yn.MEETINGS),{...t,owner:e,createdAt:Ft(),updatedAt:Ft(),participants:[{userId:e,status:"owner",joinedAt:Ft()}],availability:{},announcements:[]})).id}catch(n){throw console.error("모임 생성 실패:",n),n}},K6=async(t,e)=>{try{const n=mi(gn,yn.MEETINGS,t);await vo(n,{...e,updatedAt:Ft()})}catch(n){throw console.error("모임 업데이트 실패:",n),n}},Q6=async(t,e)=>{try{const n=mi(gn,yn.MEETINGS,t);await vo(n,{participants:WI({userId:e,status:"pending",joinedAt:Ft()}),updatedAt:Ft()})}catch(n){throw console.error("모임 참여 실패:",n),n}},Y6=async(t,e,n)=>{try{const r=mi(gn,yn.MEETINGS,t);await vo(r,{[`availability.${e}`]:n,updatedAt:Ft()})}catch(r){throw console.error("가용성 업데이트 실패:",r),r}},X6=async(t,e,n)=>{try{const r=mi(gn,yn.MEETINGS,t),i={id:Date.now().toString(),...e,authorId:n,createdAt:Ft(),priority:e.priority||"normal"};await vo(r,{announcements:WI(i),updatedAt:Ft()})}catch(r){throw console.error("공지사항 추가 실패:",r),r}},J6=async(t,e,n)=>{try{const r=mi(gn,yn.MEETINGS,t),i=await IL(r);if(!i.exists())throw new Error("모임을 찾을 수 없습니다");const o=i.data().announcements.filter(a=>a.id!==e);await vo(r,{announcements:o,updatedAt:Ft()})}catch(r){throw console.error("공지사항 삭제 실패:",r),r}},Z6=(t,e)=>t.participants.some(n=>n.userId===e&&n.status==="owner"),e5=({meeting:t,currentUser:e,onBack:n})=>{var V,O,b;const[r,i]=j.useState("schedule"),[s,o]=j.useState(!1),[a,c]=j.useState({title:"",content:"",priority:"normal"}),d=(()=>{const v=[];for(let P=9;P<=16;P++)for(let N=0;N<60;N+=30){const C=`${P.toString().padStart(2,"0")}:${N.toString().padStart(2,"0")}`;v.push({id:`${P}-${N}`,time:C,hour:P,minute:N})}return v})(),f=["월","화","수","목","금"],p=["12.31","01.01","01.02","01.03","01.04"],x=(v,S)=>{const I=`${v}-${S}`;let P=0;return t!=null&&t.availability&&Object.values(t.availability).forEach(N=>{N.includes(I)&&P++}),P},T=(v,S)=>{var N;const I=x(v,S),P=((N=t==null?void 0:t.participants)==null?void 0:N.length)||1;return I===0?"bg-gray-100 border-gray-200":I===P?"bg-green-500 border-green-600 text-white":I>=P*.8?"bg-green-400 border-green-500 text-white":I>=P*.6?"bg-green-300 border-green-400 text-white":I>=P*.4?"bg-yellow-300 border-yellow-400 text-white":I>=P*.2?"bg-orange-300 border-orange-400 text-white":"bg-red-200 border-red-300 text-red-800"},A=()=>{var I;const v=((I=t==null?void 0:t.participants)==null?void 0:I.length)||0,S=Object.keys((t==null?void 0:t.availability)||{}).length;return v>0?Math.round(S/v*100):0},_=(()=>{const v=[];return t!=null&&t.participants&&t.participants.forEach(S=>{var C;const I=((C=t.availability)==null?void 0:C[S.userId])||[],P=f.length*d.length,N=P>0?Math.round(I.length/P*100):0;v.push({userId:S.userId,status:S.status,availabilityRate:N,slotCount:I.length})}),v})(),y=async()=>{if(!a.title.trim()||!a.content.trim()){alert("제목과 내용을 모두 입력해주세요.");return}try{await X6(t.id,a,e.uid),c({title:"",content:"",priority:"normal"}),o(!1)}catch(v){alert(v.message)}},w=async v=>{if(window.confirm("정말로 이 공지사항을 삭제하시겠습니까?"))try{await J6(t.id,v,e.uid)}catch(S){alert(S.message)}},k=Z6(t,e==null?void 0:e.uid);return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:to-gray-800",children:[h.jsx("div",{className:"sticky top-0 z-40 glass-effect border-b border-white/20 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,className:"p-2 rounded-xl bg-white dark:bg-gray-700 shadow-md hover:shadow-lg transition-all duration-300",children:h.jsx(fE,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-kaist-blue dark:text-white",children:"모임 세부사항"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t==null?void 0:t.title})]})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Xt,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),h.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[((V=t==null?void 0:t.participants)==null?void 0:V.length)||0,"명 참여"]})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Zv,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),h.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["참석율 ",A(),"%"]})]})]})]})}),h.jsx("div",{className:"container mx-auto px-4 py-8",children:h.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"glass-effect rounded-2xl p-6 shadow-xl",children:[h.jsx("div",{className:"mb-8",children:h.jsxs("div",{className:"flex space-x-2 glass-effect p-1 rounded-xl",children:[h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i("schedule"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 ${r==="schedule"?"bg-kaist-blue text-white shadow-lg":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[h.jsx(Yt,{className:"w-4 h-4"}),h.jsx("span",{className:"font-medium",children:"시간표"})]}),h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i("attendance"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 ${r==="attendance"?"bg-kaist-blue text-white shadow-lg":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[h.jsx(Zv,{className:"w-4 h-4"}),h.jsx("span",{className:"font-medium",children:"참석율"})]}),h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>i("announcements"),className:`flex items-center space-x-2 px-4 py-2 rounded-xl transition-all duration-300 ${r==="announcements"?"bg-kaist-blue text-white shadow-lg":"bg-white dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[h.jsx(Kn,{className:"w-4 h-4"}),h.jsx("span",{className:"font-medium",children:"공지사항"})]})]})}),r==="schedule"&&h.jsxs(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"전체 참여자 시간표"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"진한 색일수록 많은 사람이 가능한 시간입니다"})]}),h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[h.jsxs("div",{className:"grid grid-cols-6 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600",children:[h.jsx("div",{className:"p-4 text-center font-medium text-gray-500 dark:text-gray-400",children:"시간"}),f.map((v,S)=>h.jsxs("div",{className:"p-4 text-center border-l border-gray-200 dark:border-gray-600",children:[h.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200",children:v}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:p[S]})]},v))]}),h.jsx("div",{className:"max-h-96 overflow-y-auto",children:d.map(v=>h.jsxs("div",{className:"grid grid-cols-6 border-b border-gray-100 dark:border-gray-700",children:[h.jsx("div",{className:"p-3 text-center text-sm text-gray-600 dark:text-gray-400 border-r border-gray-200 dark:border-gray-600",children:v.time}),f.map((S,I)=>{const P=x(I,v.id);return h.jsx("div",{className:`p-3 border-r border-gray-200 dark:border-gray-600 text-center text-xs font-medium ${T(I,v.id)}`,children:P>0&&P},I)})]},v.id))})]}),h.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[h.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-2",children:"범례"}),h.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),h.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"모든 참여자 가능"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 bg-green-300 rounded"}),h.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"80% 이상"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 bg-yellow-300 rounded"}),h.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"40-60%"})]}),h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-4 h-4 bg-red-200 rounded"}),h.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"20% 미만"})]})]})]})]}),r==="attendance"&&h.jsxs(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"참석율 현황"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[h.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[A(),"%"]}),h.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"전체 참석율"})]}),h.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[h.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Object.keys((t==null?void 0:t.availability)||{}).length}),h.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"시간 조율 완료"})]}),h.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[h.jsx("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:(((O=t==null?void 0:t.participants)==null?void 0:O.length)||0)-Object.keys((t==null?void 0:t.availability)||{}).length}),h.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"미완료"})]})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:"참여자별 가용성"}),_.map((v,S)=>h.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-kaist-blue to-kaist-lightblue rounded-full flex items-center justify-center",children:h.jsx("span",{className:"text-white text-sm font-bold",children:v.userId.charAt(0).toUpperCase()})}),h.jsxs("div",{children:[h.jsxs("div",{className:"font-medium text-gray-800 dark:text-white",children:["사용자 ",v.userId]}),h.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:v.status==="owner"?"모임장":"참여자"})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:[v.availabilityRate,"%"]}),h.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[v.slotCount,"개 시간대"]})]})]}),h.jsx("div",{className:"mt-3",children:h.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:h.jsx("div",{className:"bg-gradient-to-r from-kaist-blue to-kaist-lightblue h-2 rounded-full transition-all duration-300",style:{width:`${v.availabilityRate}%`}})})})]},S))]})]}),r==="announcements"&&h.jsxs(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3},children:[h.jsx("div",{className:"mb-6",children:h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"공지사항"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"모임 관련 중요한 공지사항을 확인하세요"})]}),k&&h.jsxs(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!0),className:"btn-primary flex items-center space-x-2",children:[h.jsx(Zu,{className:"w-4 h-4"}),h.jsx("span",{children:"공지 추가"})]})]})}),h.jsxs("div",{className:"space-y-4",children:[((b=t==null?void 0:t.announcements)==null?void 0:b.length)>0?t.announcements.map(v=>h.jsxs("div",{className:`p-4 border rounded-lg ${v.priority==="high"?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":v.priority==="low"?"bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600":"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}`,children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Kn,{className:`w-4 h-4 ${v.priority==="high"?"text-red-500":v.priority==="low"?"text-gray-500":"text-blue-500"}`}),h.jsx("span",{className:`font-medium ${v.priority==="high"?"text-red-700 dark:text-red-300":v.priority==="low"?"text-gray-700 dark:text-gray-300":"text-blue-700 dark:text-blue-300"}`,children:v.title}),h.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${v.priority==="high"?"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-800":v.priority==="low"?"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800":"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-800"}`,children:v.priority==="high"?"긴급":v.priority==="low"?"일반":"중요"})]}),k&&h.jsx(B.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>w(v.id),className:"p-1 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:h.jsx(gE,{className:"w-4 h-4"})})]}),h.jsx("p",{className:`text-sm mb-2 ${v.priority==="high"?"text-red-600 dark:text-red-400":v.priority==="low"?"text-gray-600 dark:text-gray-400":"text-blue-600 dark:text-blue-400"}`,children:v.content}),h.jsx("div",{className:`text-xs ${v.priority==="high"?"text-red-500 dark:text-red-400":v.priority==="low"?"text-gray-500 dark:text-gray-400":"text-blue-500 dark:text-blue-400"}`,children:Cn(v.createdAt,"yyyy년 M월 d일 HH:mm",{locale:Rr})})]},v.id)):h.jsxs("div",{className:"p-8 text-center bg-gray-50 dark:bg-gray-700 rounded-lg",children:[h.jsx(Kn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"아직 공지사항이 없습니다"}),h.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:k?"새로운 공지사항을 추가해보세요":"모임장이 공지사항을 추가하면 여기에 표시됩니다"})]}),h.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-lg",children:[h.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[h.jsx(pE,{className:"w-4 h-4 text-gray-500"}),h.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"모임 정보"})]}),h.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[h.jsxs("div",{children:["• 모임 유형: ",(t==null?void 0:t.type)||"스터디"]}),h.jsxs("div",{children:["• 최대 참여자: ",(t==null?void 0:t.maxParticipants)||"제한 없음","명"]}),h.jsxs("div",{children:["• 장소: ",(t==null?void 0:t.location)||"미정"]}),h.jsxs("div",{children:["• 생성일: ",Cn((t==null?void 0:t.createdAt)||new Date,"yyyy년 M월 d일",{locale:Rr})]})]})]})]})]})]})}),s&&h.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>o(!1),children:h.jsxs(B.div,{initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},transition:{type:"spring",damping:20,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-md",onClick:v=>v.stopPropagation(),children:[h.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-kaist-blue to-kaist-lightblue rounded-xl flex items-center justify-center",children:h.jsx(Kn,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-kaist-blue dark:text-white",children:"공지사항 추가"}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"새로운 공지사항을 작성하세요"})]})]}),h.jsx(B.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o(!1),className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:h.jsx(Zf,{className:"w-5 h-5 text-gray-500 dark:text-gray-300"})})]}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"제목 *"}),h.jsx("input",{type:"text",value:a.title,onChange:v=>c({...a,title:v.target.value}),className:"input-field",placeholder:"공지사항 제목을 입력하세요"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"내용 *"}),h.jsx("textarea",{value:a.content,onChange:v=>c({...a,content:v.target.value}),className:"input-field min-h-[120px] resize-none",placeholder:"공지사항 내용을 입력하세요"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-2",children:"우선순위"}),h.jsxs("select",{value:a.priority,onChange:v=>c({...a,priority:v.target.value}),className:"input-field",children:[h.jsx("option",{value:"low",children:"일반"}),h.jsx("option",{value:"normal",children:"중요"}),h.jsx("option",{value:"high",children:"긴급"})]})]}),h.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!1),className:"btn-secondary",children:"취소"}),h.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:y,className:"btn-primary",children:"추가"})]})]})]})})]})},t5=({isOpen:t,onClose:e})=>{const{login:n,isKaistUser:r}=Sh(),[i,s]=j.useState(!1),[o,a]=j.useState(""),c=async()=>{s(!0),a("");try{await n(),e()}catch(d){d.code==="auth/popup-closed-by-user"?a("로그인 창이 닫혔습니다. 다시 시도해주세요."):d.code==="auth/popup-blocked"?a("팝업이 차단되었습니다. 브라우저 설정에서 팝업을 허용해주세요."):a("로그인 중 오류가 발생했습니다. 다시 시도해주세요.")}finally{s(!1)}},u=()=>{a("KAIST SSO는 현재 개발 중입니다. Google 로그인을 사용해주세요.")};return t?h.jsx(Ju,{children:h.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:e,children:h.jsxs(B.div,{initial:{scale:.9,y:50},animate:{scale:1,y:0},exit:{scale:.9,y:50},transition:{type:"spring",damping:20,stiffness:300},className:"bg-white dark:bg-gray-800 rounded-2xl p-8 shadow-2xl w-full max-w-md relative",onClick:d=>d.stopPropagation(),children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:h.jsx(qp,{className:"w-6 h-6"})}),h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-16 h-16 bg-kaist-blue rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("span",{className:"text-white text-2xl font-bold",children:"K"})}),h.jsx("h2",{className:"text-3xl font-bold text-kaist-blue dark:text-blue-400 mb-2",children:"KAIST Scheduler"}),h.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"로그인하여 모임과 일정을 관리하세요"})]}),o&&h.jsxs(B.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center space-x-2",children:[h.jsx(dE,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),h.jsx("span",{className:"text-red-700 dark:text-red-300 text-sm",children:o})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,disabled:i,className:"w-full flex items-center justify-center space-x-3 px-6 py-4 bg-white dark:bg-gray-700 border-2 border-gray-300 dark:border-gray-600 rounded-xl hover:border-kaist-blue dark:hover:border-blue-400 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:[i?h.jsx("div",{className:"w-5 h-5 border-2 border-kaist-blue border-t-transparent rounded-full animate-spin"}):h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),h.jsx("span",{className:"text-gray-700 dark:text-gray-200 font-medium",children:i?"로그인 중...":"Google로 로그인"})]}),h.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,className:"w-full flex items-center justify-center space-x-3 px-6 py-4 bg-kaist-blue text-white rounded-xl hover:bg-blue-700 transition-all duration-300",children:[h.jsx(TR,{className:"w-5 h-5"}),h.jsx("span",{className:"font-medium",children:"KAIST SSO로 로그인"})]})]}),h.jsx("div",{className:"mt-8 text-center",children:h.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["로그인하면"," ",h.jsx("span",{className:"text-kaist-blue dark:text-blue-400 font-medium",children:"서비스 이용약관"}),"과"," ",h.jsx("span",{className:"text-kaist-blue dark:text-blue-400 font-medium",children:"개인정보처리방침"}),"에 동의하는 것으로 간주됩니다."]})}),h.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(ou,{className:"w-5 h-5 text-blue-500 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-blue-700 dark:text-blue-300 text-sm font-medium",children:"지원되는 이메일"}),h.jsx("p",{className:"text-blue-600 dark:text-blue-400 text-xs",children:"@kaist.ac.kr 또는 @gmail.com 이메일로 로그인 가능합니다"})]})]})})]})})}):null},n5=()=>h.jsx(B.footer,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mt-auto py-8 px-4",children:h.jsx("div",{className:"container mx-auto",children:h.jsxs("div",{className:"glass-effect rounded-2xl p-6 shadow-xl border-t border-white/20",children:[h.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600 dark:text-gray-400",children:[h.jsx("span",{className:"text-sm font-medium",children:"Made by"}),h.jsx(B.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"text-blue-500",children:"💙"}),h.jsx("span",{className:"text-sm font-medium",children:"with"}),h.jsx("span",{className:"text-sm font-bold text-kaist-blue dark:text-blue-400",children:"Donghyuk"})]}),h.jsx("div",{className:"mt-2 text-center",children:h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"KAIST Student Scheduler - 캠퍼스 일정 관리 시스템"})})]})})});function r5(){const{user:t,loading:e}=Sh(),[n,r]=j.useState("calendar"),[i,s]=j.useState(new Date),[o,a]=j.useState([]),[c,u]=j.useState([]),[d,f]=j.useState(!1),[p,x]=j.useState(!1),[T,A]=j.useState(!1),[R,_]=j.useState(null),[y,w]=j.useState(null),[k,V]=j.useState(null),[O,b]=j.useState(!1);j.useEffect(()=>{if(!t){a([]),u([]);return}const $=$6(t.uid,X=>{a(X)}),K=q6(X=>{u(X)});return()=>{$(),K()}},[t]);const v=async $=>{try{await z6($,t.uid),N()}catch(K){console.error("이벤트 생성 실패:",K),alert("이벤트 생성에 실패했습니다.")}},S=async $=>{try{await H6($.id,$),N()}catch(K){console.error("이벤트 업데이트 실패:",K),alert("이벤트 업데이트에 실패했습니다.")}},I=async $=>{try{await W6($)}catch(K){console.error("이벤트 삭제 실패:",K),alert("이벤트 삭제에 실패했습니다.")}},P=($=null)=>{_($),f(!0)},N=()=>{f(!1),_(null)},C=async $=>{try{await G6($,t.uid),oe()}catch(K){console.error("모임 생성 실패:",K),alert("모임 생성에 실패했습니다.")}},Y=async $=>{try{await K6($.id,$),oe()}catch(K){console.error("모임 업데이트 실패:",K),alert("모임 업데이트에 실패했습니다.")}},ee=($=null)=>{if(!$&&(!t||!t.uid)){alert("모임을 생성하려면 로그인이 필요합니다.");return}w($),x(!0)},oe=()=>{x(!1),w(null)},Me=async $=>{if(!t||!t.uid){alert("모임에 참여하려면 로그인이 필요합니다.");return}try{await Q6($.id,t.uid)}catch(K){console.error("모임 참여 실패:",K),alert("모임 참여에 실패했습니다.")}},H=async $=>{if(!t||!t.uid){alert("시간 조율을 하려면 로그인이 필요합니다.");return}if(k)try{await Y6(k.id,t.uid,$)}catch(K){console.error("가용성 업데이트 실패:",K),alert("가용성 업데이트에 실패했습니다.")}};return e?h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center",children:h.jsxs(B.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-kaist-blue rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("span",{className:"text-white text-2xl font-bold",children:"K"})}),h.jsx("div",{className:"w-8 h-8 border-4 border-kaist-blue border-t-transparent rounded-full animate-spin mx-auto"}),h.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"로딩 중..."})]})}):h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:to-gray-800 flex flex-col",children:[h.jsx(DL,{view:n,setView:r,onAddEvent:()=>P(),onLogin:()=>A(!0)}),h.jsx("main",{className:"container mx-auto px-4 py-8 flex-1",children:h.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"glass-effect rounded-2xl p-6 shadow-xl",children:n==="calendar"?h.jsx(D6,{selectedDate:i,setSelectedDate:s,events:o,meetings:c,onEventClick:P,onDateClick:$=>{s($),P({date:$})},currentUser:t}):n==="schedule"?h.jsx(M6,{events:o,onEventClick:P,onAddEvent:()=>P()}):n==="meetings"?O?h.jsx(e5,{meeting:k,currentUser:t,onBack:()=>b(!1)}):k?h.jsx(B6,{meeting:k,currentUser:t,onAvailabilityChange:H,onBack:()=>V(null),onComplete:()=>b(!0)}):h.jsx(F6,{meetings:c,currentUser:t,onMeetingClick:$=>V($),onCreateMeeting:()=>ee(),onJoinMeeting:Me}):null},n)}),h.jsx(n5,{}),d&&h.jsx(V6,{event:R,onSave:R?S:v,onDelete:R?()=>I(R.id):null,onClose:N}),p&&h.jsx(U6,{meeting:y,onSave:y?Y:C,onClose:oe,currentUser:t}),T&&h.jsx(t5,{isOpen:T,onClose:()=>A(!1)})]})}qd.createRoot(document.getElementById("root")).render(h.jsx(Nm.StrictMode,{children:h.jsx(NL,{children:h.jsx(r5,{})})}));
